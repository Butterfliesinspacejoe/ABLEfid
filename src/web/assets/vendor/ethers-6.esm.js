/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/ethers@6.13.2/lib.esm/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{hmac as t}from"/npm/@noble/hashes@1.3.2/hmac/+esm";import{pbkdf2 as e}from"/npm/@noble/hashes@1.3.2/pbkdf2/+esm";import{sha256 as r}from"/npm/@noble/hashes@1.3.2/sha256/+esm";import{sha512 as n}from"/npm/@noble/hashes@1.3.2/sha512/+esm";import{keccak_256 as s}from"/npm/@noble/hashes@1.3.2/sha3/+esm";import{ripemd160 as i}from"/npm/@noble/hashes@1.3.2/ripemd160/+esm";import{scryptAsync as a,scrypt as o}from"/npm/@noble/hashes@1.3.2/scrypt/+esm";import{secp256k1 as c}from"/npm/@noble/curves@1.2.0/secp256k1/+esm";import{ens_normalize as l}from"/npm/@adraffy/ens-normalize@1.10.1/+esm";import{CTR as u,CBC as h,pkcs7Strip as d}from"/npm/aes-js@4.0.0-beta.5/+esm";const f="6.13.2";function p(t,e,r){const n=e.split("|").map((t=>t.trim()));for(let r=0;r<n.length;r++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${r}`,s.value=t,s}async function g(t){const e=Object.keys(t);return(await Promise.all(e.map((e=>Promise.resolve(t[e]))))).reduce(((t,r,n)=>(t[e[n]]=r,t)),{})}function m(t,e,r){for(let n in e){let s=e[n];const i=r?r[n]:null;i&&p(s,i,n),Object.defineProperty(t,n,{enumerable:!0,value:s,writable:!1})}}function y(t){if(null==t)return"null";if(Array.isArray(t))return"[ "+t.map(y).join(", ")+" ]";if(t instanceof Uint8Array){const e="0123456789abcdef";let r="0x";for(let n=0;n<t.length;n++)r+=e[t[n]>>4],r+=e[15&t[n]];return r}if("object"==typeof t&&"function"==typeof t.toJSON)return y(t.toJSON());switch(typeof t){case"boolean":case"symbol":case"number":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const e=Object.keys(t);return e.sort(),"{ "+e.map((e=>`${y(e)}: ${y(t[e])}`)).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function b(t,e){return t&&t.code===e}function w(t){return b(t,"CALL_EXCEPTION")}function v(t,e,r){let n,s=t;{const n=[];if(r){if("message"in r||"code"in r||"name"in r)throw new Error(`value will overwrite populated values: ${y(r)}`);for(const t in r){if("shortMessage"===t)continue;const e=r[t];n.push(t+"="+y(e))}}n.push(`code=${e}`),n.push(`version=${f}`),n.length&&(t+=" ("+n.join(", ")+")")}switch(e){case"INVALID_ARGUMENT":n=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":n=new RangeError(t);break;default:n=new Error(t)}return m(n,{code:e}),r&&Object.assign(n,r),null==n.shortMessage&&m(n,{shortMessage:s}),n}function k(t,e,r,n){if(!t)throw v(e,r,n)}function E(t,e,r,n){k(t,e,"INVALID_ARGUMENT",{argument:r,value:n})}function N(t,e,r){null==r&&(r=""),r&&(r=": "+r),k(t>=e,"missing arguemnt"+r,"MISSING_ARGUMENT",{count:t,expectedCount:e}),k(t<=e,"too many arguments"+r,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}const P=["NFD","NFC","NFKD","NFKC"].reduce(((t,e)=>{try{if("test"!=="test".normalize(e))throw new Error("bad");if("NFD"===e){const t=String.fromCharCode(233).normalize("NFD");if(t!==String.fromCharCode(101,769))throw new Error("broken")}t.push(e)}catch(t){}return t}),[]);function R(t){k(P.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}})}function T(t,e,r){if(null==r&&(r=""),t!==e){let t=r,e="new";r&&(t+=".",e+=" "+r),k(!1,`private constructor; use ${t}from* methods`,"UNSUPPORTED_OPERATION",{operation:e})}}function O(t,e,r){if(t instanceof Uint8Array)return r?new Uint8Array(t):t;if("string"==typeof t&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const e=new Uint8Array((t.length-2)/2);let r=2;for(let n=0;n<e.length;n++)e[n]=parseInt(t.substring(r,r+2),16),r+=2;return e}E(!1,"invalid BytesLike value",e||"value",t)}function x(t,e){return O(t,e,!1)}function A(t,e){return O(t,e,!0)}function I(t,e){return!("string"!=typeof t||!t.match(/^0x[0-9A-Fa-f]*$/))&&(("number"!=typeof e||t.length===2+2*e)&&(!0!==e||t.length%2==0))}function S(t){return I(t,!0)||t instanceof Uint8Array}const C="0123456789abcdef";function _(t){const e=x(t);let r="0x";for(let t=0;t<e.length;t++){const n=e[t];r+=C[(240&n)>>4]+C[15&n]}return r}function U(t){return"0x"+t.map((t=>_(t).substring(2))).join("")}function F(t){return I(t,!0)?(t.length-2)/2:x(t).length}function L(t,e,r){const n=x(t);return null!=r&&r>n.length&&k(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r}),_(n.slice(null==e?0:e,null==r?n.length:r))}function B(t){let e=_(t).substring(2);for(;e.startsWith("00");)e=e.substring(2);return"0x"+e}function D(t,e,r){const n=x(t);k(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),r?s.set(n,e-n.length):s.set(n,0),_(s)}function G(t,e){return D(t,e,!0)}function $(t,e){return D(t,e,!1)}const M=BigInt(0),j=BigInt(1),V=9007199254740991;function K(t,e){const r=J(t,"value"),n=BigInt(X(e,"width"));if(k(r>>n===M,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),r>>n-j){return-((~r&(j<<n)-j)+j)}return r}function H(t,e){let r=q(t,"value");const n=BigInt(X(e,"width")),s=j<<n-j;if(r<M){r=-r,k(r<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return(~r&(j<<n)-j)+j}return k(r<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t}),r}function z(t,e){const r=J(t,"value"),n=BigInt(X(e,"bits"));return r&(j<<n)-j}function q(t,e){switch(typeof t){case"bigint":return t;case"number":return E(Number.isInteger(t),"underflow",e||"value",t),E(t>=-V&&t<=V,"overflow",e||"value",t),BigInt(t);case"string":try{if(""===t)throw new Error("empty string");return"-"===t[0]&&"-"!==t[1]?-BigInt(t.substring(1)):BigInt(t)}catch(r){E(!1,`invalid BigNumberish string: ${r.message}`,e||"value",t)}}E(!1,"invalid BigNumberish value",e||"value",t)}function J(t,e){const r=q(t,e);return k(r>=M,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),r}const W="0123456789abcdef";function Y(t){if(t instanceof Uint8Array){let e="0x0";for(const r of t)e+=W[r>>4],e+=W[15&r];return BigInt(e)}return q(t)}function X(t,e){switch(typeof t){case"bigint":return E(t>=-V&&t<=V,"overflow",e||"value",t),Number(t);case"number":return E(Number.isInteger(t),"underflow",e||"value",t),E(t>=-V&&t<=V,"overflow",e||"value",t),t;case"string":try{if(""===t)throw new Error("empty string");return X(BigInt(t),e)}catch(r){E(!1,`invalid numeric string: ${r.message}`,e||"value",t)}}E(!1,"invalid numeric value",e||"value",t)}function Z(t){return X(Y(t))}function Q(t,e){let r=J(t,"value").toString(16);if(null==e)r.length%2&&(r="0"+r);else{const n=X(e,"width");for(k(2*n>=r.length,`value exceeds width (${n} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<2*n;)r="0"+r}return"0x"+r}function tt(t){const e=J(t,"value");if(e===M)return new Uint8Array([]);let r=e.toString(16);r.length%2&&(r="0"+r);const n=new Uint8Array(r.length/2);for(let t=0;t<n.length;t++){const e=2*t;n[t]=parseInt(r.substring(e,e+2),16)}return n}function et(t){let e=_(S(t)?t:tt(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return""===e&&(e="0"),"0x"+e}const rt="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let nt=null;function st(t){if(null==nt){nt={};for(let t=0;t<58;t++)nt[rt[t]]=BigInt(t)}const e=nt[t];return E(null!=e,"invalid base58 value","letter",t),e}const it=BigInt(0),at=BigInt(58);function ot(t){const e=x(t);let r=Y(e),n="";for(;r;)n=rt[Number(r%at)]+n,r/=at;for(let t=0;t<e.length&&!e[t];t++)n=rt[0]+n;return n}function ct(t){let e=it;for(let r=0;r<t.length;r++)e*=at,e+=st(t[r]);return e}function lt(t){t=atob(t);const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return x(e)}function ut(t){const e=x(t);let r="";for(let t=0;t<e.length;t++)r+=String.fromCharCode(e[t]);return btoa(r)}class ht{filter;emitter;#t;constructor(t,e,r){this.#t=e,m(this,{emitter:t,filter:r})}async removeListener(){null!=this.#t&&await this.emitter.off(this.filter,this.#t)}}function dt(t,e,r,n,s){if("BAD_PREFIX"===t||"UNEXPECTED_CONTINUE"===t){let t=0;for(let n=e+1;n<r.length&&r[n]>>6==2;n++)t++;return t}return"OVERRUN"===t?r.length-e-1:0}const ft=Object.freeze({error:function(t,e,r,n,s){E(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",r)},ignore:dt,replace:function(t,e,r,n,s){return"OVERLONG"===t?(E("number"==typeof s,"invalid bad code point for replacement","badCodepoint",s),n.push(s),0):(n.push(65533),dt(t,e,r))}});function pt(t,e){null==e&&(e=ft.error);const r=x(t,"bytes"),n=[];let s=0;for(;s<r.length;){const t=r[s++];if(!(t>>7)){n.push(t);continue}let i=null,a=null;if(192==(224&t))i=1,a=127;else if(224==(240&t))i=2,a=2047;else{if(240!=(248&t)){s+=e(128==(192&t)?"UNEXPECTED_CONTINUE":"BAD_PREFIX",s-1,r,n);continue}i=3,a=65535}if(s-1+i>=r.length){s+=e("OVERRUN",s-1,r,n);continue}let o=t&(1<<8-i-1)-1;for(let t=0;t<i;t++){let t=r[s];if(128!=(192&t)){s+=e("MISSING_CONTINUE",s,r,n),o=null;break}o=o<<6|63&t,s++}null!==o&&(o>1114111?s+=e("OUT_OF_RANGE",s-1-i,r,n,o):o>=55296&&o<=57343?s+=e("UTF16_SURROGATE",s-1-i,r,n,o):o<=a?s+=e("OVERLONG",s-1-i,r,n,o):n.push(o))}return n}function gt(t,e){E("string"==typeof t,"invalid string value","str",t),null!=e&&(R(e),t=t.normalize(e));let r=[];for(let e=0;e<t.length;e++){const n=t.charCodeAt(e);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){e++;const s=t.charCodeAt(e);E(e<t.length&&56320==(64512&s),"invalid surrogate pair","str",t);const i=65536+((1023&n)<<10)+(1023&s);r.push(i>>18|240),r.push(i>>12&63|128),r.push(i>>6&63|128),r.push(63&i|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return new Uint8Array(r)}function mt(t,e){return pt(t,e).map((t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10&1023),56320+(1023&t))))).join("")}function yt(t,e){return pt(gt(t,e))}function bt(t){return async function(t,e){k(null==e||!e.cancelled,"request cancelled before sending","CANCELLED");const r=t.url.split(":")[0].toLowerCase();k("http"===r||"https"===r,`unsupported protocol ${r}`,"UNSUPPORTED_OPERATION",{info:{protocol:r},operation:"request"}),k("https"===r||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let n=null;const s=new AbortController,i=setTimeout((()=>{n=v("request timeout","TIMEOUT"),s.abort()}),t.timeout);e&&e.addListener((()=>{n=v("request cancelled","CANCELLED"),s.abort()}));const a={method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:s.signal};let o;try{o=await fetch(t.url,a)}catch(t){if(clearTimeout(i),n)throw n;throw t}clearTimeout(i);const c={};o.headers.forEach(((t,e)=>{c[e.toLowerCase()]=t}));const l=await o.arrayBuffer(),u=null==l?null:new Uint8Array(l);return{statusCode:o.status,statusMessage:o.statusText,headers:c,body:u}}}let wt=bt();const vt=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),kt=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Et=!1;async function Nt(t,e){try{const e=t.match(vt);if(!e)throw new Error("invalid data");return new It(200,"OK",{"content-type":e[1]||"text/plain"},e[2]?lt(e[3]):gt(e[3].replace(/%([0-9a-f][0-9a-f])/gi,((t,e)=>String.fromCharCode(parseInt(e,16))))))}catch(e){return new It(599,"BAD REQUEST (invalid data: URI)",{},null,new At(t))}}function Pt(t){return async function(e,r){try{const r=e.match(kt);if(!r)throw new Error("invalid link");return new At(`${t}${r[2]}`)}catch(t){return new It(599,"BAD REQUEST (invalid IPFS URI)",{},null,new At(e))}}}const Rt={data:Nt,ipfs:Pt("https://gateway.ipfs.io/ipfs/")},Tt=new WeakMap;class Ot{#e;#r;constructor(t){this.#e=[],this.#r=!1,Tt.set(t,(()=>{if(!this.#r){this.#r=!0;for(const t of this.#e)setTimeout((()=>{t()}),0);this.#e=[]}}))}addListener(t){k(!this.#r,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#e.push(t)}get cancelled(){return this.#r}checkSignal(){k(!this.cancelled,"cancelled","CANCELLED",{})}}function xt(t){if(null==t)throw new Error("missing signal; should not happen");return t.checkSignal(),t}class At{#n;#s;#i;#a;#o;#c;#l;#u;#h;#d;#f;#p;#g;#m;#y;get url(){return this.#c}set url(t){this.#c=String(t)}get body(){return null==this.#l?null:new Uint8Array(this.#l)}set body(t){if(null==t)this.#l=void 0,this.#u=void 0;else if("string"==typeof t)this.#l=gt(t),this.#u="text/plain";else if(t instanceof Uint8Array)this.#l=t,this.#u="application/octet-stream";else{if("object"!=typeof t)throw new Error("invalid body");this.#l=gt(JSON.stringify(t)),this.#u="application/json"}}hasBody(){return null!=this.#l}get method(){return this.#a?this.#a:this.hasBody()?"POST":"GET"}set method(t){null==t&&(t=""),this.#a=String(t).toUpperCase()}get headers(){const t=Object.assign({},this.#i);return this.#h&&(t.authorization=`Basic ${ut(gt(this.#h))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),null==t["content-type"]&&this.#u&&(t["content-type"]=this.#u),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,e){this.#i[String(t).toLowerCase()]=String(e)}clearHeaders(){this.#i={}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let r=0;return{next:()=>{if(r<e.length){const n=e[r++];return{value:[n,t[n]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#h||null}setCredentials(t,e){E(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#h=`${t}:${e}`}get allowGzip(){return this.#s}set allowGzip(t){this.#s=!!t}get allowInsecureAuthentication(){return!!this.#n}set allowInsecureAuthentication(t){this.#n=!!t}get timeout(){return this.#o}set timeout(t){E(t>=0,"timeout must be non-zero","timeout",t),this.#o=t}get preflightFunc(){return this.#d||null}set preflightFunc(t){this.#d=t}get processFunc(){return this.#f||null}set processFunc(t){this.#f=t}get retryFunc(){return this.#p||null}set retryFunc(t){this.#p=t}get getUrlFunc(){return this.#y||wt}set getUrlFunc(t){this.#y=t}constructor(t){this.#c=String(t),this.#n=!1,this.#s=!0,this.#i={},this.#a="",this.#o=3e5,this.#m={slotInterval:250,maxAttempts:12},this.#y=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#l?_(this.#l):"null"}>`}setThrottleParams(t){null!=t.slotInterval&&(this.#m.slotInterval=t.slotInterval),null!=t.maxAttempts&&(this.#m.maxAttempts=t.maxAttempts)}async#b(t,e,r,n,s){if(t>=this.#m.maxAttempts)return s.makeServerError("exceeded maximum retry limit");k(St()<=e,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:n}),r>0&&await function(t){return new Promise((e=>setTimeout(e,t)))}(r);let i=this.clone();const a=(i.url.split(":")[0]||"").toLowerCase();if(a in Rt){const t=await Rt[a](i.url,xt(n.#g));if(t instanceof It){let e=t;if(this.processFunc){xt(n.#g);try{e=await this.processFunc(i,e)}catch(t){null!=t.throttle&&"number"==typeof t.stall||e.makeServerError("error in post-processing function",t).assertOk()}}return e}i=t}this.preflightFunc&&(i=await this.preflightFunc(i));const o=await this.getUrlFunc(i,xt(n.#g));let c=new It(o.statusCode,o.statusMessage,o.headers,o.body,n);if(301===c.statusCode||302===c.statusCode){try{const r=c.headers.location||"";return i.redirect(r).#b(t+1,e,0,n,c)}catch(t){}return c}if(429===c.statusCode&&(null==this.retryFunc||await this.retryFunc(i,c,t))){const r=c.headers["retry-after"];let s=this.#m.slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return"string"==typeof r&&r.match(/^[1-9][0-9]*$/)&&(s=parseInt(r)),i.clone().#b(t+1,e,s,n,c)}if(this.processFunc){xt(n.#g);try{c=await this.processFunc(i,c)}catch(r){null!=r.throttle&&"number"==typeof r.stall||c.makeServerError("error in post-processing function",r).assertOk();let s=this.#m.slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return r.stall>=0&&(s=r.stall),i.clone().#b(t+1,e,s,n,c)}}return c}send(){return k(null==this.#g,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#g=new Ot(this),this.#b(0,St()+this.timeout,0,this,new It(0,"",{},null,this))}cancel(){k(null!=this.#g,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=Tt.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(t){const e=this.url.split(":")[0].toLowerCase(),r=t.split(":")[0].toLowerCase();k("GET"===this.method&&("https"!==e||"http"!==r)&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const n=new At(t);return n.method="GET",n.allowGzip=this.allowGzip,n.timeout=this.timeout,n.#i=Object.assign({},this.#i),this.#l&&(n.#l=new Uint8Array(this.#l)),n.#u=this.#u,n}clone(){const t=new At(this.url);return t.#a=this.#a,this.#l&&(t.#l=this.#l),t.#u=this.#u,t.#i=Object.assign({},this.#i),t.#h=this.#h,this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),t.#d=this.#d,t.#f=this.#f,t.#p=this.#p,t.#m=Object.assign({},this.#m),t.#y=this.#y,t}static lockConfig(){Et=!0}static getGateway(t){return Rt[t.toLowerCase()]||null}static registerGateway(t,e){if("http"===(t=t.toLowerCase())||"https"===t)throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(Et)throw new Error("gateways locked");Rt[t]=e}static registerGetUrl(t){if(Et)throw new Error("gateways locked");wt=t}static createGetUrlFunc(t){return bt()}static createDataGateway(){return Nt}static createIpfsGatewayFunc(t){return Pt(t)}}class It{#w;#v;#i;#l;#k;#E;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#l?_(this.#l):"null"}>`}get statusCode(){return this.#w}get statusMessage(){return this.#v}get headers(){return Object.assign({},this.#i)}get body(){return null==this.#l?null:new Uint8Array(this.#l)}get bodyText(){try{return null==this.#l?"":mt(this.#l)}catch(t){k(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(t){k(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let r=0;return{next:()=>{if(r<e.length){const n=e[r++];return{value:[n,t[n]],done:!1}}return{value:void 0,done:!0}}}}constructor(t,e,r,n,s){this.#w=t,this.#v=e,this.#i=Object.keys(r).reduce(((t,e)=>(t[e.toLowerCase()]=String(r[e]),t)),{}),this.#l=null==n?null:new Uint8Array(n),this.#k=s||null,this.#E={message:""}}makeServerError(t,e){let r;r=t?`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:`CLIENT ESCALATED SERVER ERROR (${t=`${this.statusCode} ${this.statusMessage}`})`;const n=new It(599,r,this.headers,this.body,this.#k||void 0);return n.#E={message:t,error:e},n}throwThrottleError(t,e){null==e?e=-1:E(Number.isInteger(e)&&e>=0,"invalid stall timeout","stall",e);const r=new Error(t||"throttling requests");throw m(r,{stall:e,throttle:!0}),r}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return null!=this.#l}get request(){return this.#k}ok(){return""===this.#E.message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:e}=this.#E;""===t&&(t=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let n=null;try{this.#l&&(n=mt(this.#l))}catch(t){}k(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:e,info:{requestUrl:r,responseBody:n,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function St(){return(new Date).getTime()}const Ct=BigInt(-1),_t=BigInt(0),Ut=BigInt(1),Ft=BigInt(5),Lt={};let Bt="0000";for(;Bt.length<80;)Bt+=Bt;function Dt(t){let e=Bt;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function Gt(t,e,r){const n=BigInt(e.width);if(e.signed){const e=Ut<<n-Ut;k(null==r||t>=-e&&t<e,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:t}),t=t>_t?K(z(t,n),n):-K(z(-t,n),n)}else{const e=Ut<<n;k(null==r||t>=0&&t<e,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:t}),t=(t%e+e)%e&e-Ut}return t}function $t(t){"number"==typeof t&&(t=`fixed128x${t}`);let e=!0,r=128,n=18;if("string"==typeof t)if("fixed"===t);else if("ufixed"===t)e=!1;else{const s=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);E(s,"invalid fixed format","format",t),e="u"!==s[1],r=parseInt(s[2]),n=parseInt(s[3])}else if(t){const s=t,i=(t,e,r)=>null==s[t]?r:(E(typeof s[t]===e,"invalid fixed format ("+t+" not "+e+")","format."+t,s[t]),s[t]);e=i("signed","boolean",e),r=i("width","number",r),n=i("decimals","number",n)}E(r%8==0,"invalid FixedNumber width (not byte aligned)","format.width",r),E(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);return{signed:e,width:r,decimals:n,name:(e?"":"u")+"fixed"+String(r)+"x"+String(n)}}class Mt{format;#N;#P;#R;_value;constructor(t,e,r){T(t,Lt,"FixedNumber"),this.#P=e,this.#N=r;const n=function(t,e){let r="";t<_t&&(r="-",t*=Ct);let n=t.toString();if(0===e)return r+n;for(;n.length<=e;)n=Bt+n;const s=n.length-e;for(n=n.substring(0,s)+"."+n.substring(s);"0"===n[0]&&"."!==n[1];)n=n.substring(1);for(;"0"===n[n.length-1]&&"."!==n[n.length-2];)n=n.substring(0,n.length-1);return r+n}(e,r.decimals);m(this,{format:r.name,_value:n}),this.#R=Dt(r.decimals)}get signed(){return this.#N.signed}get width(){return this.#N.width}get decimals(){return this.#N.decimals}get value(){return this.#P}#T(t){E(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)}#O(t,e){return t=Gt(t,this.#N,e),new Mt(Lt,t,this.#N)}#x(t,e){return this.#T(t),this.#O(this.#P+t.#P,e)}addUnsafe(t){return this.#x(t)}add(t){return this.#x(t,"add")}#A(t,e){return this.#T(t),this.#O(this.#P-t.#P,e)}subUnsafe(t){return this.#A(t)}sub(t){return this.#A(t,"sub")}#I(t,e){return this.#T(t),this.#O(this.#P*t.#P/this.#R,e)}mulUnsafe(t){return this.#I(t)}mul(t){return this.#I(t,"mul")}mulSignal(t){this.#T(t);const e=this.#P*t.#P;return k(e%this.#R===_t,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#O(e/this.#R,"mulSignal")}#S(t,e){return k(t.#P!==_t,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#T(t),this.#O(this.#P*this.#R/t.#P,e)}divUnsafe(t){return this.#S(t)}div(t){return this.#S(t,"div")}divSignal(t){k(t.#P!==_t,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#T(t);const e=this.#P*this.#R;return k(e%t.#P===_t,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#O(e/t.#P,"divSignal")}cmp(t){let e=this.value,r=t.value;const n=this.decimals-t.decimals;return n>0?r*=Dt(n):n<0&&(e*=Dt(-n)),e<r?-1:e>r?1:0}eq(t){return 0===this.cmp(t)}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=this.#P;return this.#P<_t&&(t-=this.#R-Ut),t=this.#P/this.#R*this.#R,this.#O(t,"floor")}ceiling(){let t=this.#P;return this.#P>_t&&(t+=this.#R-Ut),t=this.#P/this.#R*this.#R,this.#O(t,"ceiling")}round(t){if(null==t&&(t=0),t>=this.decimals)return this;const e=this.decimals-t,r=Ft*Dt(e-1);let n=this.value+r;const s=Dt(e);return n=n/s*s,Gt(n,this.#N,"round"),new Mt(Lt,n,this.#N)}isZero(){return this.#P===_t}isNegative(){return this.#P<_t}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return Mt.fromString(this.toString(),t)}static fromValue(t,e,r){const n=null==e?0:X(e),s=$t(r);let i=q(t,"value");const a=n-s.decimals;if(a>0){const e=Dt(a);k(i%e===_t,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),i/=e}else a<0&&(i*=Dt(-a));return Gt(i,s,"fromValue"),new Mt(Lt,i,s)}static fromString(t,e){const r=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);E(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",t);const n=$t(e);let s=r[2]||"0",i=r[3]||"";for(;i.length<n.decimals;)i+=Bt;k(i.substring(n.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),i=i.substring(0,n.decimals);const a=BigInt(r[1]+s+i);return Gt(a,n,"fromString"),new Mt(Lt,a,n)}static fromBytes(t,e){let r=Y(x(t,"value"));const n=$t(e);return n.signed&&(r=K(r,n.width)),Gt(r,n,"fromBytes"),new Mt(Lt,r,n)}}function jt(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Vt(t,e,r){let n=0;for(let s=0;s<r;s++)n=256*n+t[e+s];return n}function Kt(t,e,r,n){const s=[];for(;r<e+1+n;){const i=Ht(t,r);s.push(i.result),k((r+=i.consumed)<=e+1+n,"child data too short","BUFFER_OVERRUN",{buffer:t,length:n,offset:e})}return{consumed:1+n,result:s}}function Ht(t,e){k(0!==t.length,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const r=e=>{k(e<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:e})};if(t[e]>=248){const n=t[e]-247;r(e+1+n);const s=Vt(t,e+1,n);return r(e+1+n+s),Kt(t,e,e+1+n,n+s)}if(t[e]>=192){const n=t[e]-192;return r(e+1+n),Kt(t,e,e+1,n)}if(t[e]>=184){const n=t[e]-183;r(e+1+n);const s=Vt(t,e+1,n);r(e+1+n+s);return{consumed:1+n+s,result:_(t.slice(e+1+n,e+1+n+s))}}if(t[e]>=128){const n=t[e]-128;r(e+1+n);return{consumed:1+n,result:_(t.slice(e+1,e+1+n))}}return{consumed:1,result:jt(t[e])}}function zt(t){const e=x(t,"data"),r=Ht(e,0);return E(r.consumed===e.length,"unexpected junk after rlp payload","data",t),r.result}function qt(t){const e=[];for(;t;)e.unshift(255&t),t>>=8;return e}function Jt(t){if(Array.isArray(t)){let e=[];if(t.forEach((function(t){e=e.concat(Jt(t))})),e.length<=55)return e.unshift(192+e.length),e;const r=qt(e.length);return r.unshift(247+r.length),r.concat(e)}const e=Array.prototype.slice.call(x(t,"object"));if(1===e.length&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=qt(e.length);return r.unshift(183+r.length),r.concat(e)}const Wt="0123456789abcdef";function Yt(t){let e="0x";for(const r of Jt(t))e+=Wt[r>>4],e+=Wt[15&r];return e}const Xt=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Zt(t,e){let r=18;if("string"==typeof e){const t=Xt.indexOf(e);E(t>=0,"invalid unit","unit",e),r=3*t}else null!=e&&(r=X(e,"unit"));return Mt.fromValue(t,r,{decimals:r,width:512}).toString()}function Qt(t,e){E("string"==typeof t,"value must be a string","value",t);let r=18;if("string"==typeof e){const t=Xt.indexOf(e);E(t>=0,"invalid unit","unit",e),r=3*t}else null!=e&&(r=X(e,"unit"));return Mt.fromString(t,{decimals:r,width:512}).value}function te(t){return Zt(t,18)}function ee(t){return Qt(t,18)}function re(t){const e=x(t,"randomBytes");e[6]=15&e[6]|64,e[8]=63&e[8]|128;const r=_(e);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const ne=32,se=new Uint8Array(ne),ie=["then"],ae={},oe=new WeakMap;function ce(t){return oe.get(t)}function le(t,e){oe.set(t,e)}function ue(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw r.error=e,r}function he(t,e,r){return t.indexOf(null)>=0?e.map(((t,e)=>t instanceof de?he(ce(t),t,r):t)):t.reduce(((t,n,s)=>{let i=e.getValue(n);return n in t||(r&&i instanceof de&&(i=he(ce(i),i,r)),t[n]=i),t}),{})}class de extends Array{#C;constructor(...t){const e=t[0];let r=t[1],n=(t[2]||[]).slice(),s=!0;e!==ae&&(r=t,n=[],s=!1),super(r.length),r.forEach(((t,e)=>{this[e]=t}));const i=n.reduce(((t,e)=>("string"==typeof e&&t.set(e,(t.get(e)||0)+1),t)),new Map);if(le(this,Object.freeze(r.map(((t,e)=>{const r=n[e];return null!=r&&1===i.get(r)?r:null})))),this.#C=[],null==this.#C&&this.#C,!s)return;Object.freeze(this);const a=new Proxy(this,{get:(t,e,r)=>{if("string"==typeof e){if(e.match(/^[0-9]+$/)){const r=X(e,"%index");if(r<0||r>=this.length)throw new RangeError("out of result range");const n=t[r];return n instanceof Error&&ue(`index ${r}`,n),n}if(ie.indexOf(e)>=0)return Reflect.get(t,e,r);const n=t[e];if(n instanceof Function)return function(...e){return n.apply(this===r?t:this,e)};if(!(e in t))return t.getValue.apply(this===r?t:this,[e])}return Reflect.get(t,e,r)}});return le(a,ce(this)),a}toArray(t){const e=[];return this.forEach(((r,n)=>{r instanceof Error&&ue(`index ${n}`,r),t&&r instanceof de&&(r=r.toArray(t)),e.push(r)})),e}toObject(t){const e=ce(this);return e.reduce(((r,n,s)=>(k(null!=n,`value at index ${s} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),he(e,this,t))),{})}slice(t,e){null==t&&(t=0),t<0&&(t+=this.length)<0&&(t=0),null==e&&(e=this.length),e<0&&(e+=this.length)<0&&(e=0),e>this.length&&(e=this.length);const r=ce(this),n=[],s=[];for(let i=t;i<e;i++)n.push(this[i]),s.push(r[i]);return new de(ae,n,s)}filter(t,e){const r=ce(this),n=[],s=[];for(let i=0;i<this.length;i++){const a=this[i];a instanceof Error&&ue(`index ${i}`,a),t.call(e,a,i,this)&&(n.push(a),s.push(r[i]))}return new de(ae,n,s)}map(t,e){const r=[];for(let n=0;n<this.length;n++){const s=this[n];s instanceof Error&&ue(`index ${n}`,s),r.push(t.call(e,s,n,this))}return r}getValue(t){const e=ce(this).indexOf(t);if(-1===e)return;const r=this[e];return r instanceof Error&&ue(`property ${JSON.stringify(t)}`,r.error),r}static fromItems(t,e){return new de(ae,t,e)}}function fe(t){const e=[],r=function(t,n){if(Array.isArray(n))for(let s in n){const i=t.slice();i.push(s);try{r(i,n[s])}catch(t){e.push({path:i,error:t})}}};return r([],t),e}function pe(t){let e=tt(t);return k(e.length<=ne,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:ne,offset:e.length}),e.length!==ne&&(e=A(U([se.slice(e.length%ne),e]))),e}class ge{name;type;localName;dynamic;constructor(t,e,r,n){m(this,{name:t,type:e,localName:r,dynamic:n},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){E(!1,t,this.localName,e)}}class me{#_;#U;constructor(){this.#_=[],this.#U=0}get data(){return U(this.#_)}get length(){return this.#U}#F(t){return this.#_.push(t),this.#U+=t.length,t.length}appendWriter(t){return this.#F(A(t.data))}writeBytes(t){let e=A(t);const r=e.length%ne;return r&&(e=A(U([e,se.slice(r)]))),this.#F(e)}writeValue(t){return this.#F(pe(t))}writeUpdatableValue(){const t=this.#_.length;return this.#_.push(se),this.#U+=ne,e=>{this.#_[t]=pe(e)}}}class ye{allowLoose;#_;#L;#B;#D;#G;constructor(t,e,r){m(this,{allowLoose:!!e}),this.#_=A(t),this.#B=0,this.#D=null,this.#G=null!=r?r:1024,this.#L=0}get data(){return _(this.#_)}get dataLength(){return this.#_.length}get consumed(){return this.#L}get bytes(){return new Uint8Array(this.#_)}#$(t){if(this.#D)return this.#D.#$(t);this.#B+=t,k(this.#G<1||this.#B<=this.#G*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#G} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:A(this.#_),offset:this.#L,length:t,info:{bytesRead:this.#B,dataLength:this.dataLength}})}#M(t,e,r){let n=Math.ceil(e/ne)*ne;return this.#L+n>this.#_.length&&(this.allowLoose&&r&&this.#L+e<=this.#_.length?n=e:k(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:A(this.#_),length:this.#_.length,offset:this.#L+n})),this.#_.slice(this.#L,this.#L+n)}subReader(t){const e=new ye(this.#_.slice(this.#L+t),this.allowLoose,this.#G);return e.#D=this,e}readBytes(t,e){let r=this.#M(0,t,!!e);return this.#$(t),this.#L+=r.length,r.slice(0,t)}readValue(){return Y(this.readBytes(ne))}readIndex(){return Z(this.readBytes(ne))}}var be="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};const we=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==be)return be;throw new Error("unable to locate global object")}(),ve=we.crypto||we.msCrypto;function ke(t){switch(t){case"sha256":return r.create();case"sha512":return n.create()}E(!1,"invalid hashing algorithm name","algorithm",t)}let Ee=!1;const Ne=function(e,s,i){return function(e,s){const i={sha256:r,sha512:n}[e];return E(null!=i,"invalid hmac algorithm","algorithm",e),t.create(i,s)}(e,s).update(i).digest()};let Pe=Ne;function Re(t,e,r){const n=x(e,"key"),s=x(r,"data");return _(Pe(t,n,s))}Re._=Ne,Re.lock=function(){Ee=!0},Re.register=function(t){if(Ee)throw new Error("computeHmac is locked");Pe=t},Object.freeze(Re);let Te=!1;const Oe=function(t){return s(t)};let xe=Oe;function Ae(t){const e=x(t,"data");return _(xe(e))}Ae._=Oe,Ae.lock=function(){Te=!0},Ae.register=function(t){if(Te)throw new TypeError("keccak256 is locked");xe=t},Object.freeze(Ae);let Ie=!1;const Se=function(t){return i(t)};let Ce=Se;function _e(t){const e=x(t,"data");return _(Ce(e))}_e._=Se,_e.lock=function(){Ie=!0},_e.register=function(t){if(Ie)throw new TypeError("ripemd160 is locked");Ce=t},Object.freeze(_e);let Ue=!1;const Fe=function(t,s,i,a,o){return function(t,s,i,a,o){const c={sha256:r,sha512:n}[o];return E(null!=c,"invalid pbkdf2 algorithm","algorithm",o),e(c,t,s,{c:i,dkLen:a})}(t,s,i,a,o)};let Le=Fe;function Be(t,e,r,n,s){const i=x(t,"password"),a=x(e,"salt");return _(Le(i,a,r,n,s))}Be._=Fe,Be.lock=function(){Ue=!0},Be.register=function(t){if(Ue)throw new Error("pbkdf2 is locked");Le=t},Object.freeze(Be);let De=!1;const Ge=function(t){return new Uint8Array(function(t){k(null!=ve,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),E(Number.isInteger(t)&&t>0&&t<=1024,"invalid length","length",t);const e=new Uint8Array(t);return ve.getRandomValues(e),e}(t))};let $e=Ge;function Me(t){return $e(t)}Me._=Ge,Me.lock=function(){De=!0},Me.register=function(t){if(De)throw new Error("randomBytes is locked");$e=t},Object.freeze(Me);let je=!1,Ve=!1;const Ke=async function(t,e,r,n,s,i,o){return await a(t,e,{N:r,r:n,p:s,dkLen:i,onProgress:o})},He=function(t,e,r,n,s,i){return o(t,e,{N:r,r:n,p:s,dkLen:i})};let ze=Ke,qe=He;async function Je(t,e,r,n,s,i,a){const o=x(t,"passwd"),c=x(e,"salt");return _(await ze(o,c,r,n,s,i,a))}function We(t,e,r,n,s,i){const a=x(t,"passwd"),o=x(e,"salt");return _(qe(a,o,r,n,s,i))}Je._=Ke,Je.lock=function(){Ve=!0},Je.register=function(t){if(Ve)throw new Error("scrypt is locked");ze=t},Object.freeze(Je),We._=He,We.lock=function(){je=!0},We.register=function(t){if(je)throw new Error("scryptSync is locked");qe=t},Object.freeze(We);const Ye=function(t){return ke("sha256").update(t).digest()},Xe=function(t){return ke("sha512").update(t).digest()};let Ze=Ye,Qe=Xe,tr=!1,er=!1;function rr(t){const e=x(t,"data");return _(Ze(e))}function nr(t){const e=x(t,"data");return _(Qe(e))}rr._=Ye,rr.lock=function(){tr=!0},rr.register=function(t){if(tr)throw new Error("sha256 is locked");Ze=t},Object.freeze(rr),nr._=Xe,nr.lock=function(){er=!0},nr.register=function(t){if(er)throw new Error("sha512 is locked");Qe=t},Object.freeze(rr);const sr="0x0000000000000000000000000000000000000000",ir="0x0000000000000000000000000000000000000000000000000000000000000000",ar=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),or=BigInt("1000000000000000000"),cr=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),lr=BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1),ur=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),hr="Ξ",dr="Ethereum Signed Message:\n",fr=BigInt(0),pr=BigInt(1),gr=BigInt(2),mr=BigInt(27),yr=BigInt(28),br=BigInt(35),wr={};function vr(t){return G(tt(t),32)}class kr{#j;#V;#K;#H;get r(){return this.#j}set r(t){E(32===F(t),"invalid r","value",t),this.#j=_(t)}get s(){return this.#V}set s(t){E(32===F(t),"invalid s","value",t);const e=_(t);E(parseInt(e.substring(0,3))<8,"non-canonical s","value",e),this.#V=e}get v(){return this.#K}set v(t){const e=X(t,"value");E(27===e||28===e,"invalid v","v",t),this.#K=e}get networkV(){return this.#H}get legacyChainId(){const t=this.networkV;return null==t?null:kr.getChainId(t)}get yParity(){return 27===this.v?0:1}get yParityAndS(){const t=x(this.s);return this.yParity&&(t[0]|=128),_(t)}get compactSerialized(){return U([this.r,this.yParityAndS])}get serialized(){return U([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(t,e,r,n){T(t,wr,"Signature"),this.#j=e,this.#V=r,this.#K=n,this.#H=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new kr(wr,this.r,this.s,this.v);return this.networkV&&(t.#H=this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:null!=t?t.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(t){const e=q(t,"v");return e==mr||e==yr?fr:(E(e>=br,"invalid EIP-155 v","v",t),(e-br)/gr)}static getChainIdV(t,e){return q(t)*gr+BigInt(35+e-27)}static getNormalizedV(t){const e=q(t);return e===fr||e===mr?27:e===pr||e===yr?28:(E(e>=br,"invalid v","v",t),e&pr?27:28)}static from(t){function e(e,r){E(e,r,"signature",t)}if(null==t)return new kr(wr,ir,ir,27);if("string"==typeof t){const r=x(t,"signature");if(64===r.length){const t=_(r.slice(0,32)),e=r.slice(32,64),n=128&e[0]?28:27;return e[0]&=127,new kr(wr,t,_(e),n)}if(65===r.length){const t=_(r.slice(0,32)),n=r.slice(32,64);e(!(128&n[0]),"non-canonical s");const s=kr.getNormalizedV(r[64]);return new kr(wr,t,_(n),s)}e(!1,"invalid raw signature length")}if(t instanceof kr)return t.clone();const r=t.r;e(null!=r,"missing r");const n=vr(r),s=function(t,r){if(null!=t)return vr(t);if(null!=r){e(I(r,32),"invalid yParityAndS");const t=x(r);return t[0]&=127,_(t)}e(!1,"missing s")}(t.s,t.yParityAndS);e(!(128&x(s)[0]),"non-canonical s");const{networkV:i,v:a}=function(t,r,n){if(null!=t){const e=q(t);return{networkV:e>=br?e:void 0,v:kr.getNormalizedV(e)}}if(null!=r)return e(I(r,32),"invalid yParityAndS"),{v:128&x(r)[0]?28:27};if(null!=n){switch(X(n,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}e(!1,"invalid yParity")}e(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),o=new kr(wr,n,s,a);return i&&(o.#H=i),e(null==t.yParity||X(t.yParity,"sig.yParity")===o.yParity,"yParity mismatch"),e(null==t.yParityAndS||t.yParityAndS===o.yParityAndS,"yParityAndS mismatch"),o}}class Er{#z;constructor(t){E(32===F(t),"invalid private key","privateKey","[REDACTED]"),this.#z=_(t)}get privateKey(){return this.#z}get publicKey(){return Er.computePublicKey(this.#z)}get compressedPublicKey(){return Er.computePublicKey(this.#z,!0)}sign(t){E(32===F(t),"invalid digest length","digest",t);const e=c.sign(A(t),A(this.#z),{lowS:!0});return kr.from({r:Q(e.r,32),s:Q(e.s,32),v:e.recovery?28:27})}computeSharedSecret(t){const e=Er.computePublicKey(t);return _(c.getSharedSecret(A(this.#z),x(e),!1))}static computePublicKey(t,e){let r=x(t,"key");if(32===r.length){return _(c.getPublicKey(r,!!e))}if(64===r.length){const t=new Uint8Array(65);t[0]=4,t.set(r,1),r=t}return _(c.ProjectivePoint.fromHex(r).toRawBytes(e))}static recoverPublicKey(t,e){E(32===F(t),"invalid digest length","digest",t);const r=kr.from(e);let n=c.Signature.fromCompact(A(U([r.r,r.s])));n=n.addRecoveryBit(r.yParity);const s=n.recoverPublicKey(A(t));return E(null!=s,"invalid signautre for digest","signature",e),"0x"+s.toHex(!1)}static addPoints(t,e,r){const n=c.ProjectivePoint.fromHex(Er.computePublicKey(t).substring(2)),s=c.ProjectivePoint.fromHex(Er.computePublicKey(e).substring(2));return"0x"+n.add(s).toHex(!!r)}}function Nr(){Re.lock(),Ae.lock(),Be.lock(),Me.lock(),_e.lock(),Je.lock(),We.lock(),rr.lock(),nr.lock(),Me.lock()}const Pr=BigInt(0),Rr=BigInt(36);function Tr(t){const e=(t=t.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let t=0;t<40;t++)r[t]=e[t].charCodeAt(0);const n=x(Ae(r));for(let t=0;t<40;t+=2)n[t>>1]>>4>=8&&(e[t]=e[t].toUpperCase()),(15&n[t>>1])>=8&&(e[t+1]=e[t+1].toUpperCase());return"0x"+e.join("")}const Or={};for(let t=0;t<10;t++)Or[String(t)]=String(t);for(let t=0;t<26;t++)Or[String.fromCharCode(65+t)]=String(10+t);function xr(t){let e=(t=(t=t.toUpperCase()).substring(4)+t.substring(0,2)+"00").split("").map((t=>Or[t])).join("");for(;e.length>=15;){let t=e.substring(0,15);e=parseInt(t,10)%97+e.substring(t.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}const Ar=function(){const t={};for(let e=0;e<36;e++){t["0123456789abcdefghijklmnopqrstuvwxyz"[e]]=BigInt(e)}return t}();function Ir(t){if(E("string"==typeof t,"invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=Tr(t);return E(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){E(t.substring(2,4)===xr(t),"bad icap checksum","address",t);let e=function(t){t=t.toLowerCase();let e=Pr;for(let r=0;r<t.length;r++)e=e*Rr+Ar[t[r]];return e}(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return Tr("0x"+e)}E(!1,"invalid address","address",t)}function Sr(t){let e=BigInt(Ir(t)).toString(36).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+xr("XE00"+e)+e}function Cr(t){const e=Ir(t.from);let r=q(t.nonce,"tx.nonce").toString(16);return r="0"===r?"0x":r.length%2?"0x0"+r:"0x"+r,Ir(L(Ae(Yt([e,r])),12))}function _r(t,e,r){const n=Ir(t),s=x(e,"salt"),i=x(r,"initCodeHash");return E(32===s.length,"salt must be 32 bytes","salt",e),E(32===i.length,"initCodeHash must be 32 bytes","initCodeHash",r),Ir(L(Ae(U(["0xff",n,s,i])),12))}function Ur(t){return t&&"function"==typeof t.getAddress}function Fr(t){try{return Ir(t),!0}catch(t){}return!1}async function Lr(t,e){const r=await e;return null!=r&&"0x0000000000000000000000000000000000000000"!==r||(k("string"!=typeof t,"unconfigured name","UNCONFIGURED_NAME",{value:t}),E(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),Ir(r)}function Br(t,e){return"string"==typeof t?t.match(/^0x[0-9a-f]{40}$/i)?Ir(t):(k(null!=e,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Lr(t,e.resolveName(t))):Ur(t)?Lr(t,t.getAddress()):t&&"function"==typeof t.then?Lr(t,t):void E(!1,"unsupported addressable value","target",t)}const Dr={};function Gr(t,e){let r=!1;return e<0&&(r=!0,e*=-1),new jr(Dr,`${r?"":"u"}int${e}`,t,{signed:r,width:e})}function $r(t,e){return new jr(Dr,`bytes${e||""}`,t,{size:e})}const Mr=Symbol.for("_ethers_typed");class jr{type;value;#q;_typedSymbol;constructor(t,e,r,n){null==n&&(n=null),T(Dr,t,"Typed"),m(this,{_typedSymbol:Mr,type:e,value:r}),this.#q=n,this.format()}format(){if("array"===this.type)throw new Error("");if("dynamicArray"===this.type)throw new Error("");return"tuple"===this.type?`tuple(${this.value.map((t=>t.format())).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#q}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#q?-1:!1===this.#q?this.value.length:null}static from(t,e){return new jr(Dr,t,e)}static uint8(t){return Gr(t,8)}static uint16(t){return Gr(t,16)}static uint24(t){return Gr(t,24)}static uint32(t){return Gr(t,32)}static uint40(t){return Gr(t,40)}static uint48(t){return Gr(t,48)}static uint56(t){return Gr(t,56)}static uint64(t){return Gr(t,64)}static uint72(t){return Gr(t,72)}static uint80(t){return Gr(t,80)}static uint88(t){return Gr(t,88)}static uint96(t){return Gr(t,96)}static uint104(t){return Gr(t,104)}static uint112(t){return Gr(t,112)}static uint120(t){return Gr(t,120)}static uint128(t){return Gr(t,128)}static uint136(t){return Gr(t,136)}static uint144(t){return Gr(t,144)}static uint152(t){return Gr(t,152)}static uint160(t){return Gr(t,160)}static uint168(t){return Gr(t,168)}static uint176(t){return Gr(t,176)}static uint184(t){return Gr(t,184)}static uint192(t){return Gr(t,192)}static uint200(t){return Gr(t,200)}static uint208(t){return Gr(t,208)}static uint216(t){return Gr(t,216)}static uint224(t){return Gr(t,224)}static uint232(t){return Gr(t,232)}static uint240(t){return Gr(t,240)}static uint248(t){return Gr(t,248)}static uint256(t){return Gr(t,256)}static uint(t){return Gr(t,256)}static int8(t){return Gr(t,-8)}static int16(t){return Gr(t,-16)}static int24(t){return Gr(t,-24)}static int32(t){return Gr(t,-32)}static int40(t){return Gr(t,-40)}static int48(t){return Gr(t,-48)}static int56(t){return Gr(t,-56)}static int64(t){return Gr(t,-64)}static int72(t){return Gr(t,-72)}static int80(t){return Gr(t,-80)}static int88(t){return Gr(t,-88)}static int96(t){return Gr(t,-96)}static int104(t){return Gr(t,-104)}static int112(t){return Gr(t,-112)}static int120(t){return Gr(t,-120)}static int128(t){return Gr(t,-128)}static int136(t){return Gr(t,-136)}static int144(t){return Gr(t,-144)}static int152(t){return Gr(t,-152)}static int160(t){return Gr(t,-160)}static int168(t){return Gr(t,-168)}static int176(t){return Gr(t,-176)}static int184(t){return Gr(t,-184)}static int192(t){return Gr(t,-192)}static int200(t){return Gr(t,-200)}static int208(t){return Gr(t,-208)}static int216(t){return Gr(t,-216)}static int224(t){return Gr(t,-224)}static int232(t){return Gr(t,-232)}static int240(t){return Gr(t,-240)}static int248(t){return Gr(t,-248)}static int256(t){return Gr(t,-256)}static int(t){return Gr(t,-256)}static bytes1(t){return $r(t,1)}static bytes2(t){return $r(t,2)}static bytes3(t){return $r(t,3)}static bytes4(t){return $r(t,4)}static bytes5(t){return $r(t,5)}static bytes6(t){return $r(t,6)}static bytes7(t){return $r(t,7)}static bytes8(t){return $r(t,8)}static bytes9(t){return $r(t,9)}static bytes10(t){return $r(t,10)}static bytes11(t){return $r(t,11)}static bytes12(t){return $r(t,12)}static bytes13(t){return $r(t,13)}static bytes14(t){return $r(t,14)}static bytes15(t){return $r(t,15)}static bytes16(t){return $r(t,16)}static bytes17(t){return $r(t,17)}static bytes18(t){return $r(t,18)}static bytes19(t){return $r(t,19)}static bytes20(t){return $r(t,20)}static bytes21(t){return $r(t,21)}static bytes22(t){return $r(t,22)}static bytes23(t){return $r(t,23)}static bytes24(t){return $r(t,24)}static bytes25(t){return $r(t,25)}static bytes26(t){return $r(t,26)}static bytes27(t){return $r(t,27)}static bytes28(t){return $r(t,28)}static bytes29(t){return $r(t,29)}static bytes30(t){return $r(t,30)}static bytes31(t){return $r(t,31)}static bytes32(t){return $r(t,32)}static address(t){return new jr(Dr,"address",t)}static bool(t){return new jr(Dr,"bool",!!t)}static bytes(t){return new jr(Dr,"bytes",t)}static string(t){return new jr(Dr,"string",t)}static array(t,e){throw new Error("not implemented yet")}static tuple(t,e){throw new Error("not implemented yet")}static overrides(t){return new jr(Dr,"overrides",Object.assign({},t))}static isTyped(t){return t&&"object"==typeof t&&"_typedSymbol"in t&&t._typedSymbol===Mr}static dereference(t,e){if(jr.isTyped(t)){if(t.type!==e)throw new Error(`invalid type: expecetd ${e}, got ${t.type}`);return t.value}return t}}class Vr extends ge{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let r=jr.dereference(e,"string");try{r=Ir(r)}catch(t){return this._throwError(t.message,e)}return t.writeValue(r)}decode(t){return Ir(Q(t.readValue(),20))}}class Kr extends ge{coder;constructor(t){super(t.name,t.type,"_",t.dynamic),this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,e){return this.coder.encode(t,e)}decode(t){return this.coder.decode(t)}}function Hr(t,e,r){let n=[];if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let t={};n=e.map((e=>{const n=e.localName;return k(n,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:e},value:r}),k(!t[n],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:e},value:r}),t[n]=!0,r[n]}))}else E(!1,"invalid tuple value","tuple",r);E(e.length===n.length,"types/value length mismatch","tuple",r);let s=new me,i=new me,a=[];e.forEach(((t,e)=>{let r=n[e];if(t.dynamic){let e=i.length;t.encode(i,r);let n=s.writeUpdatableValue();a.push((t=>{n(t+e)}))}else t.encode(s,r)})),a.forEach((t=>{t(s.length)}));let o=t.appendWriter(s);return o+=t.appendWriter(i),o}function zr(t,e){let r=[],n=[],s=t.subReader(0);return e.forEach((e=>{let i=null;if(e.dynamic){let r=t.readIndex(),n=s.subReader(r);try{i=e.decode(n)}catch(t){if(b(t,"BUFFER_OVERRUN"))throw t;i=t,i.baseType=e.name,i.name=e.localName,i.type=e.type}}else try{i=e.decode(t)}catch(t){if(b(t,"BUFFER_OVERRUN"))throw t;i=t,i.baseType=e.name,i.name=e.localName,i.type=e.type}if(null==i)throw new Error("investigate");r.push(i),n.push(e.localName||null)})),de.fromItems(r,n)}class qr extends ge{coder;length;constructor(t,e,r){super("array",t.type+"["+(e>=0?e:"")+"]",r,-1===e||t.dynamic),m(this,{coder:t,length:e})}defaultValue(){const t=this.coder.defaultValue(),e=[];for(let r=0;r<this.length;r++)e.push(t);return e}encode(t,e){const r=jr.dereference(e,"array");Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;-1===n&&(n=r.length,t.writeValue(r.length)),N(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let s=[];for(let t=0;t<r.length;t++)s.push(this.coder);return Hr(t,s,r)}decode(t){let e=this.length;-1===e&&(e=t.readIndex(),k(e*ne<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:e*ne,length:t.dataLength}));let r=[];for(let t=0;t<e;t++)r.push(new Kr(this.coder));return zr(t,r)}}class Jr extends ge{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){const r=jr.dereference(e,"bool");return t.writeValue(r?1:0)}decode(t){return!!t.readValue()}}class Wr extends ge{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=A(e);let r=t.writeValue(e.length);return r+=t.writeBytes(e),r}decode(t){return t.readBytes(t.readIndex(),!0)}}class Yr extends Wr{constructor(t){super("bytes",t)}decode(t){return _(super.decode(t))}}class Xr extends ge{size;constructor(t,e){let r="bytes"+String(t);super(r,r,e,!1),m(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(t,e){let r=A(jr.dereference(e,this.type));return r.length!==this.size&&this._throwError("incorrect data length",e),t.writeBytes(r)}decode(t){return _(t.readBytes(this.size))}}const Zr=new Uint8Array([]);class Qr extends ge{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return null!=e&&this._throwError("not null",e),t.writeBytes(Zr)}decode(t){return t.readBytes(0),null}}const tn=BigInt(0),en=BigInt(1),rn=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class nn extends ge{size;signed;constructor(t,e,r){const n=(e?"int":"uint")+8*t;super(n,n,r,!1),m(this,{size:t,signed:e},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,e){let r=q(jr.dereference(e,this.type)),n=z(rn,256);if(this.signed){let t=z(n,8*this.size-1);(r>t||r<-(t+en))&&this._throwError("value out-of-bounds",e),r=H(r,256)}else(r<tn||r>z(n,8*this.size))&&this._throwError("value out-of-bounds",e);return t.writeValue(r)}decode(t){let e=z(t.readValue(),8*this.size);return this.signed&&(e=K(e,8*this.size)),e}}class sn extends Wr{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,gt(jr.dereference(e,"string")))}decode(t){return mt(super.decode(t))}}class an extends ge{coders;constructor(t,e){let r=!1;const n=[];t.forEach((t=>{t.dynamic&&(r=!0),n.push(t.type)}));super("tuple","tuple("+n.join(",")+")",e,r),m(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach((e=>{t.push(e.defaultValue())}));const e=this.coders.reduce(((t,e)=>{const r=e.localName;return r&&(t[r]||(t[r]=0),t[r]++),t}),{});return this.coders.forEach(((r,n)=>{let s=r.localName;s&&1===e[s]&&("length"===s&&(s="_length"),null==t[s]&&(t[s]=t[n]))})),Object.freeze(t)}encode(t,e){const r=jr.dereference(e,"tuple");return Hr(t,this.coders,r)}decode(t){return zr(t,this.coders)}}function on(t){return Ae(gt(t))}const cn=new Uint8Array(32);function ln(t){return E(0!==t.length,"invalid ENS name; empty component","comp",t),t}function un(t){const e=gt(hn(t)),r=[];if(0===t.length)return r;let n=0;for(let t=0;t<e.length;t++){46===e[t]&&(r.push(ln(e.slice(n,t))),n=t+1)}return E(n<e.length,"invalid ENS name; empty component","name",t),r.push(ln(e.slice(n))),r}function hn(t){try{if(0===t.length)throw new Error("empty label");return l(t)}catch(e){E(!1,`invalid ENS name (${e.message})`,"name",t)}}function dn(t){try{return 0!==un(t).length}catch(t){}return!1}function fn(t){E("string"==typeof t,"invalid ENS name; not a string","name",t),E(t.length,"invalid ENS name (empty label)","name",t);let e=cn;const r=un(t);for(;r.length;)e=Ae(U([e,Ae(r.pop())]));return _(e)}function pn(t,e){const r=null!=e?e:63;return E(r<=255,"DNS encoded label cannot exceed 255","length",r),_(U(un(t).map((e=>{E(e.length<=r,`label ${JSON.stringify(t)} exceeds ${r} bytes`,"name",t);const n=new Uint8Array(e.length+1);return n.set(e,1),n[0]=n.length-1,n}))))+"00"}function gn(t,e){return{address:Ir(t),storageKeys:e.map(((t,e)=>(E(I(t,32),"invalid slot",`storageKeys[${e}]`,t),t.toLowerCase())))}}function mn(t){if(Array.isArray(t))return t.map(((e,r)=>Array.isArray(e)?(E(2===e.length,"invalid slot set",`value[${r}]`,e),gn(e[0],e[1])):(E(null!=e&&"object"==typeof e,"invalid address-slot set","value",t),gn(e.address,e.storageKeys))));E(null!=t&&"object"==typeof t,"invalid access list","value",t);const e=Object.keys(t).map((e=>{const r=t[e].reduce(((t,e)=>(t[e]=!0,t)),{});return gn(e,Object.keys(r).sort())}));return e.sort(((t,e)=>t.address.localeCompare(e.address))),e}function yn(t){let e;return e="string"==typeof t?Er.computePublicKey(t,!1):t.publicKey,Ir(Ae("0x"+e.substring(4)).substring(26))}function bn(t,e){return yn(Er.recoverPublicKey(t,e))}cn.fill(0);const wn=BigInt(0),vn=BigInt(2),kn=BigInt(27),En=BigInt(28),Nn=BigInt(35),Pn=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Rn=131072;function Tn(t,e){let r=t.toString(16);for(;r.length<2;)r="0"+r;return r+=rr(e).substring(4),"0x"+r}function On(t){return"0x"===t?null:Ir(t)}function xn(t,e){try{return mn(t)}catch(r){E(!1,r.message,e,t)}}function An(t,e){return"0x"===t?0:X(t,e)}function In(t,e){if("0x"===t)return wn;const r=q(t,e);return E(r<=Pn,"value exceeds uint size",e,r),r}function Sn(t,e){const r=q(t,"value"),n=tt(r);return E(n.length<=32,"value too large",`tx.${e}`,r),n}function Cn(t){return mn(t).map((t=>[t.address,t.storageKeys]))}function _n(t,e){E(Array.isArray(t),`invalid ${e}`,"value",t);for(let e=0;e<t.length;e++)E(I(t[e],32),"invalid ${ param } hash",`value[${e}]`,t[e]);return t}function Un(t,e){let r;try{if(r=An(e[0],"yParity"),0!==r&&1!==r)throw new Error("bad yParity")}catch(t){E(!1,"invalid yParity","yParity",e[0])}const n=G(e[1],32),s=G(e[2],32),i=kr.from({r:n,s:s,yParity:r});t.signature=i}class Fn{#J;#W;#_;#Y;#X;#Z;#Q;#tt;#et;#rt;#nt;#st;#it;#at;#ot;#ct;get type(){return this.#J}set type(t){switch(t){case null:this.#J=null;break;case 0:case"legacy":this.#J=0;break;case 1:case"berlin":case"eip-2930":this.#J=1;break;case 2:case"london":case"eip-1559":this.#J=2;break;case 3:case"cancun":case"eip-4844":this.#J=3;break;default:E(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const t=this.#W;return null==t&&3===this.type?sr:t}set to(t){this.#W=null==t?null:Ir(t)}get nonce(){return this.#Y}set nonce(t){this.#Y=X(t,"value")}get gasLimit(){return this.#X}set gasLimit(t){this.#X=q(t)}get gasPrice(){const t=this.#Z;return null!=t||0!==this.type&&1!==this.type?t:wn}set gasPrice(t){this.#Z=null==t?null:q(t,"gasPrice")}get maxPriorityFeePerGas(){const t=this.#Q;return null==t?2===this.type||3===this.type?wn:null:t}set maxPriorityFeePerGas(t){this.#Q=null==t?null:q(t,"maxPriorityFeePerGas")}get maxFeePerGas(){const t=this.#tt;return null==t?2===this.type||3===this.type?wn:null:t}set maxFeePerGas(t){this.#tt=null==t?null:q(t,"maxFeePerGas")}get data(){return this.#_}set data(t){this.#_=_(t)}get value(){return this.#et}set value(t){this.#et=q(t,"value")}get chainId(){return this.#rt}set chainId(t){this.#rt=q(t)}get signature(){return this.#nt||null}set signature(t){this.#nt=null==t?null:kr.from(t)}get accessList(){const t=this.#st||null;return null==t?1===this.type||2===this.type||3===this.type?[]:null:t}set accessList(t){this.#st=null==t?null:mn(t)}get maxFeePerBlobGas(){const t=this.#it;return null==t&&3===this.type?wn:t}set maxFeePerBlobGas(t){this.#it=null==t?null:q(t,"maxFeePerBlobGas")}get blobVersionedHashes(){let t=this.#at;return null==t&&3===this.type?[]:t}set blobVersionedHashes(t){if(null!=t){E(Array.isArray(t),"blobVersionedHashes must be an Array","value",t),t=t.slice();for(let e=0;e<t.length;e++)E(I(t[e],32),"invalid blobVersionedHash",`value[${e}]`,t[e])}this.#at=t}get blobs(){return null==this.#ct?null:this.#ct.map((t=>Object.assign({},t)))}set blobs(t){if(null==t)return void(this.#ct=null);const e=[],r=[];for(let n=0;n<t.length;n++){const s=t[n];if(S(s)){k(this.#ot,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let t=x(s);if(E(t.length<=Rn,"blob is too large",`blobs[${n}]`,s),t.length!==Rn){const e=new Uint8Array(Rn);e.set(t),t=e}const i=this.#ot.blobToKzgCommitment(t),a=_(this.#ot.computeBlobKzgProof(t,i));e.push({data:_(t),commitment:_(i),proof:a}),r.push(Tn(1,i))}else{const t=_(s.commitment);e.push({data:_(s.data),commitment:t,proof:_(s.proof)}),r.push(Tn(1,t))}}this.#ct=e,this.#at=r}get kzg(){return this.#ot}set kzg(t){this.#ot=t}constructor(){this.#J=null,this.#W=null,this.#Y=0,this.#X=wn,this.#Z=null,this.#Q=null,this.#tt=null,this.#_="0x",this.#et=wn,this.#rt=wn,this.#nt=null,this.#st=null,this.#it=null,this.#at=null,this.#ct=null,this.#ot=null}get hash(){return null==this.signature?null:Ae(this.#lt(!0,!1))}get unsignedHash(){return Ae(this.unsignedSerialized)}get from(){return null==this.signature?null:bn(this.unsignedHash,this.signature)}get fromPublicKey(){return null==this.signature?null:Er.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}#lt(t,e){k(!t||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=t?this.signature:null;switch(this.inferType()){case 0:return function(t,e){const r=[Sn(t.nonce,"nonce"),Sn(t.gasPrice||0,"gasPrice"),Sn(t.gasLimit,"gasLimit"),t.to||"0x",Sn(t.value,"value"),t.data];let n=wn;if(t.chainId!=wn)n=q(t.chainId,"tx.chainId"),E(!e||null==e.networkV||e.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const e=t.signature.legacyChainId;null!=e&&(n=e)}if(!e)return n!==wn&&(r.push(tt(n)),r.push("0x"),r.push("0x")),Yt(r);let s=BigInt(27+e.yParity);return n!==wn?s=kr.getChainIdV(n,e.v):BigInt(e.v)!==s&&E(!1,"tx.chainId/sig.v mismatch","sig",e),r.push(tt(s)),r.push(tt(e.r)),r.push(tt(e.s)),Yt(r)}(this,r);case 1:return function(t,e){const r=[Sn(t.chainId,"chainId"),Sn(t.nonce,"nonce"),Sn(t.gasPrice||0,"gasPrice"),Sn(t.gasLimit,"gasLimit"),t.to||"0x",Sn(t.value,"value"),t.data,Cn(t.accessList||[])];return e&&(r.push(Sn(e.yParity,"recoveryParam")),r.push(tt(e.r)),r.push(tt(e.s))),U(["0x01",Yt(r)])}(this,r);case 2:return function(t,e){const r=[Sn(t.chainId,"chainId"),Sn(t.nonce,"nonce"),Sn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Sn(t.maxFeePerGas||0,"maxFeePerGas"),Sn(t.gasLimit,"gasLimit"),t.to||"0x",Sn(t.value,"value"),t.data,Cn(t.accessList||[])];return e&&(r.push(Sn(e.yParity,"yParity")),r.push(tt(e.r)),r.push(tt(e.s))),U(["0x02",Yt(r)])}(this,r);case 3:return function(t,e,r){const n=[Sn(t.chainId,"chainId"),Sn(t.nonce,"nonce"),Sn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Sn(t.maxFeePerGas||0,"maxFeePerGas"),Sn(t.gasLimit,"gasLimit"),t.to||sr,Sn(t.value,"value"),t.data,Cn(t.accessList||[]),Sn(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),_n(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(n.push(Sn(e.yParity,"yParity")),n.push(tt(e.r)),n.push(tt(e.s)),r)?U(["0x03",Yt([n,r.map((t=>t.data)),r.map((t=>t.commitment)),r.map((t=>t.proof))])]):U(["0x03",Yt(n)])}(this,r,e?this.blobs:null)}k(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#lt(!0,!0)}get unsignedSerialized(){return this.#lt(!1,!1)}inferType(){const t=this.inferTypes();return t.indexOf(2)>=0?2:t.pop()}inferTypes(){const t=null!=this.gasPrice,e=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,r=null!=this.accessList,n=null!=this.#it||this.#at;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&k(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),k(!e||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),k(0!==this.type||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return null!=this.type?s.push(this.type):e?s.push(2):t?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(n&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return Fn.from(this)}toJSON(){const t=t=>null==t?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(null==t)return new Fn;if("string"==typeof t){const e=x(t);if(e[0]>=127)return Fn.from(function(t){const e=zt(t);E(Array.isArray(e)&&(9===e.length||6===e.length),"invalid field count for legacy transaction","data",t);const r={type:0,nonce:An(e[0],"nonce"),gasPrice:In(e[1],"gasPrice"),gasLimit:In(e[2],"gasLimit"),to:On(e[3]),value:In(e[4],"value"),data:_(e[5]),chainId:wn};if(6===e.length)return r;const n=In(e[6],"v"),s=In(e[7],"r"),i=In(e[8],"s");if(s===wn&&i===wn)r.chainId=n;else{let t=(n-Nn)/vn;t<wn&&(t=wn),r.chainId=t,E(t!==wn||n===kn||n===En,"non-canonical legacy v","v",e[6]),r.signature=kr.from({r:G(e[7],32),s:G(e[8],32),v:n})}return r}(e));switch(e[0]){case 1:return Fn.from(function(t){const e=zt(x(t).slice(1));E(Array.isArray(e)&&(8===e.length||11===e.length),"invalid field count for transaction type: 1","data",_(t));const r={type:1,chainId:In(e[0],"chainId"),nonce:An(e[1],"nonce"),gasPrice:In(e[2],"gasPrice"),gasLimit:In(e[3],"gasLimit"),to:On(e[4]),value:In(e[5],"value"),data:_(e[6]),accessList:xn(e[7],"accessList")};return 8===e.length||Un(r,e.slice(8)),r}(e));case 2:return Fn.from(function(t){const e=zt(x(t).slice(1));E(Array.isArray(e)&&(9===e.length||12===e.length),"invalid field count for transaction type: 2","data",_(t));const r={type:2,chainId:In(e[0],"chainId"),nonce:An(e[1],"nonce"),maxPriorityFeePerGas:In(e[2],"maxPriorityFeePerGas"),maxFeePerGas:In(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:In(e[4],"gasLimit"),to:On(e[5]),value:In(e[6],"value"),data:_(e[7]),accessList:xn(e[8],"accessList")};return 9===e.length||Un(r,e.slice(9)),r}(e));case 3:return Fn.from(function(t){let e=zt(x(t).slice(1)),r="3",n=null;if(4===e.length&&Array.isArray(e[0])){r="3 (network format)";const t=e[1],s=e[2],i=e[3];E(Array.isArray(t),"invalid network format: blobs not an array","fields[1]",t),E(Array.isArray(s),"invalid network format: commitments not an array","fields[2]",s),E(Array.isArray(i),"invalid network format: proofs not an array","fields[3]",i),E(t.length===s.length,"invalid network format: blobs/commitments length mismatch","fields",e),E(t.length===i.length,"invalid network format: blobs/proofs length mismatch","fields",e),n=[];for(let r=0;r<e[1].length;r++)n.push({data:t[r],commitment:s[r],proof:i[r]});e=e[0]}E(Array.isArray(e)&&(11===e.length||14===e.length),`invalid field count for transaction type: ${r}`,"data",_(t));const s={type:3,chainId:In(e[0],"chainId"),nonce:An(e[1],"nonce"),maxPriorityFeePerGas:In(e[2],"maxPriorityFeePerGas"),maxFeePerGas:In(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:In(e[4],"gasLimit"),to:On(e[5]),value:In(e[6],"value"),data:_(e[7]),accessList:xn(e[8],"accessList"),maxFeePerBlobGas:In(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};n&&(s.blobs=n),E(null!=s.to,`invalid address for transaction type: ${r}`,"data",t),E(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let e=0;e<s.blobVersionedHashes.length;e++)E(I(s.blobVersionedHashes[e],32),`invalid blobVersionedHash at index ${e}: must be length 32`,"data",t);return 11===e.length||Un(s,e.slice(11)),s}(e))}k(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const e=new Fn;return null!=t.type&&(e.type=t.type),null!=t.to&&(e.to=t.to),null!=t.nonce&&(e.nonce=t.nonce),null!=t.gasLimit&&(e.gasLimit=t.gasLimit),null!=t.gasPrice&&(e.gasPrice=t.gasPrice),null!=t.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas),null!=t.maxFeePerGas&&(e.maxFeePerGas=t.maxFeePerGas),null!=t.maxFeePerBlobGas&&(e.maxFeePerBlobGas=t.maxFeePerBlobGas),null!=t.data&&(e.data=t.data),null!=t.value&&(e.value=t.value),null!=t.chainId&&(e.chainId=t.chainId),null!=t.signature&&(e.signature=kr.from(t.signature)),null!=t.accessList&&(e.accessList=t.accessList),null!=t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes),null!=t.kzg&&(e.kzg=t.kzg),null!=t.blobs&&(e.blobs=t.blobs),null!=t.hash&&(E(e.isSigned(),"unsigned transaction cannot define '.hash'","tx",t),E(e.hash===t.hash,"hash mismatch","tx",t)),null!=t.from&&(E(e.isSigned(),"unsigned transaction cannot define '.from'","tx",t),E(e.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),e}}function Ln(t){return"string"==typeof t&&(t=gt(t)),Ae(U([gt(dr),gt(String(t.length)),t]))}function Bn(t,e){return bn(Ln(t),e)}const Dn=new RegExp("^bytes([0-9]+)$"),Gn=new RegExp("^(u?int)([0-9]*)$"),$n=new RegExp("^(.*)\\[([0-9]*)\\]$");function Mn(t,e,r){switch(t){case"address":return x(r?G(e,32):Ir(e));case"string":return gt(e);case"bytes":return x(e);case"bool":return e=e?"0x01":"0x00",x(r?G(e,32):e)}let n=t.match(Gn);if(n){let s="int"===n[1],i=parseInt(n[2]||"256");return E((!n[2]||n[2]===String(i))&&i%8==0&&0!==i&&i<=256,"invalid number type","type",t),r&&(i=256),s&&(e=H(e,i)),x(G(tt(e),i/8))}if(n=t.match(Dn),n){const s=parseInt(n[1]);return E(String(s)===n[1]&&0!==s&&s<=32,"invalid bytes type","type",t),E(F(e)===s,`invalid value for ${t}`,"value",e),r?x($(e,32)):e}if(n=t.match($n),n&&Array.isArray(e)){const r=n[1];E(parseInt(n[2]||String(e.length))===e.length,`invalid array length for ${t}`,"value",e);const s=[];return e.forEach((function(t){s.push(Mn(r,t,!0))})),x(U(s))}E(!1,"invalid type","type",t)}function jn(t,e){E(t.length===e.length,"wrong number of values; expected ${ types.length }","values",e);const r=[];return t.forEach((function(t,n){r.push(Mn(t,e[n]))})),_(U(r))}function Vn(t,e){return Ae(jn(t,e))}function Kn(t,e){return rr(jn(t,e))}const Hn=new Uint8Array(32);Hn.fill(0);const zn=BigInt(-1),qn=BigInt(0),Jn=BigInt(1),Wn=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const Yn=Q(Jn,32),Xn=Q(qn,32),Zn={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Qn=["name","version","chainId","verifyingContract","salt"];function ts(t){return function(e){return E("string"==typeof e,`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const es={name:ts("name"),version:ts("version"),chainId:function(t){const e=q(t,"domain.chainId");return E(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):et(e)},verifyingContract:function(t){try{return Ir(t).toLowerCase()}catch(t){}E(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=x(t,"domain.salt");return E(32===e.length,'invalid domain value "salt"',"domain.salt",t),_(e)}};function rs(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const r=""===e[1],n=parseInt(e[2]);E(n%8==0&&0!==n&&n<=256&&e[2]===String(n),"invalid numeric width","type",t);const s=z(Wn,r?n-1:n),i=r?(s+Jn)*zn:qn;return function(e){const n=q(e,"value");return E(n>=i&&n<=s,`value out-of-bounds for ${t}`,"value",n),Q(r?H(n,256):n,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return E(0!==r&&r<=32&&e[1]===String(r),"invalid bytes width","type",t),function(e){return E(x(e).length===r,`invalid length for ${t}`,"value",e),function(t){const e=x(t),r=e.length%32;return r?U([e,Hn.slice(r)]):_(e)}(e)}}}switch(t){case"address":return function(t){return G(Ir(t),32)};case"bool":return function(t){return t?Yn:Xn};case"bytes":return function(t){return Ae(t)};case"string":return function(t){return on(t)}}return null}function ns(t,e){return`${t}(${e.map((({name:t,type:e})=>e+" "+t)).join(",")})`}function ss(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}class is{primaryType;#ut;get types(){return JSON.parse(this.#ut)}#ht;#dt;constructor(t){this.#ht=new Map,this.#dt=new Map;const e=new Map,r=new Map,n=new Map,s={};Object.keys(t).forEach((i=>{s[i]=t[i].map((({name:e,type:r})=>{let{base:n,index:s}=ss(r);return"int"!==n||t.int||(n="int256"),"uint"!==n||t.uint||(n="uint256"),{name:e,type:n+(s||"")}})),e.set(i,new Set),r.set(i,[]),n.set(i,new Set)})),this.#ut=JSON.stringify(s);for(const n in s){const i=new Set;for(const a of s[n]){E(!i.has(a.name),`duplicate variable name ${JSON.stringify(a.name)} in ${JSON.stringify(n)}`,"types",t),i.add(a.name);const s=ss(a.type).base;E(s!==n,`circular type reference to ${JSON.stringify(s)}`,"types",t);rs(s)||(E(r.has(s),`unknown type ${JSON.stringify(s)}`,"types",t),r.get(s).push(n),e.get(n).add(s))}}const i=Array.from(r.keys()).filter((t=>0===r.get(t).length));E(0!==i.length,"missing primary type","types",t),E(1===i.length,`ambiguous primary types or unused types: ${i.map((t=>JSON.stringify(t))).join(", ")}`,"types",t),m(this,{primaryType:i[0]}),function s(i,a){E(!a.has(i),`circular type reference to ${JSON.stringify(i)}`,"types",t),a.add(i);for(const t of e.get(i))if(r.has(t)){s(t,a);for(const e of a)n.get(e).add(t)}a.delete(i)}(this.primaryType,new Set);for(const[t,e]of n){const r=Array.from(e);r.sort(),this.#ht.set(t,ns(t,s[t])+r.map((t=>ns(t,s[t]))).join(""))}}getEncoder(t){let e=this.#dt.get(t);return e||(e=this.#ft(t),this.#dt.set(t,e)),e}#ft(t){{const e=rs(t);if(e)return e}const e=ss(t).array;if(e){const t=e.prefix,r=this.getEncoder(t);return n=>{E(-1===e.count||e.count===n.length,`array length mismatch; expected length ${e.count}`,"value",n);let s=n.map(r);return this.#ht.has(t)&&(s=s.map(Ae)),Ae(U(s))}}const r=this.types[t];if(r){const e=on(this.#ht.get(t));return t=>{const n=r.map((({name:e,type:r})=>{const n=this.getEncoder(r)(t[e]);return this.#ht.has(r)?Ae(n):n}));return n.unshift(e),U(n)}}E(!1,`unknown type: ${t}`,"type",t)}encodeType(t){const e=this.#ht.get(t);return E(e,`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return Ae(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,r){if(rs(t))return r(t,e);const n=ss(t).array;if(n)return E(-1===n.count||n.count===e.length,`array length mismatch; expected length ${n.count}`,"value",e),e.map((t=>this._visit(n.prefix,t,r)));const s=this.types[t];if(s)return s.reduce(((t,{name:n,type:s})=>(t[n]=this._visit(s,e[n],r),t)),{});E(!1,`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new is(t)}static getPrimaryType(t){return is.from(t).primaryType}static hashStruct(t,e,r){return is.from(e).hashStruct(t,r)}static hashDomain(t){const e=[];for(const r in t){if(null==t[r])continue;const n=Zn[r];E(n,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",t),e.push({name:r,type:n})}return e.sort(((t,e)=>Qn.indexOf(t.name)-Qn.indexOf(e.name))),is.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,r){return U(["0x1901",is.hashDomain(t),is.from(e).hash(r)])}static hash(t,e,r){return Ae(is.encode(t,e,r))}static async resolveNames(t,e,r,n){t=Object.assign({},t);for(const e in t)null==t[e]&&delete t[e];const s={};t.verifyingContract&&!I(t.verifyingContract,20)&&(s[t.verifyingContract]="0x");const i=is.from(e);i.visit(r,((t,e)=>("address"!==t||I(e,20)||(s[e]="0x"),e)));for(const t in s)s[t]=await n(t);return t.verifyingContract&&s[t.verifyingContract]&&(t.verifyingContract=s[t.verifyingContract]),{domain:t,value:r=i.visit(r,((t,e)=>"address"===t&&s[e]?s[e]:e))}}static getPayload(t,e,r){is.hashDomain(t);const n={},s=[];Qn.forEach((e=>{const r=t[e];null!=r&&(n[e]=es[e](r),s.push({name:e,type:Zn[e]}))}));const i=is.from(e);e=i.types;const a=Object.assign({},e);return E(null==a.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",e),a.EIP712Domain=s,i.encode(r),{types:a,domain:n,primaryType:i.primaryType,message:i.visit(r,((t,e)=>{if(t.match(/^bytes(\d*)/))return _(x(e));if(t.match(/^u?int/))return q(e).toString();switch(t){case"address":return e.toLowerCase();case"bool":return!!e;case"string":return E("string"==typeof e,"invalid string","value",e),e}E(!1,"unsupported type","type",t)}))}}}function as(t,e,r,n){return bn(is.hash(t,e,r),n)}function os(t){const e=new Set;return t.forEach((t=>e.add(t))),Object.freeze(e)}const cs=os("external public payable override".split(" ")),ls="constant external internal payable private public pure view override",us=os(ls.split(" ")),hs="constructor error event fallback function receive struct",ds=os(hs.split(" ")),fs="calldata memory storage payable indexed",ps=os(fs.split(" ")),gs=os([hs,fs,"tuple returns",ls].join(" ").split(" ")),ms={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},ys=new RegExp("^(\\s*)"),bs=new RegExp("^([0-9]+)"),ws=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),vs=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),ks=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class Es{#L;#pt;get offset(){return this.#L}get length(){return this.#pt.length-this.#L}constructor(t){this.#L=0,this.#pt=t.slice()}clone(){return new Es(this.#pt)}reset(){this.#L=0}#gt(t=0,e=0){return new Es(this.#pt.slice(t,e).map((e=>Object.freeze(Object.assign({},e,{match:e.match-t,linkBack:e.linkBack-t,linkNext:e.linkNext-t})))))}popKeyword(t){const e=this.peek();if("KEYWORD"!==e.type||!t.has(e.text))throw new Error(`expected keyword ${e.text}`);return this.pop().text}popType(t){if(this.peek().type!==t){const e=this.peek();throw new Error(`expected ${t}; got ${e.type} ${JSON.stringify(e.text)}`)}return this.pop().text}popParen(){const t=this.peek();if("OPEN_PAREN"!==t.type)throw new Error("bad start");const e=this.#gt(this.#L+1,t.match+1);return this.#L=t.match+1,e}popParams(){const t=this.peek();if("OPEN_PAREN"!==t.type)throw new Error("bad start");const e=[];for(;this.#L<t.match-1;){const t=this.peek().linkNext;e.push(this.#gt(this.#L+1,t)),this.#L=t}return this.#L=t.match+1,e}peek(){if(this.#L>=this.#pt.length)throw new Error("out-of-bounds");return this.#pt[this.#L]}peekKeyword(t){const e=this.peekType("KEYWORD");return null!=e&&t.has(e)?e:null}peekType(t){if(0===this.length)return null;const e=this.peek();return e.type===t?e.text:null}pop(){const t=this.peek();return this.#L++,t}toString(){const t=[];for(let e=this.#L;e<this.#pt.length;e++){const r=this.#pt[e];t.push(`${r.type}:${r.text}`)}return`<TokenString ${t.join(" ")}>`}}function Ns(t){const e=[],r=e=>{const r=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${r} at ${i}: ${e}`)};let n=[],s=[],i=0;for(;i<t.length;){let a=t.substring(i),o=a.match(ys);o&&(i+=o[1].length,a=t.substring(i));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=ms[a[0]]||"";if(l){if(c.type=l,c.text=a[0],i++,"OPEN_PAREN"===l)n.push(e.length-1),s.push(e.length-1);else if("CLOSE_PAREN"==l)0===n.length&&r("no matching open bracket"),c.match=n.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if("COMMA"===l)c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if("OPEN_BRACKET"===l)c.type="BRACKET";else if("CLOSE_BRACKET"===l){let t=e.pop().text;if(e.length>0&&"NUMBER"===e[e.length-1].type){const r=e.pop().text;t=r+t,e[e.length-1].value=X(r)}if(0===e.length||"BRACKET"!==e[e.length-1].type)throw new Error("missing opening bracket");e[e.length-1].text+=t}}else if(o=a.match(ws),o){if(c.text=o[1],i+=c.text.length,gs.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(ks)){c.type="TYPE";continue}c.type="ID"}else{if(o=a.match(bs),!o)throw new Error(`unexpected token ${JSON.stringify(a[0])} at position ${i}`);c.text=o[1],c.type="NUMBER",i+=c.text.length}}return new Es(e.map((t=>Object.freeze(t))))}function Ps(t,e){let r=[];for(const n in e.keys())t.has(n)&&r.push(n);if(r.length>1)throw new Error(`conflicting types: ${r.join(", ")}`)}function Rs(t,e){if(e.peekKeyword(ds)){const r=e.pop().text;if(r!==t)throw new Error(`expected ${t}, got ${r}`)}return e.popType("ID")}function Ts(t,e){const r=new Set;for(;;){const n=t.peekType("KEYWORD");if(null==n||e&&!e.has(n))break;if(t.pop(),r.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);r.add(n)}return Object.freeze(r)}function Os(t){let e=Ts(t,us);return Ps(e,os("constant payable nonpayable".split(" "))),Ps(e,os("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function xs(t,e){return t.popParams().map((t=>js.from(t,e)))}function As(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return q(t.pop().text);throw new Error("invalid gas")}return null}function Is(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const Ss=new RegExp(/^(.*)\[([0-9]*)\]$/);function Cs(t){const e=t.match(ks);if(E(e,"invalid type","type",t),"uint"===t)return"uint256";if("int"===t)return"int256";if(e[2]){const r=parseInt(e[2]);E(0!==r&&r<=32,"invalid bytes length","type",t)}else if(e[3]){const r=parseInt(e[3]);E(0!==r&&r<=256&&r%8==0,"invalid numeric width","type",t)}return t}const _s={},Us=Symbol.for("_ethers_internal"),Fs="_ParamTypeInternal",Ls="_ErrorInternal",Bs="_EventInternal",Ds="_ConstructorInternal",Gs="_FallbackInternal",$s="_FunctionInternal",Ms="_StructInternal";class js{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(t,e,r,n,s,i,a,o){if(T(t,_s,"ParamType"),Object.defineProperty(this,Us,{value:Fs}),i&&(i=Object.freeze(i.slice())),"array"===n){if(null==a||null==o)throw new Error("")}else if(null!=a||null!=o)throw new Error("");if("tuple"===n){if(null==i)throw new Error("")}else if(null!=i)throw new Error("");m(this,{name:e,type:r,baseType:n,indexed:s,components:i,arrayLength:a,arrayChildren:o})}format(t){if(null==t&&(t="sighash"),"json"===t){const e=this.name||"";if(this.isArray()){const t=JSON.parse(this.arrayChildren.format("json"));return t.name=e,t.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(t)}const r={type:"tuple"===this.baseType?"tuple":this.type,name:e};return"boolean"==typeof this.indexed&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map((e=>JSON.parse(e.format(t))))),JSON.stringify(r)}let e="";return this.isArray()?(e+=this.arrayChildren.format(t),e+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?e+="("+this.components.map((e=>e.format(t))).join("full"===t?", ":",")+")":e+=this.type,"sighash"!==t&&(!0===this.indexed&&(e+=" indexed"),"full"===t&&this.name&&(e+=" "+this.name)),e}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(t,e){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return t.map((t=>r.arrayChildren.walk(t,e)))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const r=this;return t.map(((t,n)=>r.components[n].walk(t,e)))}return e(this.type,t)}#mt(t,e,r,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw new Error("array is wrong length");const s=this.arrayChildren,i=e.slice();return i.forEach(((e,n)=>{s.#mt(t,e,r,(t=>{i[n]=t}))})),void n(i)}if(this.isTuple()){const s=this.components;let i;if(Array.isArray(e))i=e.slice();else{if(null==e||"object"!=typeof e)throw new Error("invalid tuple value");i=s.map((t=>{if(!t.name)throw new Error("cannot use object value with unnamed components");if(!(t.name in e))throw new Error(`missing value for component ${t.name}`);return e[t.name]}))}if(i.length!==this.components.length)throw new Error("array is wrong length");return i.forEach(((e,n)=>{s[n].#mt(t,e,r,(t=>{i[n]=t}))})),void n(i)}const s=r(this.type,e);s.then?t.push(async function(){n(await s)}()):n(s)}async walkAsync(t,e){const r=[],n=[t];return this.#mt(r,t,e,(t=>{n[0]=t})),r.length&&await Promise.all(r),n[0]}static from(t,e){if(js.isParamType(t))return t;if("string"==typeof t)try{return js.from(Ns(t),e)}catch(e){E(!1,"invalid param type","obj",t)}else if(t instanceof Es){let r="",n="",s=null;Ts(t,os(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(n="tuple",s=t.popParams().map((t=>js.from(t))),r=`tuple(${s.map((t=>t.format())).join(",")})`):(r=Cs(t.popType("TYPE")),n=r);let i=null,a=null;for(;t.length&&t.peekType("BRACKET");){const e=t.pop();i=new js(_s,"",r,n,null,s,a,i),a=e.value,r+=e.text,n="array",s=null}let o=null;if(Ts(t,ps).has("indexed")){if(!e)throw new Error("");o=!0}const c=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new js(_s,c,r,n,o,s,a,i)}const r=t.name;E(!r||"string"==typeof r&&r.match(vs),"invalid name","obj.name",r);let n=t.indexed;null!=n&&(E(e,"parameter cannot be indexed","obj.indexed",t.indexed),n=!!n);let s=t.type,i=s.match(Ss);if(i){const e=parseInt(i[2]||"-1"),a=js.from({type:i[1],components:t.components});return new js(_s,r||"",s,"array",n,null,e,a)}if("tuple"===s||s.startsWith("tuple(")||s.startsWith("(")){const e=null!=t.components?t.components.map((t=>js.from(t))):null;return new js(_s,r||"",s,"tuple",n,e,null,null)}return s=Cs(t.type),new js(_s,r||"",s,s,n,null,null,null)}static isParamType(t){return t&&t[Us]===Fs}}class Vs{type;inputs;constructor(t,e,r){T(t,_s,"Fragment"),m(this,{type:e,inputs:r=Object.freeze(r.slice())})}static from(t){if("string"==typeof t){try{Vs.from(JSON.parse(t))}catch(t){}return Vs.from(Ns(t))}if(t instanceof Es){switch(t.peekKeyword(ds)){case"constructor":return Js.from(t);case"error":return zs.from(t);case"event":return qs.from(t);case"fallback":case"receive":return Ws.from(t);case"function":return Ys.from(t);case"struct":return Xs.from(t)}}else if("object"==typeof t){switch(t.type){case"constructor":return Js.from(t);case"error":return zs.from(t);case"event":return qs.from(t);case"fallback":case"receive":return Ws.from(t);case"function":return Ys.from(t);case"struct":return Xs.from(t)}k(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}E(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return Js.isFragment(t)}static isError(t){return zs.isFragment(t)}static isEvent(t){return qs.isFragment(t)}static isFunction(t){return Ys.isFragment(t)}static isStruct(t){return Xs.isFragment(t)}}class Ks extends Vs{name;constructor(t,e,r,n){super(t,e,n),E("string"==typeof r&&r.match(vs),"invalid identifier","name",r),n=Object.freeze(n.slice()),m(this,{name:r})}}function Hs(t,e){return"("+e.map((e=>e.format(t))).join("full"===t?", ":",")+")"}class zs extends Ks{constructor(t,e,r){super(t,"error",e,r),Object.defineProperty(this,Us,{value:Ls})}get selector(){return on(this.format("sighash")).substring(0,10)}format(t){if(null==t&&(t="sighash"),"json"===t)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});const e=[];return"sighash"!==t&&e.push("error"),e.push(this.name+Hs(t,this.inputs)),e.join(" ")}static from(t){if(zs.isFragment(t))return t;if("string"==typeof t)return zs.from(Ns(t));if(t instanceof Es){const e=Rs("error",t),r=xs(t);return Is(t),new zs(_s,e,r)}return new zs(_s,t.name,t.inputs?t.inputs.map(js.from):[])}static isFragment(t){return t&&t[Us]===Ls}}class qs extends Ks{anonymous;constructor(t,e,r,n){super(t,"event",e,r),Object.defineProperty(this,Us,{value:Bs}),m(this,{anonymous:n})}get topicHash(){return on(this.format("sighash"))}format(t){if(null==t&&(t="sighash"),"json"===t)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});const e=[];return"sighash"!==t&&e.push("event"),e.push(this.name+Hs(t,this.inputs)),"sighash"!==t&&this.anonymous&&e.push("anonymous"),e.join(" ")}static getTopicHash(t,e){e=(e||[]).map((t=>js.from(t)));return new qs(_s,t,e,!1).topicHash}static from(t){if(qs.isFragment(t))return t;if("string"==typeof t)try{return qs.from(Ns(t))}catch(e){E(!1,"invalid event fragment","obj",t)}else if(t instanceof Es){const e=Rs("event",t),r=xs(t,!0),n=!!Ts(t,os(["anonymous"])).has("anonymous");return Is(t),new qs(_s,e,r,n)}return new qs(_s,t.name,t.inputs?t.inputs.map((t=>js.from(t,!0))):[],!!t.anonymous)}static isFragment(t){return t&&t[Us]===Bs}}class Js extends Vs{payable;gas;constructor(t,e,r,n,s){super(t,e,r),Object.defineProperty(this,Us,{value:Ds}),m(this,{payable:n,gas:s})}format(t){if(k(null!=t&&"sighash"!==t,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===t)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});const e=[`constructor${Hs(t,this.inputs)}`];return this.payable&&e.push("payable"),null!=this.gas&&e.push(`@${this.gas.toString()}`),e.join(" ")}static from(t){if(Js.isFragment(t))return t;if("string"==typeof t)try{return Js.from(Ns(t))}catch(e){E(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof Es){Ts(t,os(["constructor"]));const e=xs(t),r=!!Ts(t,cs).has("payable"),n=As(t);return Is(t),new Js(_s,"constructor",e,r,n)}return new Js(_s,"constructor",t.inputs?t.inputs.map(js.from):[],!!t.payable,null!=t.gas?t.gas:null)}static isFragment(t){return t&&t[Us]===Ds}}class Ws extends Vs{payable;constructor(t,e,r){super(t,"fallback",e),Object.defineProperty(this,Us,{value:Gs}),m(this,{payable:r})}format(t){const e=0===this.inputs.length?"receive":"fallback";if("json"===t){const t=this.payable?"payable":"nonpayable";return JSON.stringify({type:e,stateMutability:t})}return`${e}()${this.payable?" payable":""}`}static from(t){if(Ws.isFragment(t))return t;if("string"==typeof t)try{return Ws.from(Ns(t))}catch(e){E(!1,"invalid fallback fragment","obj",t)}else if(t instanceof Es){const e=t.toString();E(t.peekKeyword(os(["fallback","receive"])),"type must be fallback or receive","obj",e);if("receive"===t.popKeyword(os(["fallback","receive"]))){const e=xs(t);return E(0===e.length,"receive cannot have arguments","obj.inputs",e),Ts(t,os(["payable"])),Is(t),new Ws(_s,[],!0)}let r=xs(t);r.length?E(1===r.length&&"bytes"===r[0].type,"invalid fallback inputs","obj.inputs",r.map((t=>t.format("minimal"))).join(", ")):r=[js.from("bytes")];const n=Os(t);if(E("nonpayable"===n||"payable"===n,"fallback cannot be constants","obj.stateMutability",n),Ts(t,os(["returns"])).has("returns")){const e=xs(t);E(1===e.length&&"bytes"===e[0].type,"invalid fallback outputs","obj.outputs",e.map((t=>t.format("minimal"))).join(", "))}return Is(t),new Ws(_s,r,"payable"===n)}if("receive"===t.type)return new Ws(_s,[],!0);if("fallback"===t.type){const e=[js.from("bytes")],r="payable"===t.stateMutability;return new Ws(_s,e,r)}E(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[Us]===Gs}}class Ys extends Ks{constant;outputs;stateMutability;payable;gas;constructor(t,e,r,n,s,i){super(t,"function",e,n),Object.defineProperty(this,Us,{value:$s});m(this,{constant:"view"===r||"pure"===r,gas:i,outputs:s=Object.freeze(s.slice()),payable:"payable"===r,stateMutability:r})}get selector(){return on(this.format("sighash")).substring(0,10)}format(t){if(null==t&&(t="sighash"),"json"===t)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t)))),outputs:this.outputs.map((e=>JSON.parse(e.format(t))))});const e=[];return"sighash"!==t&&e.push("function"),e.push(this.name+Hs(t,this.inputs)),"sighash"!==t&&("nonpayable"!==this.stateMutability&&e.push(this.stateMutability),this.outputs&&this.outputs.length&&(e.push("returns"),e.push(Hs(t,this.outputs))),null!=this.gas&&e.push(`@${this.gas.toString()}`)),e.join(" ")}static getSelector(t,e){e=(e||[]).map((t=>js.from(t)));return new Ys(_s,t,"view",e,[],null).selector}static from(t){if(Ys.isFragment(t))return t;if("string"==typeof t)try{return Ys.from(Ns(t))}catch(e){E(!1,"invalid function fragment","obj",t)}else if(t instanceof Es){const e=Rs("function",t),r=xs(t),n=Os(t);let s=[];Ts(t,os(["returns"])).has("returns")&&(s=xs(t));const i=As(t);return Is(t),new Ys(_s,e,n,r,s,i)}let e=t.stateMutability;return null==e&&(e="payable","boolean"==typeof t.constant?(e="view",t.constant||(e="payable","boolean"!=typeof t.payable||t.payable||(e="nonpayable"))):"boolean"!=typeof t.payable||t.payable||(e="nonpayable")),new Ys(_s,t.name,e,t.inputs?t.inputs.map(js.from):[],t.outputs?t.outputs.map(js.from):[],null!=t.gas?t.gas:null)}static isFragment(t){return t&&t[Us]===$s}}class Xs extends Ks{constructor(t,e,r){super(t,"struct",e,r),Object.defineProperty(this,Us,{value:Ms})}format(){throw new Error("@TODO")}static from(t){if("string"==typeof t)try{return Xs.from(Ns(t))}catch(e){E(!1,"invalid struct fragment","obj",t)}else if(t instanceof Es){const e=Rs("struct",t),r=xs(t);return Is(t),new Xs(_s,e,r)}return new Xs(_s,t.name,t.inputs?t.inputs.map(js.from):[])}static isFragment(t){return t&&t[Us]===Ms}}const Zs=new Map;Zs.set(0,"GENERIC_PANIC"),Zs.set(1,"ASSERT_FALSE"),Zs.set(17,"OVERFLOW"),Zs.set(18,"DIVIDE_BY_ZERO"),Zs.set(33,"ENUM_RANGE_ERROR"),Zs.set(34,"BAD_STORAGE_DATA"),Zs.set(49,"STACK_UNDERFLOW"),Zs.set(50,"ARRAY_RANGE_ERROR"),Zs.set(65,"OUT_OF_MEMORY"),Zs.set(81,"UNINITIALIZED_FUNCTION_CALL");const Qs=new RegExp(/^bytes([0-9]*)$/),ti=new RegExp(/^(u?int)([0-9]*)$/);let ei=null,ri=1024;class ni{#yt(t){if(t.isArray())return new qr(this.#yt(t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new an(t.components.map((t=>this.#yt(t))),t.name);switch(t.baseType){case"address":return new Vr(t.name);case"bool":return new Jr(t.name);case"string":return new sn(t.name);case"bytes":return new Yr(t.name);case"":return new Qr(t.name)}let e=t.type.match(ti);if(e){let r=parseInt(e[2]||"256");return E(0!==r&&r<=256&&r%8==0,"invalid "+e[1]+" bit length","param",t),new nn(r/8,"int"===e[1],t.name)}if(e=t.type.match(Qs),e){let r=parseInt(e[1]);return E(0!==r&&r<=32,"invalid bytes length","param",t),new Xr(r,t.name)}E(!1,"invalid type","type",t.type)}getDefaultValue(t){const e=t.map((t=>this.#yt(js.from(t))));return new an(e,"_").defaultValue()}encode(t,e){N(e.length,t.length,"types/values length mismatch");const r=t.map((t=>this.#yt(js.from(t)))),n=new an(r,"_"),s=new me;return n.encode(s,e),s.data}decode(t,e,r){const n=t.map((t=>this.#yt(js.from(t))));return new an(n,"_").decode(new ye(e,r,ri))}static _setDefaultMaxInflation(t){E("number"==typeof t&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t),ri=t}static defaultAbiCoder(){return null==ei&&(ei=new ni),ei}static getBuiltinCallException(t,e,r){return function(t,e,r,n){let s="missing revert data",i=null,a=null;if(r){s="execution reverted";const t=x(r);if(r=_(r),0===t.length)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(t.length%32!=4)s+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===_(t.slice(0,4)))try{i=n.decode(["string"],t.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch(t){s+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===_(t.slice(0,4)))try{const e=Number(n.decode(["uint256"],t.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[e]},i=`Panic due to ${Zs.get(e)||"UNKNOWN"}(${e})`,s+=`: ${i}`}catch(t){s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const o={to:e.to?Ir(e.to):null,data:e.data||"0x"};return e.from&&(o.from=Ir(e.from)),v(s,"CALL_EXCEPTION",{action:t,data:r,reason:i,transaction:o,invocation:null,revert:a})}(t,e,r,ni.defaultAbiCoder())}}function si(t){const e=gt(t);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return $(e,32)}function ii(t){const e=x(t,"bytes");if(32!==e.length)throw new Error("invalid bytes32 - not 32 bytes long");if(0!==e[31])throw new Error("invalid bytes32 string - no null terminator");let r=31;for(;0===e[r-1];)r--;return mt(e.slice(0,r))}class ai{fragment;name;signature;topic;args;constructor(t,e,r){const n=t.name,s=t.format();m(this,{fragment:t,name:n,signature:s,topic:e,args:r})}}class oi{fragment;name;args;signature;selector;value;constructor(t,e,r,n){const s=t.name,i=t.format();m(this,{fragment:t,name:s,args:r,signature:i,selector:e,value:n})}}class ci{fragment;name;args;signature;selector;constructor(t,e,r){const n=t.name,s=t.format();m(this,{fragment:t,name:n,args:r,signature:s,selector:e})}}class li{hash;_isIndexed;static isIndexed(t){return!(!t||!t._isIndexed)}constructor(t){m(this,{hash:t,_isIndexed:!0})}}const ui={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},hi={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&ui[t.toString()]&&(e=ui[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};class di{fragments;deploy;fallback;receive;#bt;#wt;#vt;#kt;constructor(t){let e=[];e="string"==typeof t?JSON.parse(t):t,this.#vt=new Map,this.#bt=new Map,this.#wt=new Map;const r=[];for(const t of e)try{r.push(Vs.from(t))}catch(e){console.log(`[Warning] Invalid Fragment ${JSON.stringify(t)}:`,e.message)}m(this,{fragments:Object.freeze(r)});let n=null,s=!1;this.#kt=this.getAbiCoder(),this.fragments.forEach(((t,e)=>{let r;switch(t.type){case"constructor":return this.deploy?void console.log("duplicate definition - constructor"):void m(this,{deploy:t});case"fallback":return void(0===t.inputs.length?s=!0:(E(!n||t.payable!==n.payable,"conflicting fallback fragments",`fragments[${e}]`,t),n=t,s=n.payable));case"function":r=this.#vt;break;case"event":r=this.#wt;break;case"error":r=this.#bt;break;default:return}const i=t.format();r.has(i)||r.set(i,t)})),this.deploy||m(this,{deploy:Js.from("constructor()")}),m(this,{fallback:n,receive:s})}format(t){const e=t?"minimal":"full";return this.fragments.map((t=>t.format(e)))}formatJson(){const t=this.fragments.map((t=>t.format("json")));return JSON.stringify(t.map((t=>JSON.parse(t))))}getAbiCoder(){return ni.defaultAbiCoder()}#Et(t,e,r){if(I(t)){const e=t.toLowerCase();for(const t of this.#vt.values())if(e===t.selector)return t;return null}if(-1===t.indexOf("(")){const n=[];for(const[e,r]of this.#vt)e.split("(")[0]===t&&n.push(r);if(e){const t=e.length>0?e[e.length-1]:null;let r=e.length,s=!0;jr.isTyped(t)&&"overrides"===t.type&&(s=!1,r--);for(let t=n.length-1;t>=0;t--){const e=n[t].inputs.length;e===r||s&&e===r-1||n.splice(t,1)}for(let t=n.length-1;t>=0;t--){const r=n[t].inputs;for(let s=0;s<e.length;s++)if(jr.isTyped(e[s])){if(s>=r.length){if("overrides"===e[s].type)continue;n.splice(t,1);break}if(e[s].type!==r[s].baseType){n.splice(t,1);break}}}}if(1===n.length&&e&&e.length!==n[0].inputs.length){const t=e[e.length-1];(null==t||Array.isArray(t)||"object"!=typeof t)&&n.splice(0,1)}if(0===n.length)return null;if(n.length>1&&r){E(!1,`ambiguous function description (i.e. matches ${n.map((t=>JSON.stringify(t.format()))).join(", ")})`,"key",t)}return n[0]}const n=this.#vt.get(Ys.from(t).format());return n||null}getFunctionName(t){const e=this.#Et(t,null,!1);return E(e,"no matching function","key",t),e.name}hasFunction(t){return!!this.#Et(t,null,!1)}getFunction(t,e){return this.#Et(t,e||null,!0)}forEachFunction(t){const e=Array.from(this.#vt.keys());e.sort(((t,e)=>t.localeCompare(e)));for(let r=0;r<e.length;r++){const n=e[r];t(this.#vt.get(n),r)}}#Nt(t,e,r){if(I(t)){const e=t.toLowerCase();for(const t of this.#wt.values())if(e===t.topicHash)return t;return null}if(-1===t.indexOf("(")){const n=[];for(const[e,r]of this.#wt)e.split("(")[0]===t&&n.push(r);if(e){for(let t=n.length-1;t>=0;t--)n[t].inputs.length<e.length&&n.splice(t,1);for(let t=n.length-1;t>=0;t--){const r=n[t].inputs;for(let s=0;s<e.length;s++)if(jr.isTyped(e[s])&&e[s].type!==r[s].baseType){n.splice(t,1);break}}}if(0===n.length)return null;if(n.length>1&&r){E(!1,`ambiguous event description (i.e. matches ${n.map((t=>JSON.stringify(t.format()))).join(", ")})`,"key",t)}return n[0]}const n=this.#wt.get(qs.from(t).format());return n||null}getEventName(t){const e=this.#Nt(t,null,!1);return E(e,"no matching event","key",t),e.name}hasEvent(t){return!!this.#Nt(t,null,!1)}getEvent(t,e){return this.#Nt(t,e||null,!0)}forEachEvent(t){const e=Array.from(this.#wt.keys());e.sort(((t,e)=>t.localeCompare(e)));for(let r=0;r<e.length;r++){const n=e[r];t(this.#wt.get(n),r)}}getError(t,e){if(I(t)){const e=t.toLowerCase();if(hi[e])return zs.from(hi[e].signature);for(const t of this.#bt.values())if(e===t.selector)return t;return null}if(-1===t.indexOf("(")){const e=[];for(const[r,n]of this.#bt)r.split("(")[0]===t&&e.push(n);if(0===e.length)return"Error"===t?zs.from("error Error(string)"):"Panic"===t?zs.from("error Panic(uint256)"):null;if(e.length>1){E(!1,`ambiguous error description (i.e. ${e.map((t=>JSON.stringify(t.format()))).join(", ")})`,"name",t)}return e[0]}if("Error(string)"===(t=zs.from(t).format()))return zs.from("error Error(string)");if("Panic(uint256)"===t)return zs.from("error Panic(uint256)");const r=this.#bt.get(t);return r||null}forEachError(t){const e=Array.from(this.#bt.keys());e.sort(((t,e)=>t.localeCompare(e)));for(let r=0;r<e.length;r++){const n=e[r];t(this.#bt.get(n),r)}}_decodeParams(t,e){return this.#kt.decode(t,e)}_encodeParams(t,e){return this.#kt.encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if("string"==typeof t){const e=this.getError(t);E(e,"unknown error","fragment",t),t=e}return E(L(e,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",e),this._decodeParams(t.inputs,L(e,4))}encodeErrorResult(t,e){if("string"==typeof t){const e=this.getError(t);E(e,"unknown error","fragment",t),t=e}return U([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionData(t,e){if("string"==typeof t){const e=this.getFunction(t);E(e,"unknown function","fragment",t),t=e}return E(L(e,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",e),this._decodeParams(t.inputs,L(e,4))}encodeFunctionData(t,e){if("string"==typeof t){const e=this.getFunction(t);E(e,"unknown function","fragment",t),t=e}return U([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionResult(t,e){if("string"==typeof t){const e=this.getFunction(t);E(e,"unknown function","fragment",t),t=e}let r="invalid length for result data";const n=A(e);if(n.length%32==0)try{return this.#kt.decode(t.outputs,n)}catch(t){r="could not decode result data"}k(!1,r,"BAD_DATA",{value:_(n),info:{method:t.name,signature:t.format()}})}makeError(t,e){const r=x(t,"data"),n=ni.getBuiltinCallException("call",e,r);if(n.message.startsWith("execution reverted (unknown custom error)")){const t=_(r.slice(0,4)),e=this.getError(t);if(e)try{const t=this.#kt.decode(e.inputs,r.slice(4));n.revert={name:e.name,signature:e.format(),args:t},n.reason=n.revert.signature,n.message=`execution reverted: ${n.reason}`}catch(t){n.message="execution reverted (coult not decode custom error)"}}const s=this.parseTransaction(e);return s&&(n.invocation={method:s.name,signature:s.signature,args:s.args}),n}encodeFunctionResult(t,e){if("string"==typeof t){const e=this.getFunction(t);E(e,"unknown function","fragment",t),t=e}return _(this.#kt.encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if("string"==typeof t){const e=this.getEvent(t);E(e,"unknown event","eventFragment",t),t=e}k(e.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:e.length,expectedCount:t.inputs.length});const r=[];t.anonymous||r.push(t.topicHash);const n=(t,e)=>"string"===t.type?on(e):"bytes"===t.type?Ae(_(e)):("bool"===t.type&&"boolean"==typeof e?e=e?"0x01":"0x00":t.type.match(/^u?int/)?e=Q(e):t.type.match(/^bytes/)?e=$(e,32):"address"===t.type&&this.#kt.encode(["address"],[e]),G(_(e),32));for(e.forEach(((e,s)=>{const i=t.inputs[s];i.indexed?null==e?r.push(null):"array"===i.baseType||"tuple"===i.baseType?E(!1,"filtering with tuples or arrays not supported","contract."+i.name,e):Array.isArray(e)?r.push(e.map((t=>n(i,t)))):r.push(n(i,e)):E(null==e,"cannot filter non-indexed parameters; must be null","contract."+i.name,e)}));r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(t,e){if("string"==typeof t){const e=this.getEvent(t);E(e,"unknown event","eventFragment",t),t=e}const r=[],n=[],s=[];return t.anonymous||r.push(t.topicHash),E(e.length===t.inputs.length,"event arguments/values mismatch","values",e),t.inputs.forEach(((t,i)=>{const a=e[i];if(t.indexed)if("string"===t.type)r.push(on(a));else if("bytes"===t.type)r.push(Ae(a));else{if("tuple"===t.baseType||"array"===t.baseType)throw new Error("not implemented");r.push(this.#kt.encode([t.type],[a]))}else n.push(t),s.push(a)})),{data:this.#kt.encode(n,s),topics:r}}decodeEventLog(t,e,r){if("string"==typeof t){const e=this.getEvent(t);E(e,"unknown event","eventFragment",t),t=e}if(null!=r&&!t.anonymous){const e=t.topicHash;E(I(r[0],32)&&r[0].toLowerCase()===e,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const n=[],s=[],i=[];t.inputs.forEach(((t,e)=>{t.indexed?"string"===t.type||"bytes"===t.type||"tuple"===t.baseType||"array"===t.baseType?(n.push(js.from({type:"bytes32",name:t.name})),i.push(!0)):(n.push(t),i.push(!1)):(s.push(t),i.push(!1))}));const a=null!=r?this.#kt.decode(n,U(r)):null,o=this.#kt.decode(s,e,!0),c=[],l=[];let u=0,h=0;return t.inputs.forEach(((t,e)=>{let r=null;if(t.indexed)if(null==a)r=new li(null);else if(i[e])r=new li(a[h++]);else try{r=a[h++]}catch(t){r=t}else try{r=o[u++]}catch(t){r=t}c.push(r),l.push(t.name||null)})),de.fromItems(c,l)}parseTransaction(t){const e=x(t.data,"tx.data"),r=q(null!=t.value?t.value:0,"tx.value"),n=this.getFunction(_(e.slice(0,4)));if(!n)return null;const s=this.#kt.decode(n.inputs,e.slice(4));return new oi(n,n.selector,s,r)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new ai(e,e.topicHash,this.decodeEventLog(e,t.data,t.topics))}parseError(t){const e=_(t),r=this.getError(L(e,0,4));if(!r)return null;const n=this.#kt.decode(r.inputs,L(e,4));return new ci(r,r.selector,n)}static from(t){return t instanceof di?t:"string"==typeof t?new di(JSON.parse(t)):"function"==typeof t.formatJson?new di(t.formatJson()):"function"==typeof t.format?new di(t.format("json")):new di(t)}}const fi=BigInt(0);function pi(t){return null==t?null:t}function gi(t){return null==t?null:t.toString()}class mi{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(t,e,r){m(this,{gasPrice:pi(t),maxFeePerGas:pi(e),maxPriorityFeePerGas:pi(r)})}toJSON(){const{gasPrice:t,maxFeePerGas:e,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:gi(t),maxFeePerGas:gi(e),maxPriorityFeePerGas:gi(r)}}}function yi(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=_(t.data));const r="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const n of r)n in t&&null!=t[n]&&(e[n]=q(t[n],`request.${n}`));const n="type,nonce".split(/,/);for(const r of n)r in t&&null!=t[r]&&(e[r]=X(t[r],`request.${r}`));return t.accessList&&(e.accessList=mn(t.accessList)),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map((t=>S(t)?_(t):Object.assign({},t)))),e}class bi{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#Pt;constructor(t,e){this.#Pt=t.transactions.map((t=>"string"!=typeof t?new ki(t,e):t)),m(this,{provider:e,hash:pi(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,parentBeaconBlockRoot:t.parentBeaconBlockRoot,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,blobGasUsed:t.blobGasUsed,excessBlobGas:t.excessBlobGas,miner:t.miner,prevRandao:pi(t.prevRandao),extraData:t.extraData,baseFeePerGas:pi(t.baseFeePerGas),stateRoot:t.stateRoot,receiptsRoot:t.receiptsRoot})}get transactions(){return this.#Pt.map((t=>"string"==typeof t?t:t.hash))}get prefetchedTransactions(){const t=this.#Pt.slice();return 0===t.length?[]:(k("object"==typeof t[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){const{baseFeePerGas:t,difficulty:e,extraData:r,gasLimit:n,gasUsed:s,hash:i,miner:a,prevRandao:o,nonce:c,number:l,parentHash:u,parentBeaconBlockRoot:h,stateRoot:d,receiptsRoot:f,timestamp:p,transactions:g}=this;return{_type:"Block",baseFeePerGas:gi(t),difficulty:gi(e),extraData:r,gasLimit:gi(n),gasUsed:gi(s),blobGasUsed:gi(this.blobGasUsed),excessBlobGas:gi(this.excessBlobGas),hash:i,miner:a,prevRandao:o,nonce:c,number:l,parentHash:u,timestamp:p,parentBeaconBlockRoot:h,stateRoot:d,receiptsRoot:f,transactions:g}}[Symbol.iterator](){let t=0;const e=this.transactions;return{next:()=>t<this.length?{value:e[t++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#Pt.length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(t){let e;if("number"==typeof t)e=this.#Pt[t];else{const r=t.toLowerCase();for(const t of this.#Pt){if("string"==typeof t){if(t!==r)continue;e=t;break}if(t.hash!==r){e=t;break}}}if(null==e)throw new Error("no such tx");return"string"==typeof e?await this.provider.getTransaction(e):e}getPrefetchedTransaction(t){const e=this.prefetchedTransactions;if("number"==typeof t)return e[t];t=t.toLowerCase();for(const r of e)if(r.hash===t)return r;E(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return{orphan:"drop-block",hash:(t=this).hash,number:t.number};var t}}class wi{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(t,e){this.provider=e;const r=Object.freeze(t.topics.slice());m(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:r,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:e,blockNumber:r,data:n,index:s,removed:i,topics:a,transactionHash:o,transactionIndex:c}=this;return{_type:"log",address:t,blockHash:e,blockNumber:r,data:n,index:s,removed:i,topics:a,transactionHash:o,transactionIndex:c}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return k(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return k(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return k(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return{orphan:"drop-log",log:{transactionHash:(t=this).transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}};var t}}class vi{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#Rt;constructor(t,e){this.#Rt=Object.freeze(t.logs.map((t=>new wi(t,e))));let r=fi;null!=t.effectiveGasPrice?r=t.effectiveGasPrice:null!=t.gasPrice&&(r=t.gasPrice),m(this,{provider:e,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,blobGasUsed:t.blobGasUsed,gasPrice:r,blobGasPrice:t.blobGasPrice,type:t.type,status:t.status,root:t.root})}get logs(){return this.#Rt}toJSON(){const{to:t,from:e,contractAddress:r,hash:n,index:s,blockHash:i,blockNumber:a,logsBloom:o,logs:c,status:l,root:u}=this;return{_type:"TransactionReceipt",blockHash:i,blockNumber:a,contractAddress:r,cumulativeGasUsed:gi(this.cumulativeGasUsed),from:e,gasPrice:gi(this.gasPrice),blobGasUsed:gi(this.blobGasUsed),blobGasPrice:gi(this.blobGasPrice),gasUsed:gi(this.gasUsed),hash:n,index:s,logs:c,logsBloom:o,root:u,status:l,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(null==t)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(null==t)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Ni(this)}reorderedEvent(t){return k(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Ei(this,t)}}class ki{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;#Tt;constructor(t,e){this.provider=e,this.blockNumber=null!=t.blockNumber?t.blockNumber:null,this.blockHash=null!=t.blockHash?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=null!=t.maxPriorityFeePerGas?t.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=t.maxFeePerGas?t.maxFeePerGas:null,this.maxFeePerBlobGas=null!=t.maxFeePerBlobGas?t.maxFeePerBlobGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=null!=t.accessList?t.accessList:null,this.blobVersionedHashes=null!=t.blobVersionedHashes?t.blobVersionedHashes:null,this.#Tt=-1}toJSON(){const{blockNumber:t,blockHash:e,index:r,hash:n,type:s,to:i,from:a,nonce:o,data:c,signature:l,accessList:u,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:u,blockNumber:t,blockHash:e,blobVersionedHashes:h,chainId:gi(this.chainId),data:c,from:a,gasLimit:gi(this.gasLimit),gasPrice:gi(this.gasPrice),hash:n,maxFeePerGas:gi(this.maxFeePerGas),maxPriorityFeePerGas:gi(this.maxPriorityFeePerGas),maxFeePerBlobGas:gi(this.maxFeePerBlobGas),nonce:o,signature:l,to:i,index:r,type:s,value:gi(this.value)}}async getBlock(){let t=this.blockNumber;if(null==t){const e=await this.getTransaction();e&&(t=e.blockNumber)}if(null==t)return null;const e=this.provider.getBlock(t);if(null==e)throw new Error("TODO");return e}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){const{tx:t,blockNumber:e}=await g({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==t||null==t.blockNumber?0:e-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,e){const r=null==t?1:t,n=null==e?0:e;let s=this.#Tt,i=-1,a=-1===s;const o=async()=>{if(a)return null;const{blockNumber:t,nonce:e}=await g({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(e<this.nonce)return void(s=t);if(a)return null;const n=await this.getTransaction();if(!n||null==n.blockNumber)for(-1===i&&(i=s-3,i<this.#Tt&&(i=this.#Tt));i<=t;){if(a)return null;const e=await this.provider.getBlock(i,!0);if(null==e)return;for(const t of e)if(t===this.hash)return;for(let n=0;n<e.length;n++){const i=await e.getTransaction(n);if(i.from===this.from&&i.nonce===this.nonce){if(a)return null;const e=await this.provider.getTransactionReceipt(i.hash);if(null==e)return;if(t-e.blockNumber+1<r)return;let n="replaced";i.data===this.data&&i.to===this.to&&i.value===this.value?n="repriced":"0x"===i.data&&i.from===i.to&&i.value===fi&&(n="cancelled"),k(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===n||"cancelled"===n,reason:n,replacement:i.replaceableTransaction(s),hash:i.hash,receipt:e})}}i++}},c=t=>{if(null==t||0!==t.status)return t;k(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:t.to,from:t.from,data:""},receipt:t})},l=await this.provider.getTransactionReceipt(this.hash);if(0===r)return c(l);if(l){if(await l.confirmations()>=r)return c(l)}else if(await o(),0===r)return null;const u=new Promise(((t,e)=>{const i=[],l=()=>{i.forEach((t=>t()))};if(i.push((()=>{a=!0})),n>0){const t=setTimeout((()=>{l(),e(v("wait for transaction timeout","TIMEOUT"))}),n);i.push((()=>{clearTimeout(t)}))}const u=async n=>{if(await n.confirmations()>=r){l();try{t(c(n))}catch(t){e(t)}}};if(i.push((()=>{this.provider.off(this.hash,u)})),this.provider.on(this.hash,u),s>=0){const t=async()=>{try{await o()}catch(t){if(b(t,"TRANSACTION_REPLACED"))return l(),void e(t)}a||this.provider.once("block",t)};i.push((()=>{this.provider.off("block",t)})),this.provider.once("block",t)}}));return await u}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}removedEvent(){return k(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Ni(this)}reorderedEvent(t){return k(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),k(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Ei(this,t)}replaceableTransaction(t){E(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const e=new ki(this,this.provider);return e.#Tt=t,e}}function Ei(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function Ni(t){return{orphan:"drop-transaction",tx:t}}class Pi extends wi{interface;fragment;args;constructor(t,e,r){super(t,t.provider);m(this,{args:e.decodeEventLog(r,t.data,t.topics),fragment:r,interface:e})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Ri extends wi{error;constructor(t,e){super(t,t.provider),m(this,{error:e})}}class Ti extends vi{#Ot;constructor(t,e,r){super(r,e),this.#Ot=t}get logs(){return super.logs.map((t=>{const e=t.topics.length?this.#Ot.getEvent(t.topics[0]):null;if(e)try{return new Pi(t,this.#Ot,e)}catch(e){return new Ri(t,e)}return t}))}}class Oi extends ki{#Ot;constructor(t,e,r){super(r,e),this.#Ot=t}async wait(t,e){const r=await super.wait(t,e);return null==r?null:new Ti(this.#Ot,this.provider,r)}}class xi extends ht{log;constructor(t,e,r,n){super(t,e,r),m(this,{log:n})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Ai extends xi{constructor(t,e,r,n,s){super(t,e,r,new Pi(s,t.interface,n));m(this,{args:t.interface.decodeEventLog(n,this.log.data,this.log.topics),fragment:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const Ii=BigInt(0);function Si(t){return t&&"function"==typeof t.call}function Ci(t){return t&&"function"==typeof t.estimateGas}function _i(t){return t&&"function"==typeof t.resolveName}function Ui(t){return t&&"function"==typeof t.sendTransaction}function Fi(t){if(null!=t){if(_i(t))return t;if(t.provider)return t.provider}}class Li{#xt;fragment;constructor(t,e,r){if(m(this,{fragment:e}),e.inputs.length<r.length)throw new Error("too many arguments");const n=Bi(t.runner,"resolveName"),s=_i(n)?n:null;this.#xt=async function(){const n=await Promise.all(e.inputs.map(((t,e)=>null==r[e]?null:t.walkAsync(r[e],((t,e)=>"address"===t?Array.isArray(e)?Promise.all(e.map((t=>Br(t,s)))):Br(e,s):e)))));return t.interface.encodeFilterTopics(e,n)}()}getTopicFilter(){return this.#xt}}function Bi(t,e){return null==t?null:"function"==typeof t[e]?t:t.provider&&"function"==typeof t.provider[e]?t.provider:null}function Di(t){return null==t?null:t.provider||null}async function Gi(t,e){const r=jr.dereference(t,"overrides");E("object"==typeof r,"invalid overrides parameter","overrides",t);const n=yi(r);return E(null==n.to||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),E(null==n.data||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function $i(t,e,r){const n=Bi(t,"resolveName"),s=_i(n)?n:null;return await Promise.all(e.map(((t,e)=>t.walkAsync(r[e],((t,e)=>(e=jr.dereference(e,t),"address"===t?Br(e,s):e))))))}function Mi(t){const e=async function(e){const r=await Gi(e,["data"]);r.to=await t.getAddress(),r.from&&(r.from=await Br(r.from,Fi(t.runner)));const n=t.interface,s=q(r.value||Ii,"overrides.value")===Ii,i="0x"===(r.data||"0x");!n.fallback||n.fallback.payable||!n.receive||i||s||E(!1,"cannot send data to receive or send value to non-payable fallback","overrides",e),E(n.fallback||i,"cannot send data to receive-only contract","overrides.data",r.data);return E(n.receive||n.fallback&&n.fallback.payable||s,"cannot send value to non-payable fallback","overrides.value",r.value),E(n.fallback||i,"cannot send data to receive-only contract","overrides.data",r.data),r},r=async function(r){const n=t.runner;k(Ui(n),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const s=await n.sendTransaction(await e(r)),i=Di(t.runner);return new Oi(t.interface,i,s)},n=async t=>await r(t);return m(n,{_contract:t,estimateGas:async function(r){const n=Bi(t.runner,"estimateGas");return k(Ci(n),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await n.estimateGas(await e(r))},populateTransaction:e,send:r,staticCall:async function(r){const n=Bi(t.runner,"call");k(Si(n),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const s=await e(r);try{return await n.call(s)}catch(e){if(w(e)&&e.data)throw t.interface.makeError(e.data,s);throw e}}}),n}const ji=Symbol.for("_ethersInternal_contract"),Vi=new WeakMap;function Ki(t){return Vi.get(t[ji])}async function Hi(t,e){let r,n=null;if(Array.isArray(e)){const n=function(e){if(I(e,32))return e;const r=t.interface.getEvent(e);return E(r,"unknown fragment","name",e),r.topicHash};r=e.map((t=>null==t?null:Array.isArray(t)?t.map(n):n(t)))}else"*"===e?r=[null]:"string"==typeof e?I(e,32)?r=[e]:(n=t.interface.getEvent(e),E(n,"unknown fragment","event",e),r=[n.topicHash]):(s=e)&&"object"==typeof s&&"getTopicFilter"in s&&"function"==typeof s.getTopicFilter&&s.fragment?r=await e.getTopicFilter():"fragment"in e?(n=e.fragment,r=[n.topicHash]):E(!1,"unknown event name","event",e);var s;r=r.map((t=>{if(null==t)return null;if(Array.isArray(t)){const e=Array.from(new Set(t.map((t=>t.toLowerCase()))).values());return 1===e.length?e[0]:(e.sort(),e)}return t.toLowerCase()}));return{fragment:n,tag:r.map((t=>null==t?"null":Array.isArray(t)?t.join("|"):t)).join("&"),topics:r}}async function zi(t,e){const{subs:r}=Ki(t);return r.get((await Hi(t,e)).tag)||null}async function qi(t,e,r){const n=Di(t.runner);k(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:a}=await Hi(t,r),{addr:o,subs:c}=Ki(t);let l=c.get(i);if(!l){const e={address:o||t,topics:a},u=e=>{let n=s;if(null==n)try{n=t.interface.getEvent(e.topics[0])}catch(t){}if(n){const i=n,a=s?t.interface.decodeEventLog(s,e.data,e.topics):[];Wi(t,r,a,(n=>new Ai(t,n,r,i,e)))}else Wi(t,r,[],(n=>new xi(t,n,r,e)))};let h=[];l={tag:i,listeners:[],start:()=>{h.length||h.push(n.on(e,u))},stop:async()=>{if(0==h.length)return;let t=h;h=[],await Promise.all(t),n.off(e,u)}},c.set(i,l)}return l}let Ji=Promise.resolve();async function Wi(t,e,r,n){try{await Ji}catch(t){}const s=async function(t,e,r,n){await Ji;const s=await zi(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter((({listener:e,once:s})=>{const i=Array.from(r);n&&i.push(n(s?null:e));try{e.call(t,...i)}catch(t){}return!s})),0===s.listeners.length&&(s.stop(),Ki(t).subs.delete(s.tag)),i>0}(t,e,r,n);return Ji=s,await s}const Yi=["then"];class Xi{target;interface;runner;filters;[ji];fallback;constructor(t,e,r,n){E("string"==typeof t||Ur(t),"invalid value for Contract target","target",t),null==r&&(r=null);const s=di.from(e);let i;m(this,{target:t,runner:r,interface:s}),Object.defineProperty(this,ji,{value:{}});let a=null,o=null;if(n){const t=Di(r);o=new Oi(this.interface,t,n)}let c=new Map;if("string"==typeof t)if(I(t))a=t,i=Promise.resolve(t);else{const e=Bi(r,"resolveName");if(!_i(e))throw v("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});i=e.resolveName(t).then((e=>{if(null==e)throw v("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return Ki(this).addr=e,e}))}else i=t.getAddress().then((t=>{if(null==t)throw new Error("TODO");return Ki(this).addr=t,t}));var l,u;l=this,u={addrPromise:i,addr:a,deployTx:o,subs:c},Vi.set(l[ji],u);const h=new Proxy({},{get:(t,e,r)=>{if("symbol"==typeof e||Yi.indexOf(e)>=0)return Reflect.get(t,e,r);try{return this.getEvent(e)}catch(t){if(!b(t,"INVALID_ARGUMENT")||"key"!==t.argument)throw t}},has:(t,e)=>Yi.indexOf(e)>=0?Reflect.has(t,e):Reflect.has(t,e)||this.interface.hasEvent(String(e))});return m(this,{filters:h}),m(this,{fallback:s.receive||s.fallback?Mi(this):null}),new Proxy(this,{get:(t,e,r)=>{if("symbol"==typeof e||e in t||Yi.indexOf(e)>=0)return Reflect.get(t,e,r);try{return t.getFunction(e)}catch(t){if(!b(t,"INVALID_ARGUMENT")||"key"!==t.argument)throw t}},has:(t,e)=>"symbol"==typeof e||e in t||Yi.indexOf(e)>=0?Reflect.has(t,e):t.interface.hasFunction(e)})}connect(t){return new Xi(this.target,this.interface,t)}attach(t){return new Xi(t,this.interface,this.runner)}async getAddress(){return await Ki(this).addrPromise}async getDeployedCode(){const t=Di(this.runner);k(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const e=await t.getCode(await this.getAddress());return"0x"===e?null:e}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(null!=await this.getDeployedCode())return this;const e=Di(this.runner);return k(null!=e,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise(((t,r)=>{const n=async()=>{try{if(null!=await this.getDeployedCode())return t(this);e.once("block",n)}catch(t){r(t)}};n()}))}deploymentTransaction(){return Ki(this).deployTx}getFunction(t){"string"!=typeof t&&(t=t.format());const e=function(t,e){const r=function(...r){const n=t.interface.getFunction(e,r);return k(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:r}}),n},n=async function(...e){const n=r(...e);let s={};if(n.inputs.length+1===e.length&&(s=await Gi(e.pop()),s.from&&(s.from=await Br(s.from,Fi(t.runner)))),n.inputs.length!==e.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const i=await $i(t.runner,n.inputs,e);return Object.assign({},s,await g({to:t.getAddress(),data:t.interface.encodeFunctionData(n,i)}))},s=async function(...t){const e=await a(...t);return 1===e.length?e[0]:e},i=async function(...e){const r=t.runner;k(Ui(r),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const s=await r.sendTransaction(await n(...e)),i=Di(t.runner);return new Oi(t.interface,i,s)},a=async function(...e){const s=Bi(t.runner,"call");k(Si(s),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const i=await n(...e);let a="0x";try{a=await s.call(i)}catch(e){if(w(e)&&e.data)throw t.interface.makeError(e.data,i);throw e}const o=r(...e);return t.interface.decodeFunctionResult(o,a)},o=async(...t)=>r(...t).constant?await s(...t):await i(...t);return m(o,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:r,estimateGas:async function(...e){const r=Bi(t.runner,"estimateGas");return k(Ci(r),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await r.estimateGas(await n(...e))},populateTransaction:n,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(o,"fragment",{configurable:!1,enumerable:!0,get:()=>{const r=t.interface.getFunction(e);return k(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),r}}),o}(this,t);return e}getEvent(t){return"string"!=typeof t&&(t=t.format()),function(t,e){const r=function(...r){const n=t.interface.getEvent(e,r);return k(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:r}}),n},n=function(...e){return new Li(t,r(...e),e)};return m(n,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:r}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const r=t.interface.getEvent(e);return k(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),r}}),n}(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,e,r){null==e&&(e=0),null==r&&(r="latest");const{addr:n,addrPromise:s}=Ki(this),i=n||await s,{fragment:a,topics:o}=await Hi(this,t),c={address:i,topics:o,fromBlock:e,toBlock:r},l=Di(this.runner);return k(l,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await l.getLogs(c)).map((t=>{let e=a;if(null==e)try{e=this.interface.getEvent(t.topics[0])}catch(t){}if(e)try{return new Pi(t,this.interface,e)}catch(e){return new Ri(t,e)}return new wi(t,l)}))}async on(t,e){const r=await qi(this,"on",t);return r.listeners.push({listener:e,once:!1}),r.start(),this}async once(t,e){const r=await qi(this,"once",t);return r.listeners.push({listener:e,once:!0}),r.start(),this}async emit(t,...e){return await Wi(this,t,e,null)}async listenerCount(t){if(t){const e=await zi(this,t);return e?e.listeners.length:0}const{subs:e}=Ki(this);let r=0;for(const{listeners:t}of e.values())r+=t.length;return r}async listeners(t){if(t){const e=await zi(this,t);return e?e.listeners.map((({listener:t})=>t)):[]}const{subs:e}=Ki(this);let r=[];for(const{listeners:t}of e.values())r=r.concat(t.map((({listener:t})=>t)));return r}async off(t,e){const r=await zi(this,t);if(!r)return this;if(e){const t=r.listeners.map((({listener:t})=>t)).indexOf(e);t>=0&&r.listeners.splice(t,1)}return null!=e&&0!==r.listeners.length||(r.stop(),Ki(this).subs.delete(r.tag)),this}async removeAllListeners(t){if(t){const e=await zi(this,t);if(!e)return this;e.stop(),Ki(this).subs.delete(e.tag)}else{const{subs:t}=Ki(this);for(const{tag:e,stop:r}of t.values())r(),t.delete(e)}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return await this.off(t,e)}static buildClass(t){return class extends Xi{constructor(e,r=null){super(e,t,r)}}}static from(t,e,r){null==r&&(r=null);return new this(t,e,r)}}class Zi extends(function(){return Xi}()){}class Qi{interface;bytecode;runner;constructor(t,e,r){const n=di.from(t);e instanceof Uint8Array||("object"==typeof e&&(e=e.object),e.startsWith("0x")||(e="0x"+e)),m(this,{bytecode:e=_(x(e)),interface:n,runner:r||null})}attach(t){return new Xi(t,this.interface,this.runner)}async getDeployTransaction(...t){let e={};const r=this.interface.deploy;if(r.inputs.length+1===t.length&&(e=await Gi(t.pop())),r.inputs.length!==t.length)throw new Error("incorrect number of arguments to constructor");const n=await $i(this.runner,r.inputs,t),s=U([this.bytecode,this.interface.encodeDeploy(n)]);return Object.assign({},e,{data:s})}async deploy(...t){const e=await this.getDeployTransaction(...t);k(this.runner&&"function"==typeof this.runner.sendTransaction,"factory runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const r=await this.runner.sendTransaction(e),n=Cr(r);return new Xi(n,this.interface,this.runner,r)}connect(t){return new Qi(this.interface,this.bytecode,t)}static fromSolidity(t,e){E(null!=t,"bad compiler output","output",t),"string"==typeof t&&(t=JSON.parse(t));const r=t.abi;let n="";return t.bytecode?n=t.bytecode:t.evm&&t.evm.bytecode&&(n=t.evm.bytecode),new this(r,n,e)}}function ta(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):E(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class ea{name;constructor(t){m(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,e){throw new Error("unsupported coin")}async decodeAddress(t,e){throw new Error("unsupported coin")}}const ra=new RegExp("^(ipfs)://(.*)$","i"),na=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),ra,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class sa{provider;address;name;#At;#It;constructor(t,e,r){m(this,{provider:t,address:e,name:r}),this.#At=null,this.#It=new Zi(e,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t)}async supportsWildcard(){return null==this.#At&&(this.#At=(async()=>{try{return await this.#It.supportsInterface("0x9061b923")}catch(t){if(b(t,"CALL_EXCEPTION"))return!1;throw this.#At=null,t}})()),await this.#At}async#St(t,e){e=(e||[]).slice();const r=this.#It.interface;e.unshift(fn(this.name));let n=null;await this.supportsWildcard()&&(n=r.getFunction(t),k(n,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),e=[pn(this.name,255),r.encodeFunctionData(n,e)],t="resolve(bytes,bytes)"),e.push({enableCcipRead:!0});try{const s=await this.#It[t](...e);return n?r.decodeFunctionResult(n,s)[0]:s}catch(t){if(!b(t,"CALL_EXCEPTION"))throw t}return null}async getAddress(t){if(null==t&&(t=60),60===t)try{const t=await this.#St("addr(bytes32)");return null==t||t===sr?null:t}catch(t){if(b(t,"CALL_EXCEPTION"))return null;throw t}if(t>=0&&t<2147483648){let e=t+2147483648;const r=await this.#St("addr(bytes32,uint)",[e]);if(I(r,20))return Ir(r)}let e=null;for(const r of this.provider.plugins)if(r instanceof ea&&r.supportsCoinType(t)){e=r;break}if(null==e)return null;const r=await this.#St("addr(bytes32,uint)",[t]);if(null==r||"0x"===r)return null;const n=await e.decodeAddress(t,r);if(null!=n)return n;k(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:r}})}async getText(t){const e=await this.#St("text(bytes32,string)",[t]);return null==e||"0x"===e?null:e}async getContentHash(){const t=await this.#St("contenthash(bytes32)");if(null==t||"0x"===t)return null;const e=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const t="e3010170"===e[1]?"ipfs":"ipns",r=parseInt(e[4],16);if(e[5].length===2*r)return`${t}://${ot("0x"+e[2])}`}const r=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&64===r[1].length)return`bzz://${r[1]}`;k(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const e=await this.getText("avatar");if(null==e)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:e});for(let r=0;r<na.length;r++){const n=e.match(na[r]);if(null==n)continue;const s=n[1].toLowerCase();switch(s){case"https":case"data":return t.push({type:"url",value:e}),{linkage:t,url:e};case"ipfs":{const r=ta(e);return t.push({type:"ipfs",value:e}),t.push({type:"url",value:r}),{linkage:t,url:r}}case"erc721":case"erc1155":{const r="erc721"===s?"tokenURI(uint256)":"uri(uint256)";t.push({type:s,value:e});const i=await this.getAddress();if(null==i)return t.push({type:"!owner",value:""}),{url:null,linkage:t};const a=(n[2]||"").split("/");if(2!==a.length)return t.push({type:`!${s}caip`,value:n[2]||""}),{url:null,linkage:t};const o=a[1],c=new Zi(a[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===s){const e=await c.ownerOf(o);if(i!==e)return t.push({type:"!owner",value:e}),{url:null,linkage:t};t.push({type:"owner",value:e})}else if("erc1155"===s){const e=await c.balanceOf(i,o);if(!e)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:e.toString()})}let l=await c[r](o);if(null==l||"0x"===l)return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:l}),"erc1155"===s&&(l=l.replace("{id}",Q(o,32).substring(2)),t.push({type:"metadata-url-expanded",value:l})),l.match(/^ipfs:/i)&&(l=ta(l)),t.push({type:"metadata-url",value:l});let u={};const h=await new At(l).send();h.assertOk();try{u=h.bodyJson}catch(e){try{t.push({type:"!metadata",value:h.bodyText})}catch(e){const r=h.body;return r&&t.push({type:"!metadata",value:_(r)}),{url:null,linkage:t}}return{url:null,linkage:t}}if(!u)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(u)});let d=u.image;if("string"!=typeof d)return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(d.match(/^(https:\/\/|data:)/i));else{if(null==d.match(ra))return t.push({type:"!imageUrl-ipfs",value:d}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:d}),d=ta(d)}return t.push({type:"url",value:d}),{linkage:t,url:d}}}}}catch(t){}return{linkage:t,url:null}}static async getEnsAddress(t){const e=await t.getNetwork(),r=e.getPlugin("org.ethers.plugins.network.Ens");return k(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:e}}),r.address}static async#Ct(t,e){const r=await sa.getEnsAddress(t);try{const n=new Zi(r,["function resolver(bytes32) view returns (address)"],t),s=await n.resolver(fn(e),{enableCcipRead:!0});return s===sr?null:s}catch(t){throw t}return null}static async fromName(t,e){let r=e;for(;;){if(""===r||"."===r)return null;if("eth"!==e&&"eth"===r)return null;const n=await sa.#Ct(t,r);if(null!=n){const s=new sa(t,n,e);return r===e||await s.supportsWildcard()?s:null}r=r.split(".").slice(1).join(".")}}}const ia=BigInt(0);function aa(t,e){return function(r){return null==r?e:t(r)}}function oa(t,e){return r=>{if(e&&null==r)return null;if(!Array.isArray(r))throw new Error("not an array");return r.map((e=>t(e)))}}function ca(t,e){return r=>{const n={};for(const s in t){let i=s;if(e&&s in e&&!(i in r))for(const t of e[s])if(t in r){i=t;break}try{const e=t[s](r[i]);void 0!==e&&(n[s]=e)}catch(t){k(!1,`invalid value for value.${s} (${t instanceof Error?t.message:"not-an-error"})`,"BAD_DATA",{value:r})}}return n}}function la(t){return E(I(t,!0),"invalid data","value",t),t}function ua(t){return E(I(t,32),"invalid hash","value",t),t}const ha=ca({address:Ir,blockHash:ua,blockNumber:X,data:la,index:X,removed:aa((function(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}E(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}),!1),topics:oa(ua),transactionHash:ua,transactionIndex:X},{index:["logIndex"]});const da=ca({hash:aa(ua),parentHash:ua,parentBeaconBlockRoot:aa(ua,null),number:X,timestamp:X,nonce:aa(la),difficulty:q,gasLimit:q,gasUsed:q,stateRoot:aa(ua,null),receiptsRoot:aa(ua,null),blobGasUsed:aa(q,null),excessBlobGas:aa(q,null),miner:aa(Ir),prevRandao:aa(ua,null),extraData:la,baseFeePerGas:aa(q)},{prevRandao:["mixHash"]});const fa=ca({transactionIndex:X,blockNumber:X,transactionHash:ua,address:Ir,topics:oa(ua),data:la,index:X,blockHash:ua},{index:["logIndex"]});const pa=ca({to:aa(Ir,null),from:aa(Ir,null),contractAddress:aa(Ir,null),index:X,root:aa(_),gasUsed:q,blobGasUsed:aa(q,null),logsBloom:aa(la),blockHash:ua,hash:ua,logs:oa((function(t){return fa(t)})),blockNumber:X,cumulativeGasUsed:q,effectiveGasPrice:aa(q),blobGasPrice:aa(q,null),status:aa(X),type:aa(X,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function ga(t){t.to&&q(t.to)===ia&&(t.to="0x0000000000000000000000000000000000000000");const e=ca({hash:ua,index:aa(X,void 0),type:t=>"0x"===t||null==t?0:X(t),accessList:aa(mn,null),blobVersionedHashes:aa(oa(ua,!0),null),blockHash:aa(ua,null),blockNumber:aa(X,null),transactionIndex:aa(X,null),from:Ir,gasPrice:aa(q),maxPriorityFeePerGas:aa(q),maxFeePerGas:aa(q),maxFeePerBlobGas:aa(q,null),gasLimit:q,to:aa(Ir,null),value:q,nonce:X,data:la,creates:aa(Ir,null),chainId:aa(q,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(null==e.to&&null==e.creates&&(e.creates=Cr(e)),1!==t.type&&2!==t.type||null!=t.accessList||(e.accessList=[]),t.signature?e.signature=kr.from(t.signature):e.signature=kr.from(t),null==e.chainId){const t=e.signature.legacyChainId;null!=t&&(e.chainId=t)}return e.blockHash&&q(e.blockHash)===ia&&(e.blockHash=null),e}class ma{name;constructor(t){m(this,{name:t})}clone(){return new ma(this.name)}}class ya extends ma{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(t,e){null==t&&(t=0),super(`org.ethers.network.plugins.GasCost#${t||0}`);const r={effectiveBlock:t};function n(t,n){let s=(e||{})[t];null==s&&(s=n),E("number"==typeof s,`invalud value for ${t}`,"costs",e),r[t]=s}n("txBase",21e3),n("txCreate",32e3),n("txDataZero",4),n("txDataNonzero",16),n("txAccessListStorageKey",1900),n("txAccessListAddress",2400),m(this,r)}clone(){return new ya(this.effectiveBlock,this)}}class ba extends ma{address;targetNetwork;constructor(t,e){super("org.ethers.plugins.network.Ens"),m(this,{address:t||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==e?1:e})}clone(){return new ba(this.address,this.targetNetwork)}}class wa extends ma{#_t;get feeDataFunc(){return this.#_t}constructor(t){super("org.ethers.plugins.network.FeeData"),this.#_t=t}async getFeeData(t){return await this.#_t(t)}clone(){return new wa(this.#_t)}}class va extends ma{#c;#Ut;get url(){return this.#c}get processFunc(){return this.#Ut}constructor(t,e){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#c=t,this.#Ut=e}clone(){return this}}const ka=new Map;class Ea{#Ft;#rt;#Lt;constructor(t,e){this.#Ft=t,this.#rt=q(e),this.#Lt=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#Ft}set name(t){this.#Ft=t}get chainId(){return this.#rt}set chainId(t){this.#rt=q(t,"chainId")}matches(t){if(null==t)return!1;if("string"==typeof t){try{return this.chainId===q(t)}catch(t){}return this.name===t}if("number"==typeof t||"bigint"==typeof t){try{return this.chainId===q(t)}catch(t){}return!1}if("object"==typeof t){if(null!=t.chainId){try{return this.chainId===q(t.chainId)}catch(t){}return!1}return null!=t.name&&this.name===t.name}return!1}get plugins(){return Array.from(this.#Lt.values())}attachPlugin(t){if(this.#Lt.get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return this.#Lt.set(t.name,t.clone()),this}getPlugin(t){return this.#Lt.get(t)||null}getPlugins(t){return this.plugins.filter((e=>e.name.split("#")[0]===t))}clone(){const t=new Ea(this.name,this.chainId);return this.plugins.forEach((e=>{t.attachPlugin(e.clone())})),t}computeIntrinsicGas(t){const e=this.getPlugin("org.ethers.plugins.network.GasCost")||new ya;let r=e.txBase;if(null==t.to&&(r+=e.txCreate),t.data)for(let n=2;n<t.data.length;n+=2)"00"===t.data.substring(n,n+2)?r+=e.txDataZero:r+=e.txDataNonzero;if(t.accessList){const n=mn(t.accessList);for(const t in n)r+=e.txAccessListAddress+e.txAccessListStorageKey*n[t].storageKeys.length}return r}static from(t){if(function(){if(Ra)return;function t(t,e,r){const n=function(){const n=new Ea(t,e);return null!=r.ensNetwork&&n.attachPlugin(new ba(null,r.ensNetwork)),n.attachPlugin(new ya),(r.plugins||[]).forEach((t=>{n.attachPlugin(t)})),n};Ea.register(t,n),Ea.register(e,n),r.altNames&&r.altNames.forEach((t=>{Ea.register(t,n)}))}Ra=!0,t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[Pa("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[Pa("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}(),null==t)return Ea.from("mainnet");if("number"==typeof t&&(t=BigInt(t)),"string"==typeof t||"bigint"==typeof t){const e=ka.get(t);if(e)return e();if("bigint"==typeof t)return new Ea("unknown",t);E(!1,"unknown network","network",t)}if("function"==typeof t.clone){return t.clone()}if("object"==typeof t){E("string"==typeof t.name&&"number"==typeof t.chainId,"invalid network object name or chainId","network",t);const e=new Ea(t.name,t.chainId);return(t.ensAddress||null!=t.ensNetwork)&&e.attachPlugin(new ba(t.ensAddress,t.ensNetwork)),e}E(!1,"invalid network","network",t)}static register(t,e){"number"==typeof t&&(t=BigInt(t));const r=ka.get(t);r&&E(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",t),ka.set(t,e)}}function Na(t,e){const r=String(t);if(!r.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const n=r.split(".");if(1===n.length&&n.push(""),2!==n.length)throw new Error(`invalid gwei value: ${t}`);for(;n[1].length<e;)n[1]+="0";if(n[1].length>9){let t=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||t++,n[1]=t.toString()}return BigInt(n[0]+n[1])}function Pa(t){return new va(t,(async(t,e,r)=>{let n;r.setHeader("User-Agent","ethers");try{const[e,s]=await Promise.all([r.send(),t()]);n=e;const i=n.bodyJson.standard;return{gasPrice:s.gasPrice,maxFeePerGas:Na(i.maxFee,9),maxPriorityFeePerGas:Na(i.maxPriorityFee,9)}}catch(t){k(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:n,error:t})}}))}let Ra=!1;function Ta(t){return JSON.parse(JSON.stringify(t))}class Oa{#Bt;#Dt;#Gt;#$t;constructor(t){this.#Bt=t,this.#Dt=null,this.#Gt=4e3,this.#$t=-2}get pollingInterval(){return this.#Gt}set pollingInterval(t){this.#Gt=t}async#Mt(){try{const t=await this.#Bt.getBlockNumber();if(-2===this.#$t)return void(this.#$t=t);if(t!==this.#$t){for(let e=this.#$t+1;e<=t;e++){if(null==this.#Dt)return;await this.#Bt.emit("block",e)}this.#$t=t}}catch(t){}null!=this.#Dt&&(this.#Dt=this.#Bt._setTimeout(this.#Mt.bind(this),this.#Gt))}start(){this.#Dt||(this.#Dt=this.#Bt._setTimeout(this.#Mt.bind(this),this.#Gt),this.#Mt())}stop(){this.#Dt&&(this.#Bt._clearTimeout(this.#Dt),this.#Dt=null)}pause(t){this.stop(),t&&(this.#$t=-2)}resume(){this.start()}}class xa{#Bt;#Mt;#jt;constructor(t){this.#Bt=t,this.#jt=!1,this.#Mt=t=>{this._poll(t,this.#Bt)}}async _poll(t,e){throw new Error("sub-classes must override this")}start(){this.#jt||(this.#jt=!0,this.#Mt(-2),this.#Bt.on("block",this.#Mt))}stop(){this.#jt&&(this.#jt=!1,this.#Bt.off("block",this.#Mt))}pause(t){this.stop()}resume(){this.start()}}class Aa extends xa{#Vt;#Kt;constructor(t,e){super(t),this.#Vt=e,this.#Kt=-2}pause(t){t&&(this.#Kt=-2),super.pause(t)}async _poll(t,e){const r=await e.getBlock(this.#Vt);null!=r&&(-2===this.#Kt?this.#Kt=r.number:r.number>this.#Kt&&(e.emit(this.#Vt,r.number),this.#Kt=r.number))}}class Ia extends xa{#xt;constructor(t,e){super(t),this.#xt=Ta(e)}async _poll(t,e){throw new Error("@TODO")}}class Sa extends xa{#Ht;constructor(t,e){super(t),this.#Ht=e}async _poll(t,e){const r=await e.getTransactionReceipt(this.#Ht);r&&e.emit(this.#Ht,r)}}class Ca{#Bt;#xt;#Dt;#jt;#$t;constructor(t,e){this.#Bt=t,this.#xt=Ta(e),this.#Dt=this.#Mt.bind(this),this.#jt=!1,this.#$t=-2}async#Mt(t){if(-2===this.#$t)return;const e=Ta(this.#xt);e.fromBlock=this.#$t+1,e.toBlock=t;const r=await this.#Bt.getLogs(e);if(0!==r.length)for(const t of r)this.#Bt.emit(this.#xt,t),this.#$t=t.blockNumber;else this.#$t<t-60&&(this.#$t=t-60)}start(){this.#jt||(this.#jt=!0,-2===this.#$t&&this.#Bt.getBlockNumber().then((t=>{this.#$t=t})),this.#Bt.on("block",this.#Dt))}stop(){this.#jt&&(this.#jt=!1,this.#Bt.off("block",this.#Dt))}pause(t){this.stop(),t&&(this.#$t=-2)}resume(){this.start()}}const _a=BigInt(2);function Ua(t){return t&&"function"==typeof t.then}function Fa(t,e){return t+":"+JSON.stringify(e,((t,e)=>{if(null==e)return"null";if("bigint"==typeof e)return`bigint:${e.toString()}`;if("string"==typeof e)return e.toLowerCase();if("object"==typeof e&&!Array.isArray(e)){const t=Object.keys(e);return t.sort(),t.reduce(((t,r)=>(t[r]=e[r],t)),{})}return e}))}class La{name;constructor(t){m(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function Ba(t){return(t=Array.from(new Set(t).values())).sort(),t}async function Da(t,e){if(null==t)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),"string"==typeof t)switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(I(t,32)){const e=t.toLowerCase();return{type:"transaction",tag:Fa("tx",{hash:e}),hash:e}}if(t.orphan){const e=t;return{type:"orphan",tag:Fa("orphan",e),filter:(r=e,JSON.parse(JSON.stringify(r)))}}var r;if(t.address||t.topics){const r=t,n={topics:(r.topics||[]).map((t=>null==t?null:Array.isArray(t)?Ba(t.map((t=>t.toLowerCase()))):t.toLowerCase()))};if(r.address){const t=[],s=[],i=r=>{I(r)?t.push(r):s.push((async()=>{t.push(await Br(r,e))})())};Array.isArray(r.address)?r.address.forEach(i):i(r.address),s.length&&await Promise.all(s),n.address=Ba(t.map((t=>t.toLowerCase())))}return{filter:n,tag:Fa("event",n),type:"event"}}E(!1,"unknown ProviderEvent","event",t)}function Ga(){return(new Date).getTime()}const $a={cacheTimeout:250,pollingInterval:4e3};class Ma{#zt;#Lt;#qt;#Jt;#Wt;#Yt;#Xt;#Zt;#Qt;#te;#ee;#q;constructor(t,e){if(this.#q=Object.assign({},$a,e||{}),"any"===t)this.#Yt=!0,this.#Wt=null;else if(t){const e=Ea.from(t);this.#Yt=!1,this.#Wt=Promise.resolve(e),setTimeout((()=>{this.emit("network",e,null)}),0)}else this.#Yt=!1,this.#Wt=null;this.#Zt=-1,this.#Xt=new Map,this.#zt=new Map,this.#Lt=new Map,this.#qt=null,this.#Jt=!1,this.#Qt=1,this.#te=new Map,this.#ee=!1}get pollingInterval(){return this.#q.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#Lt.values())}attachPlugin(t){if(this.#Lt.get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return this.#Lt.set(t.name,t.connect(this)),this}getPlugin(t){return this.#Lt.get(t)||null}get disableCcipRead(){return this.#ee}set disableCcipRead(t){this.#ee=!!t}async#re(t){const e=this.#q.cacheTimeout;if(e<0)return await this._perform(t);const r=Fa(t.method,t);let n=this.#Xt.get(r);return n||(n=this._perform(t),this.#Xt.set(r,n),setTimeout((()=>{this.#Xt.get(r)===n&&this.#Xt.delete(r)}),e)),await n}async ccipReadFetch(t,e,r){if(this.disableCcipRead||0===r.length||null==t.to)return null;const n=t.to.toLowerCase(),s=e.toLowerCase(),i=[];for(let e=0;e<r.length;e++){const a=r[e],o=a.replace("{sender}",n).replace("{data}",s),c=new At(o);-1===a.indexOf("{data}")&&(c.body={data:s,sender:n}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:c,index:e,urls:r});let l="unknown error";const u=await c.send();try{const t=u.bodyJson;if(t.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:c,result:t}),t.data;t.message&&(l=t.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:c,result:t})}catch(t){}k(u.statusCode<400||u.statusCode>=500,`response not found during CCIP fetch: ${l}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:a,errorMessage:l}}),i.push(l)}k(!1,`error encountered during CCIP fetch: ${i.map((t=>JSON.stringify(t))).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:r,errorMessages:i}})}_wrapBlock(t,e){return new bi(function(t){const e=da(t);return e.transactions=t.transactions.map((t=>"string"==typeof t?t:ga(t))),e}(t),this)}_wrapLog(t,e){return new wi(function(t){return ha(t)}(t),this)}_wrapTransactionReceipt(t,e){return new vi(function(t){return pa(t)}(t),this)}_wrapTransactionResponse(t,e){return new ki(ga(t),this)}_detectNetwork(){k(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){k(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=X(await this.#re({method:"getBlockNumber"}),"%response");return this.#Zt>=0&&(this.#Zt=t),t}_getAddress(t){return Br(t,this)}_getBlockTag(t){if(null==t)return"latest";switch(t){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return t}return I(t)?I(t,32)?t:et(t):("bigint"==typeof t&&(t=X(t,"blockTag")),"number"==typeof t?t>=0?et(t):this.#Zt>=0?et(this.#Zt+t):this.getBlockNumber().then((e=>et(e+t))):void E(!1,"invalid blockTag","blockTag",t))}_getFilter(t){const e=(t.topics||[]).map((t=>null==t?null:Array.isArray(t)?Ba(t.map((t=>t.toLowerCase()))):t.toLowerCase())),r="blockHash"in t?t.blockHash:void 0,n=(t,n,s)=>{let i;switch(t.length){case 0:break;case 1:i=t[0];break;default:t.sort(),i=t}if(r&&(null!=n||null!=s))throw new Error("invalid filter");const a={};return i&&(a.address=i),e.length&&(a.topics=e),n&&(a.fromBlock=n),s&&(a.toBlock=s),r&&(a.blockHash=r),a};let s,i,a=[];if(t.address)if(Array.isArray(t.address))for(const e of t.address)a.push(this._getAddress(e));else a.push(this._getAddress(t.address));return"fromBlock"in t&&(s=this._getBlockTag(t.fromBlock)),"toBlock"in t&&(i=this._getBlockTag(t.toBlock)),a.filter((t=>"string"!=typeof t)).length||null!=s&&"string"!=typeof s||null!=i&&"string"!=typeof i?Promise.all([Promise.all(a),s,i]).then((t=>n(t[0],t[1],t[2]))):n(a,s,i)}_getTransactionRequest(t){const e=yi(t),r=[];if(["to","from"].forEach((t=>{if(null==e[t])return;const n=Br(e[t],this);Ua(n)?r.push(async function(){e[t]=await n}()):e[t]=n})),null!=e.blockTag){const t=this._getBlockTag(e.blockTag);Ua(t)?r.push(async function(){e.blockTag=await t}()):e.blockTag=t}return r.length?async function(){return await Promise.all(r),e}():e}async getNetwork(){if(null==this.#Wt){const t=(async()=>{try{const t=await this._detectNetwork();return this.emit("network",t,null),t}catch(e){throw this.#Wt===t&&(this.#Wt=null),e}})();return this.#Wt=t,(await t).clone()}const t=this.#Wt,[e,r]=await Promise.all([t,this._detectNetwork()]);return e.chainId!==r.chainId&&(this.#Yt?(this.emit("network",r,e),this.#Wt===t&&(this.#Wt=Promise.resolve(r))):k(!1,`network changed: ${e.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),e.clone()}async getFeeData(){const t=await this.getNetwork(),e=async()=>{const{_block:e,gasPrice:r,priorityFee:n}=await g({_block:this.#ne("latest",!1),gasPrice:(async()=>{try{return q(await this.#re({method:"getGasPrice"}),"%response")}catch(t){}return null})(),priorityFee:(async()=>{try{return q(await this.#re({method:"getPriorityFee"}),"%response")}catch(t){}return null})()});let s=null,i=null;const a=this._wrapBlock(e,t);return a&&a.baseFeePerGas&&(i=null!=n?n:BigInt("1000000000"),s=a.baseFeePerGas*_a+i),new mi(r,s,i)},r=t.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const t=new At(r.url),n=await r.processFunc(e,this,t);return new mi(n.gasPrice,n.maxFeePerGas,n.maxPriorityFeePerGas)}return await e()}async estimateGas(t){let e=this._getTransactionRequest(t);return Ua(e)&&(e=await e),q(await this.#re({method:"estimateGas",transaction:e}),"%response")}async#se(t,e,r){k(r<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:e,enableCcipRead:!0})});const n=yi(t);try{return _(await this._perform({method:"call",transaction:n,blockTag:e}))}catch(t){if(!this.disableCcipRead&&w(t)&&t.data&&r>=0&&"latest"===e&&null!=n.to&&"0x556f1830"===L(t.data,0,4)){const s=t.data,i=await Br(n.to,this);let a;try{a=function(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};k(F(t)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const r=L(t,0,32);k(L(r,0,12)===L(Ja,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=L(r,12);try{const r=[],n=X(L(t,32,64)),s=X(L(t,n,n+32)),i=L(t,n+32);for(let t=0;t<s;t++){const e=ja(i,32*t);if(null==e)throw new Error("abort");r.push(e)}e.urls=r}catch(t){k(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=Va(t,64);if(null==r)throw new Error("abort");e.calldata=r}catch(t){k(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}k(L(t,100,128)===L(Ja,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=L(t,96,100);try{const r=Va(t,128);if(null==r)throw new Error("abort");e.extraData=r}catch(t){k(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map((t=>e[t])),e}(L(t.data,4))}catch(t){k(!1,t.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:n,info:{data:s}})}k(a.sender.toLowerCase()===i.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:s,reason:"OffchainLookup",transaction:n,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:a.errorArgs}});const o=await this.ccipReadFetch(n,a.calldata,a.urls);k(null!=o,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:n,info:{data:t.data,errorArgs:a.errorArgs}});const c={to:i,data:U([a.selector,qa([o,a.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:c});try{const t=await this.#se(c,e,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},c),result:t}),t}catch(t){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},c),error:t}),t}}throw t}}async#ie(t){const{value:e}=await g({network:this.getNetwork(),value:t});return e}async call(t){const{tx:e,blockTag:r}=await g({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await this.#ie(this.#se(e,r,t.enableCcipRead?0:-1))}async#ae(t,e,r){let n=this._getAddress(e),s=this._getBlockTag(r);return"string"==typeof n&&"string"==typeof s||([n,s]=await Promise.all([n,s])),await this.#ie(this.#re(Object.assign(t,{address:n,blockTag:s})))}async getBalance(t,e){return q(await this.#ae({method:"getBalance"},t,e),"%response")}async getTransactionCount(t,e){return X(await this.#ae({method:"getTransactionCount"},t,e),"%response")}async getCode(t,e){return _(await this.#ae({method:"getCode"},t,e))}async getStorage(t,e,r){const n=q(e,"position");return _(await this.#ae({method:"getStorage",position:n},t,r))}async broadcastTransaction(t){const{blockNumber:e,hash:r,network:n}=await g({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),s=Fn.from(t);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,n).replaceableTransaction(e)}async#ne(t,e){if(I(t,32))return await this.#re({method:"getBlock",blockHash:t,includeTransactions:e});let r=this._getBlockTag(t);return"string"!=typeof r&&(r=await r),await this.#re({method:"getBlock",blockTag:r,includeTransactions:e})}async getBlock(t,e){const{network:r,params:n}=await g({network:this.getNetwork(),params:this.#ne(t,!!e)});return null==n?null:this._wrapBlock(n,r)}async getTransaction(t){const{network:e,params:r}=await g({network:this.getNetwork(),params:this.#re({method:"getTransaction",hash:t})});return null==r?null:this._wrapTransactionResponse(r,e)}async getTransactionReceipt(t){const{network:e,params:r}=await g({network:this.getNetwork(),params:this.#re({method:"getTransactionReceipt",hash:t})});if(null==r)return null;if(null==r.gasPrice&&null==r.effectiveGasPrice){const e=await this.#re({method:"getTransaction",hash:t});if(null==e)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=e.gasPrice}return this._wrapTransactionReceipt(r,e)}async getTransactionResult(t){const{result:e}=await g({network:this.getNetwork(),result:this.#re({method:"getTransactionResult",hash:t})});return null==e?null:_(e)}async getLogs(t){let e=this._getFilter(t);Ua(e)&&(e=await e);const{network:r,params:n}=await g({network:this.getNetwork(),params:this.#re({method:"getLogs",filter:e})});return n.map((t=>this._wrapLog(t,r)))}_getProvider(t){k(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await sa.fromName(this,t)}async getAvatar(t){const e=await this.getResolver(t);return e?await e.getAvatar():null}async resolveName(t){const e=await this.getResolver(t);return e?await e.getAddress():null}async lookupAddress(t){const e=fn((t=Ir(t)).substring(2).toLowerCase()+".addr.reverse");try{const r=await sa.getEnsAddress(this),n=new Zi(r,["function resolver(bytes32) view returns (address)"],this),s=await n.resolver(e);if(null==s||s===sr)return null;const i=new Zi(s,["function name(bytes32) view returns (string)"],this),a=await i.name(e);return await this.resolveName(a)!==t?null:a}catch(t){if(b(t,"BAD_DATA")&&"0x"===t.value)return null;if(b(t,"CALL_EXCEPTION"))return null;throw t}return null}async waitForTransaction(t,e,r){const n=null!=e?e:1;return 0===n?this.getTransactionReceipt(t):new Promise((async(e,s)=>{let i=null;const a=async r=>{try{const s=await this.getTransactionReceipt(t);if(null!=s&&r-s.blockNumber+1>=n)return e(s),void(i&&(clearTimeout(i),i=null))}catch(t){console.log("EEE",t)}this.once("block",a)};null!=r&&(i=setTimeout((()=>{null!=i&&(i=null,this.off("block",a),s(v("timeout","TIMEOUT",{reason:"timeout"})))}),r)),a(await this.getBlockNumber())}))}async waitForBlock(t){k(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const e=this.#te.get(t);e&&(e.timer&&clearTimeout(e.timer),this.#te.delete(t))}_setTimeout(t,e){null==e&&(e=0);const r=this.#Qt++,n=()=>{this.#te.delete(r),t()};if(this.paused)this.#te.set(r,{timer:null,func:n,time:e});else{const t=setTimeout(n,e);this.#te.set(r,{timer:t,func:n,time:Ga()})}return r}_forEachSubscriber(t){for(const e of this.#zt.values())t(e.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new La(t.type);case"block":{const t=new Oa(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new Aa(this,t.type);case"event":return new Ca(this,t.filter);case"transaction":return new Sa(this,t.hash);case"orphan":return new Ia(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,e){for(const r of this.#zt.values())if(r.subscriber===t){r.started&&r.subscriber.stop(),r.subscriber=e,r.started&&e.start(),null!=this.#qt&&e.pause(this.#qt);break}}async#oe(t,e){let r=await Da(t,this);return"event"===r.type&&e&&e.length>0&&!0===e[0].removed&&(r=await Da({orphan:"drop-log",log:e[0]},this)),this.#zt.get(r.tag)||null}async#ce(t){const e=await Da(t,this),r=e.tag;let n=this.#zt.get(r);if(!n){n={subscriber:this._getSubscriber(e),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#zt.set(r,n)}return n}async on(t,e){const r=await this.#ce(t);return r.listeners.push({listener:e,once:!1}),r.started||(r.subscriber.start(),r.started=!0,null!=this.#qt&&r.subscriber.pause(this.#qt)),this}async once(t,e){const r=await this.#ce(t);return r.listeners.push({listener:e,once:!0}),r.started||(r.subscriber.start(),r.started=!0,null!=this.#qt&&r.subscriber.pause(this.#qt)),this}async emit(t,...e){const r=await this.#oe(t,e);if(!r||0===r.listeners.length)return!1;const n=r.listeners.length;return r.listeners=r.listeners.filter((({listener:r,once:n})=>{const s=new ht(this,n?null:r,t);try{r.call(this,...e,s)}catch(t){}return!n})),0===r.listeners.length&&(r.started&&r.subscriber.stop(),this.#zt.delete(r.tag)),n>0}async listenerCount(t){if(t){const e=await this.#oe(t);return e?e.listeners.length:0}let e=0;for(const{listeners:t}of this.#zt.values())e+=t.length;return e}async listeners(t){if(t){const e=await this.#oe(t);return e?e.listeners.map((({listener:t})=>t)):[]}let e=[];for(const{listeners:t}of this.#zt.values())e=e.concat(t.map((({listener:t})=>t)));return e}async off(t,e){const r=await this.#oe(t);if(!r)return this;if(e){const t=r.listeners.map((({listener:t})=>t)).indexOf(e);t>=0&&r.listeners.splice(t,1)}return e&&0!==r.listeners.length||(r.started&&r.subscriber.stop(),this.#zt.delete(r.tag)),this}async removeAllListeners(t){if(t){const{tag:e,started:r,subscriber:n}=await this.#ce(t);r&&n.stop(),this.#zt.delete(e)}else for(const[t,{started:e,subscriber:r}]of this.#zt)e&&r.stop(),this.#zt.delete(t);return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return this.off(t,e)}get destroyed(){return this.#Jt}destroy(){this.removeAllListeners();for(const t of this.#te.keys())this._clearTimeout(t);this.#Jt=!0}get paused(){return null!=this.#qt}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(this.#Zt=-1,null!=this.#qt){if(this.#qt==!!t)return;k(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber((e=>e.pause(t))),this.#qt=!!t;for(const t of this.#te.values())t.timer&&clearTimeout(t.timer),t.time=Ga()-t.time}resume(){if(null!=this.#qt){this._forEachSubscriber((t=>t.resume())),this.#qt=null;for(const t of this.#te.values()){let e=t.time;e<0&&(e=0),t.time=Ga(),setTimeout(t.func,e)}}}}function ja(t,e){try{const r=Va(t,e);if(r)return mt(r)}catch(t){}return null}function Va(t,e){if("0x"===t)return null;try{const r=X(L(t,e,e+32)),n=X(L(t,r,r+32));return L(t,r+32,r+32+n)}catch(t){}return null}function Ka(t){const e=tt(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function Ha(t){if(t.length%32==0)return t;const e=new Uint8Array(32*Math.ceil(t.length/32));return e.set(t),e}const za=new Uint8Array([]);function qa(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(za),r+=32;for(let n=0;n<t.length;n++){const s=x(t[n]);e[n]=Ka(r),e.push(Ka(s.length)),e.push(Ha(s)),r+=32+32*Math.ceil(s.length/32)}return U(e)}const Ja="0x0000000000000000000000000000000000000000000000000000000000000000";function Wa(t,e){if(t.provider)return t.provider;k(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function Ya(t,e){let r=yi(e);if(null!=r.to&&(r.to=Br(r.to,t)),null!=r.from){const e=r.from;r.from=Promise.all([t.getAddress(),Br(e,t)]).then((([t,e])=>(E(t.toLowerCase()===e.toLowerCase(),"transaction from mismatch","tx.from",e),t)))}else r.from=t.getAddress();return await g(r)}class Xa{provider;constructor(t){m(this,{provider:t||null})}async getNonce(t){return Wa(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await Ya(this,t)}async populateTransaction(t){const e=Wa(this,"populateTransaction"),r=await Ya(this,t);null==r.nonce&&(r.nonce=await this.getNonce("pending")),null==r.gasLimit&&(r.gasLimit=await this.estimateGas(r));const n=await this.provider.getNetwork();if(null!=r.chainId){E(q(r.chainId)===n.chainId,"transaction chainId mismatch","tx.chainId",t.chainId)}else r.chainId=n.chainId;const s=null!=r.maxFeePerGas||null!=r.maxPriorityFeePerGas;if(null==r.gasPrice||2!==r.type&&!s?0!==r.type&&1!==r.type||!s||E(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t):E(!1,"eip-1559 transaction do not support gasPrice","tx",t),2!==r.type&&null!=r.type||null==r.maxFeePerGas||null==r.maxPriorityFeePerGas)if(0===r.type||1===r.type){const t=await e.getFeeData();k(null!=t.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==r.gasPrice&&(r.gasPrice=t.gasPrice)}else{const t=await e.getFeeData();if(null==r.type)if(null!=t.maxFeePerGas&&null!=t.maxPriorityFeePerGas)if(r.type=2,null!=r.gasPrice){const t=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=t,r.maxPriorityFeePerGas=t}else null==r.maxFeePerGas&&(r.maxFeePerGas=t.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=t.maxPriorityFeePerGas);else null!=t.gasPrice?(k(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==r.gasPrice&&(r.gasPrice=t.gasPrice),r.type=0):k(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else 2!==r.type&&3!==r.type||(null==r.maxFeePerGas&&(r.maxFeePerGas=t.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=t.maxPriorityFeePerGas))}else r.type=2;return await g(r)}async estimateGas(t){return Wa(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return Wa(this,"call").call(await this.populateCall(t))}async resolveName(t){const e=Wa(this,"resolveName");return await e.resolveName(t)}async sendTransaction(t){const e=Wa(this,"sendTransaction"),r=await this.populateTransaction(t);delete r.from;const n=Fn.from(r);return await e.broadcastTransaction(await this.signTransaction(n))}}class Za extends Xa{address;constructor(t,e){super(e),m(this,{address:t})}async getAddress(){return this.address}connect(t){return new Za(this.address,t)}#le(t,e){k(!1,`VoidSigner cannot sign ${t}`,"UNSUPPORTED_OPERATION",{operation:e})}async signTransaction(t){this.#le("transactions","signTransaction")}async signMessage(t){this.#le("messages","signMessage")}async signTypedData(t,e,r){this.#le("typed-data","signTypedData")}}const Qa=new Set;function to(t){Qa.has(t)||(Qa.add(t),console.log("========= NOTICE ========="),console.log(`Request-Rate Exceeded for ${t} (this message will not be repeated)`),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.org/api-keys/"),console.log("=========================="))}class eo{#Bt;#ue;#Dt;#jt;#he;#de;constructor(t){this.#Bt=t,this.#ue=null,this.#Dt=this.#Mt.bind(this),this.#jt=!1,this.#he=null,this.#de=!1}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,e){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}async#Mt(t){try{null==this.#ue&&(this.#ue=this._subscribe(this.#Bt));let t=null;try{t=await this.#ue}catch(t){if(!b(t,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==t.operation)throw t}if(null==t)return this.#ue=null,void this.#Bt._recoverSubscriber(this,this._recover(this.#Bt));const e=await this.#Bt.getNetwork();if(this.#he||(this.#he=e),this.#he.chainId!==e.chainId)throw new Error("chaid changed");if(this.#de)return;const r=await this.#Bt.send("eth_getFilterChanges",[t]);await this._emitResults(this.#Bt,r)}catch(t){console.log("@TODO",t)}this.#Bt.once("block",this.#Dt)}#fe(){const t=this.#ue;t&&(this.#ue=null,t.then((t=>{this.#Bt.destroyed||this.#Bt.send("eth_uninstallFilter",[t])})))}start(){this.#jt||(this.#jt=!0,this.#Mt(-2))}stop(){this.#jt&&(this.#jt=!1,this.#de=!0,this.#fe(),this.#Bt.off("block",this.#Dt))}pause(t){t&&this.#fe(),this.#Bt.off("block",this.#Dt)}resume(){this.start()}}class ro extends eo{#pe;constructor(t,e){var r;super(t),this.#pe=(r=e,JSON.parse(JSON.stringify(r)))}_recover(t){return new Ca(t,this.#pe)}async _subscribe(t){return await t.send("eth_newFilter",[this.#pe])}async _emitResults(t,e){for(const r of e)t.emit(this.#pe,t._wrapLog(r,t._network))}}class no extends eo{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,e){for(const r of e)t.emit("pending",r)}}const so="bigint,boolean,function,number,string,symbol".split(/,/g);function io(t){if(null==t||so.indexOf(typeof t)>=0)return t;if("function"==typeof t.getAddress)return t;if(Array.isArray(t))return t.map(io);if("object"==typeof t)return Object.keys(t).reduce(((e,r)=>(e[r]=t[r],e)),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function ao(t){return new Promise((e=>{setTimeout(e,t)}))}function oo(t){return t?t.toLowerCase():t}function co(t){return t&&"number"==typeof t.pollingInterval}const lo={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class uo extends Xa{address;constructor(t,e){super(t),m(this,{address:e=Ir(e)})}connect(t){k(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const e=io(t),r=[];if(e.from){const n=e.from;r.push((async()=>{const r=await Br(n,this.provider);E(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),e.from=r})())}else e.from=this.address;if(null==e.gasLimit&&r.push((async()=>{e.gasLimit=await this.provider.estimateGas({...e,from:this.address})})()),null!=e.to){const t=e.to;r.push((async()=>{e.to=await Br(t,this.provider)})())}r.length&&await Promise.all(r);const n=this.provider.getRpcTransaction(e);return this.provider.send("eth_sendTransaction",[n])}async sendTransaction(t){const e=await this.provider.getBlockNumber(),r=await this.sendUncheckedTransaction(t);return await new Promise(((t,n)=>{const s=[1e3,100];let i=0;const a=async()=>{try{const n=await this.provider.getTransaction(r);if(null!=n)return void t(n.replaceableTransaction(e))}catch(t){if(b(t,"CANCELLED")||b(t,"BAD_DATA")||b(t,"NETWORK_ERROR"))return null==t.info&&(t.info={}),t.info.sendTransactionHash=r,void n(t);if(b(t,"INVALID_ARGUMENT")&&(i++,null==t.info&&(t.info={}),t.info.sendTransactionHash=r,i>10))return void n(t);this.provider.emit("error",v("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:t}))}this.provider._setTimeout((()=>{a()}),s.pop()||4e3)};a()}))}async signTransaction(t){const e=io(t);if(e.from){const r=await Br(e.from,this.provider);E(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),e.from=r}else e.from=this.address;const r=this.provider.getRpcTransaction(e);return await this.provider.send("eth_signTransaction",[r])}async signMessage(t){const e="string"==typeof t?gt(t):t;return await this.provider.send("personal_sign",[_(e),this.address.toLowerCase()])}async signTypedData(t,e,r){const n=io(r),s=await is.resolveNames(t,e,n,(async t=>{const e=await Br(t);return E(null!=e,"TypedData does not support null address","value",t),e}));return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(is.getPayload(s.domain,e,s.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const e="string"==typeof t?gt(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),_(e)])}}class ho extends Ma{#q;#ge;#me;#ye;#be;#he;#we;#ve(){if(this.#ye)return;const t=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");this.#ye=setTimeout((()=>{this.#ye=null;const t=this.#me;for(this.#me=[];t.length;){const e=[t.shift()];for(;t.length&&e.length!==this.#q.batchMaxCount;){e.push(t.shift());if(JSON.stringify(e.map((t=>t.payload))).length>this.#q.batchMaxSize){t.unshift(e.pop());break}}(async()=>{const t=1===e.length?e[0].payload:e.map((t=>t.payload));this.emit("debug",{action:"sendRpcPayload",payload:t});try{const r=await this._send(t);this.emit("debug",{action:"receiveRpcResult",result:r});for(const{resolve:t,reject:n,payload:s}of e){if(this.destroyed){n(v("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:s.method}));continue}const e=r.filter((t=>t.id===s.id))[0];if(null!=e)"error"in e?n(this.getRpcError(s,e)):t(e.result);else{const t=v("missing response for request","BAD_DATA",{value:r,info:{payload:s}});this.emit("error",t),n(t)}}}catch(t){this.emit("debug",{action:"receiveRpcError",error:t});for(const{reject:r}of e)r(t)}})()}}),t)}constructor(t,e){super(t,e),this.#ge=1,this.#q=Object.assign({},lo,e||{}),this.#me=[],this.#ye=null,this.#he=null,this.#we=null;{let t=null;const e=new Promise((e=>{t=e}));this.#be={promise:e,resolve:t}}const r=this._getOption("staticNetwork");"boolean"==typeof r?(E(!r||"any"!==t,"staticNetwork cannot be used on special network 'any'","options",e),r&&null!=t&&(this.#he=Ea.from(t))):r&&(E(null==t||r.matches(t),"staticNetwork MUST match network object","options",e),this.#he=r)}_getOption(t){return this.#q[t]}get _network(){return k(this.#he,"network is not available yet","NETWORK_ERROR"),this.#he}async _perform(t){if("call"===t.method||"estimateGas"===t.method){let e=t.transaction;if(e&&null!=e.type&&q(e.type)&&null==e.maxFeePerGas&&null==e.maxPriorityFeePerGas){const r=await this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&(t=Object.assign({},t,{transaction:Object.assign({},e,{type:void 0})}))}}const e=this.getRpcRequest(t);return null!=e?await this.send(e.method,e.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t){if(!0!==t)return t;if(this.#he)return this.#he}return this.#we?await this.#we:this.ready?(this.#we=(async()=>{try{const t=Ea.from(q(await this.send("eth_chainId",[])));return this.#we=null,t}catch(t){throw this.#we=null,t}})(),await this.#we):(this.#we=(async()=>{const t={id:this.#ge++,method:"eth_chainId",params:[],jsonrpc:"2.0"};let e;this.emit("debug",{action:"sendRpcPayload",payload:t});try{e=(await this._send(t))[0],this.#we=null}catch(t){throw this.#we=null,this.emit("debug",{action:"receiveRpcError",error:t}),t}if(this.emit("debug",{action:"receiveRpcResult",result:e}),"result"in e)return Ea.from(q(e.result));throw this.getRpcError(t,e)})(),await this.#we)}_start(){null!=this.#be&&null!=this.#be.resolve&&(this.#be.resolve(),this.#be=null,(async()=>{for(;null==this.#he&&!this.destroyed;)try{this.#he=await this._detectNetwork()}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",v("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await ao(1e3)}this.#ve()})())}async _waitUntilReady(){if(null!=this.#be)return await this.#be.promise}_getSubscriber(t){return"pending"===t.type?new no(this):"event"===t.type?this._getOption("polling")?new Ca(this,t.filter):new ro(this,t.filter):"orphan"===t.type&&"drop-log"===t.filter.orphan?new La("orphan"):super._getSubscriber(t)}get ready(){return null==this.#be}getRpcTransaction(t){const e={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((r=>{if(null==t[r])return;let n=r;"gasLimit"===r&&(n="gas"),e[n]=et(q(t[r],`tx.${r}`))})),["from","to","data"].forEach((r=>{null!=t[r]&&(e[r]=_(t[r]))})),t.accessList&&(e.accessList=mn(t.accessList)),t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.map((t=>t.toLowerCase()))),e}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[oo(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[oo(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[oo(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[oo(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&null!=t.filter.address&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(oo):t.filter.address=oo(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,e){const{method:r}=t,{error:n}=e;if("eth_estimateGas"===r&&n.message){const e=n.message;if(!e.match(/revert/i)&&e.match(/insufficient funds/i))return v("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:n}})}if("eth_call"===r||"eth_estimateGas"===r){const e=go(n),s=ni.getBuiltinCallException("eth_call"===r?"call":"estimateGas",t.params[0],e?e.data:null);return s.info={error:n,payload:t},s}const s=JSON.stringify(function(t){const e=[];return mo(t,e),e}(n));if("string"==typeof n.message&&n.message.match(/user denied|ethers-user-denied/i)){return v("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[r]||"unknown",reason:"rejected",info:{payload:t,error:n}})}if("eth_sendRawTransaction"===r||"eth_sendTransaction"===r){const e=t.params[0];if(s.match(/insufficient funds|base fee exceeds gas limit/i))return v("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:e,info:{error:n}});if(s.match(/nonce/i)&&s.match(/too low/i))return v("nonce has already been used","NONCE_EXPIRED",{transaction:e,info:{error:n}});if(s.match(/replacement transaction/i)&&s.match(/underpriced/i))return v("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:e,info:{error:n}});if(s.match(/only replay-protected/i))return v("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:e,info:{error:n}}})}let i=!!s.match(/the method .* does not exist/i);return i||n&&n.details&&n.details.startsWith("Unauthorized method:")&&(i=!0),i?v("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:n,payload:t}}):v("could not coalesce error","UNKNOWN_ERROR",{error:n,payload:t})}send(t,e){if(this.destroyed)return Promise.reject(v("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const r=this.#ge++,n=new Promise(((n,s)=>{this.#me.push({resolve:n,reject:s,payload:{method:t,params:e,id:r,jsonrpc:"2.0"}})}));return this.#ve(),n}async getSigner(t){null==t&&(t=0);const e=this.send("eth_accounts",[]);if("number"==typeof t){const r=await e;if(t>=r.length)throw new Error("no such account");return new uo(this,r[t])}const{accounts:r}=await g({network:this.getNetwork(),accounts:e});t=Ir(t);for(const e of r)if(Ir(e)===t)return new uo(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map((t=>new uo(this,t)))}destroy(){this.#ye&&(clearTimeout(this.#ye),this.#ye=null);for(const{payload:t,reject:e}of this.#me)e(v("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));this.#me=[],super.destroy()}}class fo extends ho{#ke;constructor(t,e){super(t,e);let r=this._getOption("pollingInterval");null==r&&(r=lo.pollingInterval),this.#ke=r}_getSubscriber(t){const e=super._getSubscriber(t);return co(e)&&(e.pollingInterval=this.#ke),e}get pollingInterval(){return this.#ke}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");this.#ke=t,this._forEachSubscriber((t=>{co(t)&&(t.pollingInterval=this.#ke)}))}}class po extends fo{#Ee;constructor(t,e,r){null==t&&(t="http://localhost:8545"),super(e,r),this.#Ee="string"==typeof t?new At(t):t.clone()}_getConnection(){return this.#Ee.clone()}async send(t,e){return await this._start(),await super.send(t,e)}async _send(t){const e=this._getConnection();e.body=JSON.stringify(t),e.setHeader("content-type","application/json");const r=await e.send();r.assertOk();let n=r.bodyJson;return Array.isArray(n)||(n=[n]),n}}function go(t){if(null==t)return null;if("string"==typeof t.message&&t.message.match(/revert/i)&&I(t.data))return{message:t.message,data:t.data};if("object"==typeof t){for(const e in t){const r=go(t[e]);if(r)return r}return null}if("string"==typeof t)try{return go(JSON.parse(t))}catch(t){}return null}function mo(t,e){if(null!=t){if("string"==typeof t.message&&e.push(t.message),"object"==typeof t)for(const r in t)mo(t[r],e);if("string"==typeof t)try{return mo(JSON.parse(t),e)}catch(t){}}}const yo="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";class bo extends po{apiKey;constructor(t,e){null==t&&(t="mainnet");const r=Ea.from(t);null==e&&(e=yo);const n={polling:!0,staticNetwork:r};super(bo.getRequest(r,e),r,n),m(this,{apiKey:e})}_getProvider(t){try{return new bo(t,this.apiKey)}catch(t){}return super._getProvider(t)}static getRequest(t,e){null==e&&(e=yo);const r=new At(`https://${function(t){switch(t){case"mainnet":return"rpc.ankr.com/eth";case"goerli":return"rpc.ankr.com/eth_goerli";case"sepolia":return"rpc.ankr.com/eth_sepolia";case"arbitrum":return"rpc.ankr.com/arbitrum";case"base":return"rpc.ankr.com/base";case"base-goerli":return"rpc.ankr.com/base_goerli";case"base-sepolia":return"rpc.ankr.com/base_sepolia";case"bnb":return"rpc.ankr.com/bsc";case"bnbt":return"rpc.ankr.com/bsc_testnet_chapel";case"matic":return"rpc.ankr.com/polygon";case"matic-mumbai":return"rpc.ankr.com/polygon_mumbai";case"optimism":return"rpc.ankr.com/optimism";case"optimism-goerli":return"rpc.ankr.com/optimism_testnet";case"optimism-sepolia":return"rpc.ankr.com/optimism_sepolia"}E(!1,"unsupported network","network",t)}(t.name)}/${e}`);return r.allowGzip=!0,e===yo&&(r.retryFunc=async(t,e,r)=>(to("AnkrProvider"),!0)),r}getRpcError(t,e){return"eth_sendRawTransaction"===t.method&&e&&e.error&&"INTERNAL_ERROR: could not replace existing tx"===e.error.message&&(e.error.message="replacement transaction underpriced"),super.getRpcError(t,e)}isCommunityResource(){return this.apiKey===yo}}const wo="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class vo extends po{apiKey;constructor(t,e){null==t&&(t="mainnet");const r=Ea.from(t);null==e&&(e=wo);super(vo.getRequest(r,e),r,{staticNetwork:r}),m(this,{apiKey:e})}_getProvider(t){try{return new vo(t,this.apiKey)}catch(t){}return super._getProvider(t)}async _perform(t){if("getTransactionResult"===t.method){const{trace:e,tx:r}=await g({trace:this.send("trace_transaction",[t.hash]),tx:this.getTransaction(t.hash)});if(null==e||null==r)return null;let n,s=!1;try{n=e[0].result.output,s="Reverted"===e[0].error}catch(t){}if(n)return k(!s,"an error occurred during transaction executions","CALL_EXCEPTION",{action:"getTransactionResult",data:n,reason:null,transaction:r,invocation:null,revert:null}),n;k(!1,"could not parse trace result","BAD_DATA",{value:e})}return await super._perform(t)}isCommunityResource(){return this.apiKey===wo}static getRequest(t,e){null==e&&(e=wo);const r=new At(`https://${function(t){switch(t){case"mainnet":return"eth-mainnet.alchemyapi.io";case"goerli":return"eth-goerli.g.alchemy.com";case"sepolia":return"eth-sepolia.g.alchemy.com";case"arbitrum":return"arb-mainnet.g.alchemy.com";case"arbitrum-goerli":return"arb-goerli.g.alchemy.com";case"arbitrum-sepolia":return"arb-sepolia.g.alchemy.com";case"base":return"base-mainnet.g.alchemy.com";case"base-goerli":return"base-goerli.g.alchemy.com";case"base-sepolia":return"base-sepolia.g.alchemy.com";case"matic":return"polygon-mainnet.g.alchemy.com";case"matic-amoy":return"polygon-amoy.g.alchemy.com";case"matic-mumbai":return"polygon-mumbai.g.alchemy.com";case"optimism":return"opt-mainnet.g.alchemy.com";case"optimism-goerli":return"opt-goerli.g.alchemy.com";case"optimism-sepolia":return"opt-sepolia.g.alchemy.com"}E(!1,"unsupported network","network",t)}(t.name)}/v2/${e}`);return r.allowGzip=!0,e===wo&&(r.retryFunc=async(t,e,r)=>(to("alchemy"),!0)),r}}function ko(t){switch(t){case"mainnet":return"39f1d67cedf8b7831010a665328c9197";case"arbitrum":return"0550c209db33c3abf4cc927e1e18cea1";case"bnb":return"98b5a77e531614387366f6fc5da097f8";case"matic":return"cd9d4d70377471aa7c142ec4a4205249"}E(!1,"unsupported network","network",t)}class Eo extends po{apiKey;constructor(t,e){null==t&&(t="mainnet");const r=Ea.from(t);null==e&&(e=ko(r.name));super(Eo.getRequest(r,e),r,{staticNetwork:r}),m(this,{apiKey:e})}_getProvider(t){try{return new Eo(t,this.apiKey)}catch(t){}return super._getProvider(t)}isCommunityResource(){return this.apiKey===ko(this._network.name)}static getRequest(t,e){null==e&&(e=ko(t.name));const r=new At(`https://${function(t){switch(t){case"mainnet":return"ethereum-mainnet.core.chainstack.com";case"arbitrum":return"arbitrum-mainnet.core.chainstack.com";case"bnb":return"bsc-mainnet.core.chainstack.com";case"matic":return"polygon-mainnet.core.chainstack.com"}E(!1,"unsupported network","network",t)}(t.name)}/${e}`);return r.allowGzip=!0,e===ko(t.name)&&(r.retryFunc=async(t,e,r)=>(to("ChainstackProvider"),!0)),r}}class No extends po{constructor(t){null==t&&(t="mainnet");const e=Ea.from(t);E("mainnet"===e.name,"unsupported network","network",t),super("https://cloudflare-eth.com/",e,{staticNetwork:e})}}const Po="org.ethers.plugins.provider.Etherscan";class Ro extends ma{baseUrl;constructor(t){super(Po),m(this,{baseUrl:t})}clone(){return new Ro(this.baseUrl)}}const To=["enableCcipRead"];let Oo=1;class xo extends Ma{network;apiKey;#Ne;constructor(t,e){const r=null!=e?e:null;super();const n=Ea.from(t);this.#Ne=n.getPlugin(Po),m(this,{apiKey:r,network:n}),this.getBaseUrl()}getBaseUrl(){if(this.#Ne)return this.#Ne.baseUrl;switch(this.network.name){case"mainnet":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"holesky":return"https://api-holesky.etherscan.io";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"base":return"https://api.basescan.org";case"base-sepolia":return"https://api-sepolia.basescan.org";case"bnb":return"https://api.bscscan.com";case"bnbt":return"https://api-testnet.bscscan.com";case"matic":return"https://api.polygonscan.com";case"matic-amoy":return"https://api-amoy.polygonscan.com";case"matic-mumbai":return"https://api-testnet.polygonscan.com";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}E(!1,"unsupported network","network",this.network)}getUrl(t,e){const r=Object.keys(e).reduce(((t,r)=>{const n=e[r];return null!=n&&(t+=`&${r}=${n}`),t}),""),n=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.getBaseUrl()}/api?module=${t}${r}${n}`}getPostUrl(){return`${this.getBaseUrl()}/api`}getPostData(t,e){return e.module=t,e.apikey=this.apiKey,e}async detectNetwork(){return this.network}async fetch(t,e,r){const n=Oo++,s=r?this.getPostUrl():this.getUrl(t,e),i=r?this.getPostData(t,e):null;this.emit("debug",{action:"sendRequest",id:n,url:s,payload:i});const a=new At(s);a.setThrottleParams({slotInterval:1e3}),a.retryFunc=(t,e,r)=>(this.isCommunityResource()&&to("Etherscan"),Promise.resolve(!0)),a.processFunc=async(e,r)=>{const s=r.hasBody()?JSON.parse(mt(r.body)):{},i=("string"==typeof s.result?s.result:"").toLowerCase().indexOf("rate limit")>=0;return"proxy"===t?s&&0==s.status&&"NOTOK"==s.message&&i&&(this.emit("debug",{action:"receiveError",id:n,reason:"proxy-NOTOK",error:s}),r.throwThrottleError(s.result,2e3)):i&&(this.emit("debug",{action:"receiveError",id:n,reason:"null result",error:s.result}),r.throwThrottleError(s.result,2e3)),r},i&&(a.setHeader("content-type","application/x-www-form-urlencoded; charset=UTF-8"),a.body=Object.keys(i).map((t=>`${t}=${i[t]}`)).join("&"));const o=await a.send();try{o.assertOk()}catch(t){this.emit("debug",{action:"receiveError",id:n,error:t,reason:"assertOk"}),k(!1,"response error","SERVER_ERROR",{request:a,response:o})}o.hasBody()||(this.emit("debug",{action:"receiveError",id:n,error:"missing body",reason:"null body"}),k(!1,"missing response","SERVER_ERROR",{request:a,response:o}));const c=JSON.parse(mt(o.body));return"proxy"===t?("2.0"!=c.jsonrpc&&(this.emit("debug",{action:"receiveError",id:n,result:c,reason:"invalid JSON-RPC"}),k(!1,"invalid JSON-RPC response (missing jsonrpc='2.0')","SERVER_ERROR",{request:a,response:o,info:{result:c}})),c.error&&(this.emit("debug",{action:"receiveError",id:n,result:c,reason:"JSON-RPC error"}),k(!1,"error response","SERVER_ERROR",{request:a,response:o,info:{result:c}})),this.emit("debug",{action:"receiveRequest",id:n,result:c}),c.result):0!=c.status||"No records found"!==c.message&&"No transactions found"!==c.message?((1!=c.status||"string"==typeof c.message&&!c.message.match(/^OK/))&&(this.emit("debug",{action:"receiveError",id:n,result:c}),k(!1,"error response","SERVER_ERROR",{request:a,response:o,info:{result:c}})),this.emit("debug",{action:"receiveRequest",id:n,result:c}),c.result):(this.emit("debug",{action:"receiveRequest",id:n,result:c}),c.result)}_getTransactionPostData(t){const e={};for(let r in t){if(To.indexOf(r)>=0)continue;if(null==t[r])continue;let n=t[r];if(("type"!==r||0!==n)&&("blockTag"!==r||"latest"!==n)){if({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r])n=et(n);else if("accessList"===r)n="["+mn(n).map((t=>`{address:"${t.address}",storageKeys:["${t.storageKeys.join('","')}"]}`)).join(",")+"]";else if("blobVersionedHashes"===r){if(0===n.length)continue;k(!1,"Etherscan API does not support blobVersionedHashes","UNSUPPORTED_OPERATION",{operation:"_getTransactionPostData",info:{transaction:t}})}else n=_(n);e[r]=n}}return e}_checkError(t,e,r){let n="";if(b(e,"SERVER_ERROR")){try{n=e.info.result.error.message}catch(t){}if(!n)try{n=e.info.message}catch(t){}}if("estimateGas"===t.method&&!n.match(/revert/i)&&n.match(/insufficient funds/i)&&k(!1,"insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.transaction}),("call"===t.method||"estimateGas"===t.method)&&n.match(/execution reverted/i)){let r="";try{r=e.info.result.error.data}catch(e){}const n=ni.getBuiltinCallException(t.method,t.transaction,r);throw n.info={request:t,error:e},n}if(n&&"broadcastTransaction"===t.method){const e=Fn.from(t.signedTransaction);n.match(/replacement/i)&&n.match(/underpriced/i)&&k(!1,"replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:e}),n.match(/insufficient funds/)&&k(!1,"insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:e}),n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&k(!1,"nonce has already been used","NONCE_EXPIRED",{transaction:e})}throw e}async _detectNetwork(){return this.network}async _perform(t){switch(t.method){case"chainId":return this.network.chainId;case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getPriorityFee":if("mainnet"===this.network.name)return"1000000000";if("optimism"===this.network.name)return"1000000";throw new Error("fallback onto the AbstractProvider default");case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorage":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"broadcastTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch((e=>this._checkError(t,e,t.signedTransaction)));case"getBlock":if("blockTag"in t)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});k(!1,"getBlock by blockHash not supported by Etherscan","UNSUPPORTED_OPERATION",{operation:"getBlock(blockHash)"});case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.hash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.hash});case"call":{if("latest"!==t.blockTag)throw new Error("EtherscanProvider does not support blockTag for call");const e=this._getTransactionPostData(t.transaction);e.module="proxy",e.action="eth_call";try{return await this.fetch("proxy",e,!0)}catch(e){return this._checkError(t,e,t.transaction)}}case"estimateGas":{const e=this._getTransactionPostData(t.transaction);e.module="proxy",e.action="eth_estimateGas";try{return await this.fetch("proxy",e,!0)}catch(e){return this._checkError(t,e,t.transaction)}}}return super._perform(t)}async getNetwork(){return this.network}async getEtherPrice(){return"mainnet"!==this.network.name?0:parseFloat((await this.fetch("stats",{action:"ethprice"})).ethusd)}async getContract(t){let e=this._getAddress(t);var r;(r=e)&&"function"==typeof r.then&&(e=await e);try{const t=await this.fetch("contract",{action:"getabi",address:e}),r=JSON.parse(t);return new Zi(e,r,this)}catch(t){return null}}isCommunityResource(){return null==this.apiKey}}const Ao=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==be)return be;throw new Error("unable to locate global object")}().WebSocket;class Io{#Bt;#xt;get filter(){return JSON.parse(this.#xt)}#Pe;#Re;#Te;constructor(t,e){this.#Bt=t,this.#xt=JSON.stringify(e),this.#Pe=null,this.#Re=null,this.#Te=null}start(){this.#Pe=this.#Bt.send("eth_subscribe",this.filter).then((t=>(this.#Bt._register(t,this),t)))}stop(){this.#Pe.then((t=>{this.#Bt.destroyed||this.#Bt.send("eth_unsubscribe",[t])})),this.#Pe=null}pause(t){k(t,"preserve logs while paused not supported by SocketSubscriber yet","UNSUPPORTED_OPERATION",{operation:"pause(false)"}),this.#Re=!!t}resume(){this.#Re=null}_handleMessage(t){if(null!=this.#Pe&&null===this.#Re){let e=this.#Te;e=null==e?this._emit(this.#Bt,t):e.then((async()=>{await this._emit(this.#Bt,t)})),this.#Te=e.then((()=>{this.#Te===e&&(this.#Te=null)}))}}async _emit(t,e){throw new Error("sub-classes must implemente this; _emit")}}class So extends Io{constructor(t){super(t,["newHeads"])}async _emit(t,e){t.emit("block",parseInt(e.number))}}class Co extends Io{constructor(t){super(t,["newPendingTransactions"])}async _emit(t,e){t.emit("pending",e)}}class _o extends Io{#Oe;get logFilter(){return JSON.parse(this.#Oe)}constructor(t,e){super(t,["logs",e]),this.#Oe=JSON.stringify(e)}async _emit(t,e){t.emit(this.logFilter,t._wrapLog(e,t._network))}}class Uo extends ho{#xe;#zt;#Ae;constructor(t,e){const r=Object.assign({},null!=e?e:{});E(null==r.batchMaxCount||1===r.batchMaxCount,"sockets-based providers do not support batches","options.batchMaxCount",e),r.batchMaxCount=1,null==r.staticNetwork&&(r.staticNetwork=!0),super(t,r),this.#xe=new Map,this.#zt=new Map,this.#Ae=new Map}_getSubscriber(t){switch(t.type){case"close":return new La("close");case"block":return new So(this);case"pending":return new Co(this);case"event":return new _o(this,t.filter);case"orphan":if("drop-log"===t.filter.orphan)return new La("drop-log")}return super._getSubscriber(t)}_register(t,e){this.#zt.set(t,e);const r=this.#Ae.get(t);if(r){for(const t of r)e._handleMessage(t);this.#Ae.delete(t)}}async _send(t){E(!Array.isArray(t),"WebSocket does not support batch send","payload",t);const e=new Promise(((e,r)=>{this.#xe.set(t.id,{payload:t,resolve:e,reject:r})}));return await this._waitUntilReady(),await this._write(JSON.stringify(t)),[await e]}async _processMessage(t){const e=JSON.parse(t);if(e&&"object"==typeof e&&"id"in e){const t=this.#xe.get(e.id);if(null==t)return void this.emit("error",v("received result for unknown id","UNKNOWN_ERROR",{reasonCode:"UNKNOWN_ID",result:e}));this.#xe.delete(e.id),t.resolve(e)}else{if(!e||"eth_subscription"!==e.method)return void this.emit("error",v("received unexpected message","UNKNOWN_ERROR",{reasonCode:"UNEXPECTED_MESSAGE",result:e}));{const t=e.params.subscription,r=this.#zt.get(t);if(r)r._handleMessage(e.params.result);else{let r=this.#Ae.get(t);null==r&&(r=[],this.#Ae.set(t,r)),r.push(e.params.result)}}}}async _write(t){throw new Error("sub-classes must override this")}}class Fo extends Uo{#Ee;#Ie;get websocket(){if(null==this.#Ie)throw new Error("websocket closed");return this.#Ie}constructor(t,e,r){super(e,r),"string"==typeof t?(this.#Ee=()=>new Ao(t),this.#Ie=this.#Ee()):"function"==typeof t?(this.#Ee=t,this.#Ie=t()):(this.#Ee=null,this.#Ie=t),this.websocket.onopen=async()=>{try{await this._start(),this.resume()}catch(t){console.log("failed to start WebsocketProvider",t)}},this.websocket.onmessage=t=>{this._processMessage(t.data)}}async _write(t){this.websocket.send(t)}async destroy(){null!=this.#Ie&&(this.#Ie.close(),this.#Ie=null),super.destroy()}}const Lo="84842078b09946638c03157f83405213";class Bo extends Fo{projectId;projectSecret;constructor(t,e){const r=new Do(t,e),n=r._getConnection();k(!n.credentials,"INFURA WebSocket project secrets unsupported","UNSUPPORTED_OPERATION",{operation:"InfuraProvider.getWebSocketProvider()"});super(n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/"),r._network),m(this,{projectId:r.projectId,projectSecret:r.projectSecret})}isCommunityResource(){return this.projectId===Lo}}class Do extends po{projectId;projectSecret;constructor(t,e,r){null==t&&(t="mainnet");const n=Ea.from(t);null==e&&(e=Lo),null==r&&(r=null);super(Do.getRequest(n,e,r),n,{staticNetwork:n}),m(this,{projectId:e,projectSecret:r})}_getProvider(t){try{return new Do(t,this.projectId,this.projectSecret)}catch(t){}return super._getProvider(t)}isCommunityResource(){return this.projectId===Lo}static getWebSocketProvider(t,e){return new Bo(t,e)}static getRequest(t,e,r){null==e&&(e=Lo),null==r&&(r=null);const n=new At(`https://${function(t){switch(t){case"mainnet":return"mainnet.infura.io";case"goerli":return"goerli.infura.io";case"sepolia":return"sepolia.infura.io";case"arbitrum":return"arbitrum-mainnet.infura.io";case"arbitrum-goerli":return"arbitrum-goerli.infura.io";case"arbitrum-sepolia":return"arbitrum-sepolia.infura.io";case"base":return"base-mainnet.infura.io";case"base-goerlia":return"base-goerli.infura.io";case"base-sepolia":return"base-sepolia.infura.io";case"bnb":return"bnbsmartchain-mainnet.infura.io";case"bnbt":return"bnbsmartchain-testnet.infura.io";case"linea":return"linea-mainnet.infura.io";case"linea-goerli":return"linea-goerli.infura.io";case"linea-sepolia":return"linea-sepolia.infura.io";case"matic":return"polygon-mainnet.infura.io";case"matic-amoy":return"polygon-amoy.infura.io";case"matic-mumbai":return"polygon-mumbai.infura.io";case"optimism":return"optimism-mainnet.infura.io";case"optimism-goerli":return"optimism-goerli.infura.io";case"optimism-sepolia":return"optimism-sepolia.infura.io"}E(!1,"unsupported network","network",t)}(t.name)}/v3/${e}`);return n.allowGzip=!0,r&&n.setCredentials("",r),e===Lo&&(n.retryFunc=async(t,e,r)=>(to("InfuraProvider"),!0)),n}}const Go="919b412a057b5e9c9b6dce193c5a60242d6efadb";class $o extends po{token;constructor(t,e){null==t&&(t="mainnet");const r=Ea.from(t);null==e&&(e=Go);super($o.getRequest(r,e),r,{staticNetwork:r}),m(this,{token:e})}_getProvider(t){try{return new $o(t,this.token)}catch(t){}return super._getProvider(t)}isCommunityResource(){return this.token===Go}static getRequest(t,e){null==e&&(e=Go);const r=new At(`https://${function(t){switch(t){case"mainnet":return"ethers.quiknode.pro";case"goerli":return"ethers.ethereum-goerli.quiknode.pro";case"sepolia":return"ethers.ethereum-sepolia.quiknode.pro";case"holesky":return"ethers.ethereum-holesky.quiknode.pro";case"arbitrum":return"ethers.arbitrum-mainnet.quiknode.pro";case"arbitrum-goerli":return"ethers.arbitrum-goerli.quiknode.pro";case"arbitrum-sepolia":return"ethers.arbitrum-sepolia.quiknode.pro";case"base":return"ethers.base-mainnet.quiknode.pro";case"base-goerli":return"ethers.base-goerli.quiknode.pro";case"base-spolia":return"ethers.base-sepolia.quiknode.pro";case"bnb":return"ethers.bsc.quiknode.pro";case"bnbt":return"ethers.bsc-testnet.quiknode.pro";case"matic":return"ethers.matic.quiknode.pro";case"matic-mumbai":return"ethers.matic-testnet.quiknode.pro";case"optimism":return"ethers.optimism.quiknode.pro";case"optimism-goerli":return"ethers.optimism-goerli.quiknode.pro";case"optimism-sepolia":return"ethers.optimism-sepolia.quiknode.pro";case"xdai":return"ethers.xdai.quiknode.pro"}E(!1,"unsupported network","network",t)}(t.name)}/${e}`);return r.allowGzip=!0,e===Go&&(r.retryFunc=async(t,e,r)=>(to("QuickNodeProvider"),!0)),r}}const Mo=BigInt("1"),jo=BigInt("2");function Vo(){return(new Date).getTime()}function Ko(t){return JSON.stringify(t,((t,e)=>"bigint"==typeof e?{type:"bigint",value:e.toString()}:e))}const Ho={stallTimeout:400,priority:1,weight:1},zo={blockNumber:-2,requests:0,lateResponses:0,errorResponses:0,outOfSync:-1,unsupportedEvents:0,rollingDuration:0,score:0,_network:null,_updateNumber:null,_totalTime:0,_lastFatalError:null,_lastFatalErrorTimestamp:0};function qo(t){if(null==t)return"null";if(Array.isArray(t))return"["+t.map(qo).join(",")+"]";if("object"==typeof t&&"function"==typeof t.toJSON)return qo(t.toJSON());switch(typeof t){case"boolean":case"symbol":return t.toString();case"bigint":case"number":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const e=Object.keys(t);return e.sort(),"{"+e.map((e=>`${JSON.stringify(e)}:${qo(t[e])}`)).join(",")+"}"}}throw console.log("Could not serialize",t),new Error("Hmm...")}function Jo(t){if("error"in t){const e=t.error;return{tag:qo(e),value:e}}const e=t.result;return{tag:qo(e),value:e}}function Wo(t,e){const r=new Map;for(const{value:t,tag:n,weight:s}of e){const e=r.get(n)||{value:t,weight:0};e.weight+=s,r.set(n,e)}let n=null;for(const e of r.values())e.weight>=t&&(!n||e.weight>n.weight)&&(n=e);if(n)return n.value}function Yo(t,e){let r=0;const n=new Map;let s=null;const i=[];for(const{value:t,tag:a,weight:o}of e)if(t instanceof Error){const e=n.get(a)||{value:t,weight:0};e.weight+=o,n.set(a,e),(null==s||e.weight>s.weight)&&(s=e)}else i.push(BigInt(t)),r+=o;if(r<t)return s&&s.weight>=t?s.value:void 0;i.sort(((t,e)=>t<e?-1:e>t?1:0));const a=Math.floor(i.length/2);return i.length%2?i[a]:(i[a-1]+i[a]+Mo)/jo}function Xo(t,e){const r=Wo(t,e);if(void 0!==r)return r;for(const t of e)if(t.value)return t.value}class Zo extends Ma{quorum;eventQuorum;eventWorkers;#Se;#Ce;#_e;constructor(t,e,r){super(e,r),this.#Se=t.map((t=>t instanceof Ma?Object.assign({provider:t},Ho,zo):Object.assign({},Ho,t,zo))),this.#Ce=-2,this.#_e=null,r&&null!=r.quorum?this.quorum=r.quorum:this.quorum=Math.ceil(this.#Se.reduce(((t,e)=>t+=e.weight),0)/2),this.eventQuorum=1,this.eventWorkers=1,E(this.quorum<=this.#Se.reduce(((t,e)=>t+e.weight),0),"quorum exceed provider weight","quorum",this.quorum)}get providerConfigs(){return this.#Se.map((t=>{const e=Object.assign({},t);for(const t in e)"_"===t[0]&&delete e[t];return e}))}async _detectNetwork(){return Ea.from(q(await this._perform({method:"chainId"})))}async _translatePerform(t,e){switch(e.method){case"broadcastTransaction":return await t.broadcastTransaction(e.signedTransaction);case"call":return await t.call(Object.assign({},e.transaction,{blockTag:e.blockTag}));case"chainId":return(await t.getNetwork()).chainId;case"estimateGas":return await t.estimateGas(e.transaction);case"getBalance":return await t.getBalance(e.address,e.blockTag);case"getBlock":{const r="blockHash"in e?e.blockHash:e.blockTag;return await t.getBlock(r,e.includeTransactions)}case"getBlockNumber":return await t.getBlockNumber();case"getCode":return await t.getCode(e.address,e.blockTag);case"getGasPrice":return(await t.getFeeData()).gasPrice;case"getPriorityFee":return(await t.getFeeData()).maxPriorityFeePerGas;case"getLogs":return await t.getLogs(e.filter);case"getStorage":return await t.getStorage(e.address,e.position,e.blockTag);case"getTransaction":return await t.getTransaction(e.hash);case"getTransactionCount":return await t.getTransactionCount(e.address,e.blockTag);case"getTransactionReceipt":return await t.getTransactionReceipt(e.hash);case"getTransactionResult":return await t.getTransactionResult(e.hash)}}#Ue(t){const e=Array.from(t).map((t=>t.config)),r=this.#Se.slice();!function(t){for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}}(r),r.sort(((t,e)=>t.priority-e.priority));for(const t of r)if(!t._lastFatalError&&-1===e.indexOf(t))return t;return null}#Fe(t,e){const r=this.#Ue(t);if(null==r)return null;const n={config:r,result:null,didBump:!1,perform:null,staller:null},s=Vo();return n.perform=(async()=>{try{r.requests++;const t=await this._translatePerform(r.provider,e);n.result={result:t}}catch(t){r.errorResponses++,n.result={error:t}}const t=Vo()-s;r._totalTime+=t,r.rollingDuration=.95*r.rollingDuration+.05*t,n.perform=null})(),n.staller=(async()=>{var t;await(t=r.stallTimeout,new Promise((e=>{setTimeout(e,t)}))),n.staller=null})(),t.add(n),n}async#Le(){let t=this.#_e;if(!t){const e=[];this.#Se.forEach((t=>{e.push((async()=>{await async function(t,e){for(;(t.blockNumber<0||t.blockNumber<e)&&(t._updateNumber||(t._updateNumber=(async()=>{try{const e=await t.provider.getBlockNumber();e>t.blockNumber&&(t.blockNumber=e)}catch(e){t.blockNumber=-2,t._lastFatalError=e,t._lastFatalErrorTimestamp=Vo()}t._updateNumber=null})()),await t._updateNumber,t.outOfSync++,!t._lastFatalError););}(t,0),t._lastFatalError||(t._network=await t.provider.getNetwork())})())})),this.#_e=t=(async()=>{await Promise.all(e);let t=null;for(const e of this.#Se){if(e._lastFatalError)continue;const r=e._network;null==t?t=r.chainId:r.chainId!==t&&k(!1,"cannot mix providers on different networks","UNSUPPORTED_OPERATION",{operation:"new FallbackProvider"})}})()}await t}async#Be(t,e){const r=[];for(const e of t)if(null!=e.result){const{tag:t,value:n}=Jo(e.result);r.push({tag:t,value:n,weight:e.config.weight})}if(!(r.reduce(((t,e)=>t+e.weight),0)<this.quorum)){switch(e.method){case"getBlockNumber":{-2===this.#Ce&&(this.#Ce=Math.ceil(X(Yo(this.quorum,this.#Se.filter((t=>!t._lastFatalError)).map((t=>({value:t.blockNumber,tag:X(t.blockNumber).toString(),weight:t.weight})))))));const t=function(t,e){if(1===t)return X(Yo(t,e),"%internal");const r=new Map,n=(t,e)=>{const n=r.get(t)||{result:t,weight:0};n.weight+=e,r.set(t,n)};for(const{weight:t,value:r}of e){const e=X(r);n(e-1,t),n(e,t),n(e+1,t)}let s,i=0;for(const{weight:e,result:n}of r.values())e>=t&&(e>i||null!=s&&e===i&&n>s)&&(i=e,s=n);return s}(this.quorum,r);if(void 0===t)return;return t>this.#Ce&&(this.#Ce=t),this.#Ce}case"getGasPrice":case"getPriorityFee":case"estimateGas":return Yo(this.quorum,r);case"getBlock":return"blockTag"in e&&"pending"===e.blockTag?Xo(this.quorum,r):Wo(this.quorum,r);case"call":case"chainId":case"getBalance":case"getTransactionCount":case"getCode":case"getStorage":case"getTransaction":case"getTransactionReceipt":case"getLogs":return Wo(this.quorum,r);case"broadcastTransaction":return Xo(this.quorum,r)}k(!1,"unsupported method","UNSUPPORTED_OPERATION",{operation:`_perform(${Ko(e.method)})`})}}async#De(t,e){if(0===t.size)throw new Error("no runners?!");const r=[];let n=0;for(const e of t)e.perform&&r.push(e.perform),e.staller?r.push(e.staller):e.didBump||(e.didBump=!0,n++);const s=await this.#Be(t,e);if(void 0!==s){if(s instanceof Error)throw s;return s}for(let r=0;r<n;r++)this.#Fe(t,e);return k(r.length>0,"quorum not met","SERVER_ERROR",{request:"%sub-requests",info:{request:e,results:Array.from(t).map((t=>Ko(t.result)))}}),await Promise.race(r),await this.#De(t,e)}async _perform(t){if("broadcastTransaction"===t.method){const e=this.#Se.map((t=>null)),r=this.#Se.map((async({provider:r,weight:n},s)=>{try{const i=await r._perform(t);e[s]=Object.assign(Jo({result:i}),{weight:n})}catch(t){e[s]=Object.assign(Jo({error:t}),{weight:n})}}));for(;;){const t=e.filter((t=>null!=t));for(const{value:e}of t)if(!(e instanceof Error))return e;const n=Wo(this.quorum,e.filter((t=>null!=t)));if(b(n,"INSUFFICIENT_FUNDS"))throw n;const s=r.filter(((t,r)=>null==e[r]));if(0===s.length)break;await Promise.race(s)}const n=Xo(this.quorum,e);if(k(void 0!==n,"problem multi-broadcasting","SERVER_ERROR",{request:"%sub-requests",info:{request:t,results:e.map(Ko)}}),n instanceof Error)throw n;return n}await this.#Le();const e=new Set;let r=0;for(;;){const n=this.#Fe(e,t);if(null==n)break;if(r+=n.config.weight,r>=this.quorum)break}const n=await this.#De(e,t);for(const t of e)t.perform&&null==t.result&&t.config.lateResponses++;return n}async destroy(){for(const{provider:t}of this.#Se)t.destroy();super.destroy()}}const Qo="goerli kovan sepolia classicKotti optimism-goerli arbitrum-goerli matic-mumbai bnbt".split(" ");function tc(t,e){null==e&&(e={});const r=t=>"-"!==e[t]&&("string"==typeof e.exclusive?t===e.exclusive:!Array.isArray(e.exclusive)||-1!==e.exclusive.indexOf(t));if("string"==typeof t&&t.match(/^https?:/))return new po(t);if("string"==typeof t&&t.match(/^wss?:/)||(n=t)&&"function"==typeof n.send&&"function"==typeof n.close)return new Fo(t);var n;let s=null;try{s=Ea.from(t)}catch(t){}const i=[];if(r("publicPolygon")&&s&&("matic"===s.name?i.push(new po("https://polygon-rpc.com/",s,{staticNetwork:s})):"matic-amoy"===s.name&&i.push(new po("https://rpc-amoy.polygon.technology/",s,{staticNetwork:s}))),r("alchemy"))try{i.push(new vo(t,e.alchemy))}catch(t){}if(r("ankr")&&null!=e.ankr)try{i.push(new bo(t,e.ankr))}catch(t){}if(r("chainstack"))try{i.push(new Eo(t,e.chainstack))}catch(t){}if(r("cloudflare"))try{i.push(new No(t))}catch(t){}if(r("etherscan"))try{i.push(new xo(t,e.etherscan))}catch(t){}if(r("infura"))try{let r,n=e.infura;"object"==typeof n&&(r=n.projectSecret,n=n.projectId),i.push(new Do(t,n,r))}catch(t){}if(r("quicknode"))try{let r=e.quicknode;i.push(new $o(t,r))}catch(t){}if(k(i.length,"unsupported default network","UNSUPPORTED_OPERATION",{operation:"getDefaultProvider"}),1===i.length)return i[0];let a=Math.floor(i.length/2);return a>2&&(a=2),s&&-1!==Qo.indexOf(s.name)&&(a=1),e&&e.quorum&&(a=e.quorum),new Zo(i,void 0,{quorum:a})}class ec extends Xa{signer;#Ge;#$e;constructor(t){super(t.provider),m(this,{signer:t}),this.#Ge=null,this.#$e=0}async getAddress(){return this.signer.getAddress()}connect(t){return new ec(this.signer.connect(t))}async getNonce(t){if("pending"===t){null==this.#Ge&&(this.#Ge=super.getNonce("pending"));const t=this.#$e;return await this.#Ge+t}return super.getNonce(t)}increment(){this.#$e++}reset(){this.#$e=0,this.#Ge=null}async sendTransaction(t){const e=this.getNonce("pending");return this.increment(),(t=await this.signer.populateTransaction(t)).nonce=await e,await this.signer.sendTransaction(t)}signTransaction(t){return this.signer.signTransaction(t)}signMessage(t){return this.signer.signMessage(t)}signTypedData(t,e,r){return this.signer.signTypedData(t,e,r)}}class rc extends fo{#k;constructor(t,e,r){const n=Object.assign({},null!=r?r:{},{batchMaxCount:1});E(t&&t.request,"invalid EIP-1193 provider","ethereum",t),super(e,n),this.#k=async(e,r)=>{const n={method:e,params:r};this.emit("debug",{action:"sendEip1193Request",payload:n});try{const e=await t.request(n);return this.emit("debug",{action:"receiveEip1193Result",result:e}),e}catch(t){const e=new Error(t.message);throw e.code=t.code,e.data=t.data,e.payload=n,this.emit("debug",{action:"receiveEip1193Error",error:e}),e}}}async send(t,e){return await this._start(),await super.send(t,e)}async _send(t){E(!Array.isArray(t),"EIP-1193 does not support batch request","payload",t);try{const e=await this.#k(t.method,t.params||[]);return[{id:t.id,result:e}]}catch(e){return[{id:t.id,error:{code:e.code,data:e.data,message:e.message}}]}}getRpcError(t,e){switch((e=JSON.parse(JSON.stringify(e))).error.code||-1){case 4001:e.error.message=`ethers-user-denied: ${e.error.message}`;break;case 4200:e.error.message=`ethers-unsupported: ${e.error.message}`}return super.getRpcError(t,e)}async hasSigner(t){null==t&&(t=0);const e=await this.send("eth_accounts",[]);return"number"==typeof t?e.length>t:(t=t.toLowerCase(),0!==e.filter((e=>e.toLowerCase()===t)).length)}async getSigner(t){if(null==t&&(t=0),!await this.hasSigner(t))try{await this.#k("eth_requestAccounts",[])}catch(t){const e=t.payload;throw this.getRpcError(e,{id:e.id,error:t})}return await super.getSigner(t)}}const nc="62e1ad51b37b8e00394bda3b";class sc extends po{applicationId;applicationSecret;constructor(t,e,r){null==t&&(t="mainnet");const n=Ea.from(t);null==e&&(e=nc),null==r&&(r=null);const s={staticNetwork:n};super(sc.getRequest(n,e,r),n,s),m(this,{applicationId:e,applicationSecret:r})}_getProvider(t){try{return new sc(t,this.applicationId,this.applicationSecret)}catch(t){}return super._getProvider(t)}static getRequest(t,e,r){null==e&&(e=nc);const n=new At(`https://${function(t){switch(t){case"mainnet":return"eth-mainnet.gateway.pokt.network";case"goerli":return"eth-goerli.gateway.pokt.network";case"matic":return"poly-mainnet.gateway.pokt.network";case"matic-mumbai":return"polygon-mumbai-rpc.gateway.pokt.network"}E(!1,"unsupported network","network",t)}(t.name)}/v1/lb/${e}`);return n.allowGzip=!0,r&&n.setCredentials("",r),e===nc&&(n.retryFunc=async(t,e,r)=>(to("PocketProvider"),!0)),n}isCommunityResource(){return this.applicationId===nc}}const ic=void 0;class ac extends Xa{address;#Me;constructor(t,e){super(e),E(t&&"function"==typeof t.sign,"invalid private key","privateKey","[ REDACTED ]"),this.#Me=t;m(this,{address:yn(this.signingKey.publicKey)})}get signingKey(){return this.#Me}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(t){return new ac(this.#Me,t)}async signTransaction(t){t=yi(t);const{to:e,from:r}=await g({to:t.to?Br(t.to,this.provider):void 0,from:t.from?Br(t.from,this.provider):void 0});null!=e&&(t.to=e),null!=r&&(t.from=r),null!=t.from&&(E(Ir(t.from)===this.address,"transaction from address mismatch","tx.from",t.from),delete t.from);const n=Fn.from(t);return n.signature=this.signingKey.sign(n.unsignedHash),n.serialized}async signMessage(t){return this.signMessageSync(t)}signMessageSync(t){return this.signingKey.sign(Ln(t)).serialized}async signTypedData(t,e,r){const n=await is.resolveNames(t,e,r,(async t=>{k(null!=this.provider,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:t}});const e=await this.provider.resolveName(t);return k(null!=e,"unconfigured ENS name","UNCONFIGURED_NAME",{value:t}),e}));return this.signingKey.sign(is.hash(n.domain,e,n.value)).serialized}}const oc=" !#$%&'()*+,-./<=>?@[]^_`{|}~",cc=/^[a-z]*$/i;function lc(t,e){let r=97;return t.reduce(((t,n)=>(n===e?r++:n.match(cc)?t.push(String.fromCharCode(r)+n):(r=97,t.push(n)),t)),[])}function uc(t){return E("0"===t[0],"unsupported auwl data","data",t),function(t,e){for(let r=28;r>=0;r--)t=t.split(oc[r]).join(e.substring(2*r,2*r+2));const r=[],n=t.replace(/(:|([0-9])|([A-Z][a-z]*))/g,((t,e,n,s)=>{if(n)for(let t=parseInt(n);t>=0;t--)r.push(";");else r.push(e.toLowerCase());return""}));if(n)throw new Error(`leftovers: ${JSON.stringify(n)}`);return lc(lc(r,";"),":")}(t.substring(59),t.substring(1,59))}class hc{locale;constructor(t){m(this,{locale:t})}split(t){return t.toLowerCase().split(/\s+/g)}join(t){return t.join(" ")}}class dc extends hc{#_;#je;constructor(t,e,r){super(t),this.#_=e,this.#je=r,this.#Ve=null}get _data(){return this.#_}_decodeWords(){return uc(this.#_)}#Ve;#Ke(){if(null==this.#Ve){const t=this._decodeWords();if(on(t.join("\n")+"\n")!==this.#je)throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);this.#Ve=t}return this.#Ve}getWord(t){const e=this.#Ke();return E(t>=0&&t<e.length,`invalid word index: ${t}`,"index",t),e[t]}getWordIndex(t){return this.#Ke().indexOf(t)}}let fc=null;class pc extends dc{constructor(){super("en","0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO","0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60")}static wordlist(){return null==fc&&(fc=new pc),fc}}function gc(t){return(1<<t)-1<<8-t&255}function mc(t,e){R("NFKD"),null==e&&(e=pc.wordlist());const r=e.split(t);E(r.length%3==0&&r.length>=12&&r.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const n=new Uint8Array(Math.ceil(11*r.length/8));let s=0;for(let t=0;t<r.length;t++){let i=e.getWordIndex(r[t].normalize("NFKD"));E(i>=0,`invalid mnemonic word at index ${t}`,"mnemonic","[ REDACTED ]");for(let t=0;t<11;t++)i&1<<10-t&&(n[s>>3]|=1<<7-s%8),s++}const i=32*r.length/3,a=gc(r.length/3);return E((x(rr(n.slice(0,i/8)))[0]&a)===(n[n.length-1]&a),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),_(n.slice(0,i/8))}function yc(t,e){E(t.length%4==0&&t.length>=16&&t.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),null==e&&(e=pc.wordlist());const r=[0];let n=11;for(let e=0;e<t.length;e++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=t[e],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=t[e]>>8-n,r.push(t[e]&((1<<8-n)-1&255)),n+=3);const s=t.length/4,i=parseInt(rr(t).substring(2,4),16)&gc(s);return r[r.length-1]<<=s,r[r.length-1]|=i>>8-s,e.join(r.map((t=>e.getWord(t))))}const bc={};class wc{phrase;password;wordlist;entropy;constructor(t,e,r,n,s){null==n&&(n=""),null==s&&(s=pc.wordlist()),T(t,bc,"Mnemonic"),m(this,{phrase:r,password:n,wordlist:s,entropy:e})}computeSeed(){const t=gt("mnemonic"+this.password,"NFKD");return Be(gt(this.phrase,"NFKD"),t,2048,64,"sha512")}static fromPhrase(t,e,r){const n=mc(t,r);return t=yc(x(n),r),new wc(bc,n,t,e,r)}static fromEntropy(t,e,r){const n=x(t,"entropy"),s=yc(n,r);return new wc(bc,_(n),s,e,r)}static entropyToPhrase(t,e){return yc(x(t,"entropy"),e)}static phraseToEntropy(t,e){return mc(t,e)}static isValidMnemonic(t,e){try{return mc(t,e),!0}catch(t){}return!1}}function vc(t){return"string"!=typeof t||t.startsWith("0x")||(t="0x"+t),A(t)}function kc(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function Ec(t){return"string"==typeof t?gt(t,"NFKC"):A(t)}function Nc(t,e){const r=e.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);E(null!=r,"invalid path","path",e);const n=r[1],s=r[3],i="!"===r[4];let a=t;for(const t of n.toLowerCase().split(".")){if(Array.isArray(a)){if(!t.match(/^[0-9]+$/))break;a=a[parseInt(t)]}else if("object"==typeof a){let e=null;for(const r in a)if(r.toLowerCase()===t){e=a[r];break}a=e}else a=null;if(null==a)break}if(E(!i||null!=a,"missing required value","path",n),s&&null!=a){if("int"===s){if("string"==typeof a&&a.match(/^-?[0-9]+$/))return parseInt(a);if(Number.isSafeInteger(a))return a}if("number"===s&&"string"==typeof a&&a.match(/^-?[0-9.]*$/))return parseFloat(a);if("data"===s&&"string"==typeof a)return vc(a);if("array"===s&&Array.isArray(a))return a;if(s===typeof a)return a;E(!1,`wrong type found for ${s} `,"path",n)}return a}const Pc="m/44'/60'/0'/0/0";function Rc(t){try{const e=JSON.parse(t);if(3===(null!=e.version?parseInt(e.version):0))return!0}catch(t){}return!1}function Tc(t,e){const r=x(e),n=Nc(t,"crypto.ciphertext:data!");E(_(Ae(U([r.slice(16,32),n]))).substring(2)===Nc(t,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const s=function(t,e,r){if("aes-128-ctr"===Nc(t,"crypto.cipher:string")){const n=Nc(t,"crypto.cipherparams.iv:data!");return _(new u(e,n).decrypt(r))}k(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}(t,r.slice(0,16),n),i=yn(s);if(t.address){let e=t.address.toLowerCase();e.startsWith("0x")||(e="0x"+e),E(Ir(e)===i,"keystore address/privateKey mismatch","address",t.address)}const a={address:i,privateKey:s};if("0.1"===Nc(t,"x-ethers.version:string")){const e=r.slice(32,64),n=Nc(t,"x-ethers.mnemonicCiphertext:data!"),s=Nc(t,"x-ethers.mnemonicCounter:data!"),i=new u(e,s);a.mnemonic={path:Nc(t,"x-ethers.path:string")||Pc,locale:Nc(t,"x-ethers.locale:string")||"en",entropy:_(x(i.decrypt(n)))}}return a}function Oc(t){const e=Nc(t,"crypto.kdf:string");if(e&&"string"==typeof e){if("scrypt"===e.toLowerCase()){const r=Nc(t,"crypto.kdfparams.salt:data!"),n=Nc(t,"crypto.kdfparams.n:int!"),s=Nc(t,"crypto.kdfparams.r:int!"),i=Nc(t,"crypto.kdfparams.p:int!");E(n>0&&!(n&n-1),"invalid kdf.N","kdf.N",n),E(s>0&&i>0,"invalid kdf","kdf",e);const a=Nc(t,"crypto.kdfparams.dklen:int!");return E(32===a,"invalid kdf.dklen","kdf.dflen",a),{name:"scrypt",salt:r,N:n,r:s,p:i,dkLen:64}}if("pbkdf2"===e.toLowerCase()){const e=Nc(t,"crypto.kdfparams.salt:data!"),r=Nc(t,"crypto.kdfparams.prf:string!"),n=r.split("-").pop();E("sha256"===n||"sha512"===n,"invalid kdf.pdf","kdf.pdf",r);const s=Nc(t,"crypto.kdfparams.c:int!"),i=Nc(t,"crypto.kdfparams.dklen:int!");return E(32===i,"invalid kdf.dklen","kdf.dklen",i),{name:"pbkdf2",salt:e,count:s,dkLen:i,algorithm:n}}}E(!1,"unsupported key-derivation function","kdf",e)}function xc(t,e){const r=JSON.parse(t),n=Ec(e),s=Oc(r);if("pbkdf2"===s.name){const{salt:t,count:e,dkLen:i,algorithm:a}=s;return Tc(r,Be(n,t,e,i,a))}k("scrypt"===s.name,"cannot be reached","UNKNOWN_ERROR",{params:s});const{salt:i,N:a,r:o,p:c,dkLen:l}=s;return Tc(r,We(n,i,a,o,c,l))}function Ac(t){return new Promise((e=>{setTimeout((()=>{e()}),t)}))}async function Ic(t,e,r){const n=JSON.parse(t),s=Ec(e),i=Oc(n);if("pbkdf2"===i.name){r&&(r(0),await Ac(0));const{salt:t,count:e,dkLen:a,algorithm:o}=i,c=Be(s,t,e,a,o);return r&&(r(1),await Ac(0)),Tc(n,c)}k("scrypt"===i.name,"cannot be reached","UNKNOWN_ERROR",{params:i});const{salt:a,N:o,r:c,p:l,dkLen:u}=i;return Tc(n,await Je(s,a,o,c,l,u,r))}function Sc(t){const e=null!=t.salt?x(t.salt,"options.salt"):Me(32);let r=1<<17,n=8,s=1;return t.scrypt&&(t.scrypt.N&&(r=t.scrypt.N),t.scrypt.r&&(n=t.scrypt.r),t.scrypt.p&&(s=t.scrypt.p)),E("number"==typeof r&&r>0&&Number.isSafeInteger(r)&&(BigInt(r)&BigInt(r-1))===BigInt(0),"invalid scrypt N parameter","options.N",r),E("number"==typeof n&&n>0&&Number.isSafeInteger(n),"invalid scrypt r parameter","options.r",n),E("number"==typeof s&&s>0&&Number.isSafeInteger(s),"invalid scrypt p parameter","options.p",s),{name:"scrypt",dkLen:32,salt:e,N:r,r:n,p:s}}function Cc(t,e,r,n){const s=x(r.privateKey,"privateKey"),i=null!=n.iv?x(n.iv,"options.iv"):Me(16);E(16===i.length,"invalid options.iv length","options.iv",n.iv);const a=null!=n.uuid?x(n.uuid,"options.uuid"):Me(16);E(16===a.length,"invalid options.uuid length","options.uuid",n.iv);const o=t.slice(0,16),c=t.slice(16,32),l=x(new u(o,i).encrypt(s)),h=Ae(U([c,l])),d={address:r.address.substring(2).toLowerCase(),id:re(a),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:_(i).substring(2)},ciphertext:_(l).substring(2),kdf:"scrypt",kdfparams:{salt:_(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:h.substring(2)}};if(r.mnemonic){const e=null!=n.client?n.client:`ethers/${f}`,s=r.mnemonic.path||Pc,i=r.mnemonic.locale||"en",a=t.slice(32,64),o=x(r.mnemonic.entropy,"account.mnemonic.entropy"),c=Me(16),l=x(new u(a,c).encrypt(o)),h=new Date,p="UTC--"+(h.getUTCFullYear()+"-"+kc(h.getUTCMonth()+1,2)+"-"+kc(h.getUTCDate(),2)+"T"+kc(h.getUTCHours(),2)+"-"+kc(h.getUTCMinutes(),2)+"-"+kc(h.getUTCSeconds(),2)+".0Z")+"--"+d.address;d["x-ethers"]={client:e,gethFilename:p,path:s,locale:i,mnemonicCounter:_(c).substring(2),mnemonicCiphertext:_(l).substring(2),version:"0.1"}}return JSON.stringify(d)}function _c(t,e,r){null==r&&(r={});const n=Ec(e),s=Sc(r);return Cc(x(We(n,s.salt,s.N,s.r,s.p,64)),s,t,r)}async function Uc(t,e,r){null==r&&(r={});const n=Ec(e),s=Sc(r);return Cc(x(await Je(n,s.salt,s.N,s.r,s.p,64,r.progressCallback)),s,t,r)}const Fc="m/44'/60'/0'/0/0",Lc=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),Bc=2147483648,Dc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");function Gc(t,e){let r="";for(;t;)r="0123456789abcdef"[t%16]+r,t=Math.trunc(t/16);for(;r.length<2*e;)r="0"+r;return"0x"+r}function $c(t){const e=x(t);return ot(U([e,L(rr(rr(e)),0,4)]))}const Mc={};function jc(t,e,r,n){const s=new Uint8Array(37);t&Bc?(k(null!=n,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),s.set(x(n),1)):s.set(x(r));for(let e=24;e>=0;e-=8)s[33+(e>>3)]=t>>24-e&255;const i=x(Re("sha512",e,s));return{IL:i.slice(0,32),IR:i.slice(32)}}function Vc(t,e){const r=e.split("/");E(r.length>0,"invalid path","path",e),"m"===r[0]&&(E(0===t.depth,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${t.depth}`,"path",e),r.shift());let n=t;for(let t=0;t<r.length;t++){const e=r[t];if(e.match(/^[0-9]+'$/)){const r=parseInt(e.substring(0,e.length-1));E(r<Bc,"invalid path index",`path[${t}]`,e),n=n.deriveChild(Bc+r)}else if(e.match(/^[0-9]+$/)){const r=parseInt(e);E(r<Bc,"invalid path index",`path[${t}]`,e),n=n.deriveChild(r)}else E(!1,"invalid path component",`path[${t}]`,e)}return n}class Kc extends ac{publicKey;fingerprint;parentFingerprint;mnemonic;chainCode;path;index;depth;constructor(t,e,r,n,s,i,a,o,c){super(e,c),T(t,Mc,"HDNodeWallet"),m(this,{publicKey:e.compressedPublicKey});m(this,{parentFingerprint:r,fingerprint:L(_e(rr(this.publicKey)),0,4),chainCode:n,path:s,index:i,depth:a}),m(this,{mnemonic:o})}connect(t){return new Kc(Mc,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,t)}#He(){const t={address:this.address,privateKey:this.privateKey},e=this.mnemonic;return this.path&&e&&"en"===e.wordlist.locale&&""===e.password&&(t.mnemonic={path:this.path,locale:"en",entropy:e.entropy}),t}async encrypt(t,e){return await Uc(this.#He(),t,{progressCallback:e})}encryptSync(t){return _c(this.#He(),t)}get extendedKey(){return k(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),$c(U(["0x0488ADE4",Gc(this.depth,1),this.parentFingerprint,Gc(this.index,4),this.chainCode,U(["0x00",this.privateKey])]))}hasPath(){return null!=this.path}neuter(){return new Hc(Mc,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(t){const e=X(t,"index");E(e<=4294967295,"invalid index","index",e);let r=this.path;r&&(r+="/"+(2147483647&e),e&Bc&&(r+="'"));const{IR:n,IL:s}=jc(e,this.chainCode,this.publicKey,this.privateKey),i=new Er(Q((Y(s)+BigInt(this.privateKey))%Dc,32));return new Kc(Mc,i,this.fingerprint,_(n),r,e,this.depth+1,this.mnemonic,this.provider)}derivePath(t){return Vc(this,t)}static#ze(t,e){E(S(t),"invalid seed","seed","[REDACTED]");const r=x(t,"seed");E(r.length>=16&&r.length<=64,"invalid seed","seed","[REDACTED]");const n=x(Re("sha512",Lc,r)),s=new Er(_(n.slice(0,32)));return new Kc(Mc,s,"0x00000000",_(n.slice(32)),"m",0,0,e,null)}static fromExtendedKey(t){const e=tt(ct(t));E(82===e.length||$c(e.slice(0,78))===t,"invalid extended key","extendedKey","[ REDACTED ]");const r=e[4],n=_(e.slice(5,9)),s=parseInt(_(e.slice(9,13)).substring(2),16),i=_(e.slice(13,45)),a=e.slice(45,78);switch(_(e.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const t=_(a);return new Hc(Mc,yn(t),t,n,i,null,s,r,null)}case"0x0488ade4":case"0x04358394 ":if(0!==a[0])break;return new Kc(Mc,new Er(a.slice(1)),n,i,null,s,r,null,null)}E(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(t,e,r){null==t&&(t=""),null==e&&(e=Fc),null==r&&(r=pc.wordlist());const n=wc.fromEntropy(Me(16),t,r);return Kc.#ze(n.computeSeed(),n).derivePath(e)}static fromMnemonic(t,e){return e||(e=Fc),Kc.#ze(t.computeSeed(),t).derivePath(e)}static fromPhrase(t,e,r,n){null==e&&(e=""),null==r&&(r=Fc),null==n&&(n=pc.wordlist());const s=wc.fromPhrase(t,e,n);return Kc.#ze(s.computeSeed(),s).derivePath(r)}static fromSeed(t){return Kc.#ze(t,null)}}class Hc extends Za{publicKey;fingerprint;parentFingerprint;chainCode;path;index;depth;constructor(t,e,r,n,s,i,a,o,c){super(e,c),T(t,Mc,"HDNodeVoidWallet"),m(this,{publicKey:r});m(this,{publicKey:r,fingerprint:L(_e(rr(r)),0,4),parentFingerprint:n,chainCode:s,path:i,index:a,depth:o})}connect(t){return new Hc(Mc,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,t)}get extendedKey(){return k(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),$c(U(["0x0488B21E",Gc(this.depth,1),this.parentFingerprint,Gc(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return null!=this.path}deriveChild(t){const e=X(t,"index");E(e<=4294967295,"invalid index","index",e);let r=this.path;r&&(r+="/"+(2147483647&e),e&Bc&&(r+="'"));const{IR:n,IL:s}=jc(e,this.chainCode,this.publicKey,null),i=Er.addPoints(s,this.publicKey,!0),a=yn(i);return new Hc(Mc,a,i,this.fingerprint,_(n),r,e,this.depth+1,this.provider)}derivePath(t){return Vc(this,t)}}function zc(t){const e=X(t,"index");return E(e>=0&&e<Bc,"invalid account index","index",e),`m/44'/60'/${e}'/0/0`}function qc(t){const e=X(t,"index");return E(e>=0&&e<Bc,"invalid account index","index",e),`m/44'/60'/0'/0/${e}`}function Jc(t){try{if(JSON.parse(t).encseed)return!0}catch(t){}return!1}function Wc(t,e){const r=JSON.parse(t),n=Ec(e),s=Ir(Nc(r,"ethaddr:string!")),i=vc(Nc(r,"encseed:string!"));E(i&&i.length%16==0,"invalid encseed","json",t);const a=x(Be(n,n,2e3,32,"sha256")).slice(0,16),o=i.slice(0,16),c=i.slice(16),l=new h(a,o),u=d(x(l.decrypt(c)));let f="";for(let t=0;t<u.length;t++)f+=String.fromCharCode(u[t]);return{address:s,privateKey:on(f)}}function Yc(t){return new Promise((e=>{setTimeout((()=>{e()}),t)}))}class Xc extends ac{constructor(t,e){"string"!=typeof t||t.startsWith("0x")||(t="0x"+t),super("string"==typeof t?new Er(t):t,e)}connect(t){return new Xc(this.signingKey,t)}async encrypt(t,e){const r={address:this.address,privateKey:this.privateKey};return await Uc(r,t,{progressCallback:e})}encryptSync(t){return _c({address:this.address,privateKey:this.privateKey},t)}static#qe(t){if(E(t,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in t&&t.mnemonic&&"en"===t.mnemonic.locale){const e=wc.fromEntropy(t.mnemonic.entropy),r=Kc.fromMnemonic(e,t.mnemonic.path);if(r.address===t.address&&r.privateKey===t.privateKey)return r;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const e=new Xc(t.privateKey);return E(e.address===t.address,"address/privateKey mismatch","json","[ REDACTED ]"),e}static async fromEncryptedJson(t,e,r){let n=null;return Rc(t)?n=await Ic(t,e,r):Jc(t)&&(r&&(r(0),await Yc(0)),n=Wc(t,e),r&&(r(1),await Yc(0))),Xc.#qe(n)}static fromEncryptedJsonSync(t,e){let r=null;return Rc(t)?r=xc(t,e):Jc(t)?r=Wc(t,e):E(!1,"invalid JSON wallet","json","[ REDACTED ]"),Xc.#qe(r)}static createRandom(t){const e=Kc.createRandom();return t?e.connect(t):e}static fromPhrase(t,e){const r=Kc.fromPhrase(t);return e?r.connect(e):r}}class Zc extends dc{#Je;constructor(t,e,r,n){super(t,e,n),this.#Je=r}get _accent(){return this.#Je}_decodeWords(){return function(t,e){let r=uc(t).join(",");return e.split(/,/g).forEach((t=>{const n=t.match(/^([a-z]*)([0-9]+)([0-9])(.*)$/);E(null!==n,"internal error parsing accents","accents",e);let s=0;const i=function(t,e){const r=(1<<t)-1,n=[];let s=0,i=0,a=0;for(let o=0;o<e.length;o++)for(s=s<<6|")!@#$%^&*(ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".indexOf(e[o]),i+=6;i>=t;){const e=s>>i-t;s&=(1<<i-t)-1,i-=t,0===e?a+=r:(n.push(e+a),a=0)}return n}(parseInt(n[3]),n[4]),a=parseInt(n[2]),o=new RegExp(`([${n[1]}])`,"g");r=r.replace(o,((t,e)=>(0==--i[s]&&(e=String.fromCharCode(e.charCodeAt(0),a),s++),e)))})),r.split(",")}(this._data,this._accent)}}const Qc={en:pc.wordlist()};var tl=Object.freeze({__proto__:null,version:f,decodeBytes32String:ii,encodeBytes32String:si,AbiCoder:ni,ConstructorFragment:Js,ErrorFragment:zs,EventFragment:qs,Fragment:Vs,FallbackFragment:Ws,FunctionFragment:Ys,NamedFragment:Ks,ParamType:js,StructFragment:Xs,checkResultErrors:fe,ErrorDescription:ci,Indexed:li,Interface:di,LogDescription:ai,Result:de,TransactionDescription:oi,Typed:jr,getAddress:Ir,getIcapAddress:Sr,getCreateAddress:Cr,getCreate2Address:_r,isAddressable:Ur,isAddress:Fr,resolveAddress:Br,ZeroAddress:sr,WeiPerEther:or,MaxUint256:cr,MinInt256:lr,MaxInt256:ur,N:ar,ZeroHash:ir,EtherSymbol:"Ξ",MessagePrefix:dr,BaseContract:Xi,Contract:Zi,ContractFactory:Qi,ContractEventPayload:Ai,ContractTransactionReceipt:Ti,ContractTransactionResponse:Oi,ContractUnknownEventPayload:xi,EventLog:Pi,UndecodedEventLog:Ri,computeHmac:Re,randomBytes:Me,keccak256:Ae,ripemd160:_e,sha256:rr,sha512:nr,pbkdf2:Be,scrypt:Je,scryptSync:We,lock:Nr,Signature:kr,SigningKey:Er,id:on,ensNormalize:hn,isValidName:dn,namehash:fn,dnsEncode:pn,hashMessage:Ln,verifyMessage:Bn,solidityPacked:jn,solidityPackedKeccak256:Vn,solidityPackedSha256:Kn,TypedDataEncoder:is,verifyTypedData:as,getDefaultProvider:tc,Block:bi,FeeData:mi,Log:wi,TransactionReceipt:vi,TransactionResponse:ki,AbstractSigner:Xa,NonceManager:ec,VoidSigner:Za,AbstractProvider:Ma,FallbackProvider:Zo,JsonRpcApiProvider:ho,JsonRpcProvider:po,JsonRpcSigner:uo,BrowserProvider:rc,AlchemyProvider:vo,AnkrProvider:bo,ChainstackProvider:Eo,CloudflareProvider:No,EtherscanProvider:xo,InfuraProvider:Do,InfuraWebSocketProvider:Bo,PocketProvider:sc,QuickNodeProvider:$o,IpcSocketProvider:ic,SocketProvider:Uo,WebSocketProvider:Fo,EnsResolver:sa,Network:Ea,EnsPlugin:ba,EtherscanPlugin:Ro,FeeDataNetworkPlugin:wa,FetchUrlFeeDataNetworkPlugin:va,GasCostPlugin:ya,NetworkPlugin:ma,MulticoinProviderPlugin:ea,SocketBlockSubscriber:So,SocketEventSubscriber:_o,SocketPendingSubscriber:Co,SocketSubscriber:Io,UnmanagedSubscriber:La,copyRequest:yi,showThrottleMessage:to,accessListify:mn,computeAddress:yn,recoverAddress:bn,Transaction:Fn,decodeBase58:ct,encodeBase58:ot,decodeBase64:lt,encodeBase64:ut,concat:U,dataLength:F,dataSlice:L,getBytes:x,getBytesCopy:A,hexlify:_,isHexString:I,isBytesLike:S,stripZerosLeft:B,zeroPadBytes:$,zeroPadValue:G,defineProperties:m,resolveProperties:g,assert:k,assertArgument:E,assertArgumentCount:N,assertNormalize:R,assertPrivate:T,makeError:v,isCallException:w,isError:b,EventPayload:ht,FetchRequest:At,FetchResponse:It,FetchCancelSignal:Ot,FixedNumber:Mt,getBigInt:q,getNumber:X,getUint:J,toBeArray:tt,toBigInt:Y,toBeHex:Q,toNumber:Z,toQuantity:et,fromTwos:K,toTwos:H,mask:z,formatEther:te,parseEther:ee,formatUnits:Zt,parseUnits:Qt,toUtf8Bytes:gt,toUtf8CodePoints:yt,toUtf8String:mt,Utf8ErrorFuncs:ft,decodeRlp:zt,encodeRlp:Yt,uuidV4:re,Mnemonic:wc,BaseWallet:ac,HDNodeWallet:Kc,HDNodeVoidWallet:Hc,Wallet:Xc,defaultPath:Fc,getAccountPath:zc,getIndexedAccountPath:qc,isCrowdsaleJson:Jc,isKeystoreJson:Rc,decryptCrowdsaleJson:Wc,decryptKeystoreJsonSync:xc,decryptKeystoreJson:Ic,encryptKeystoreJson:Uc,encryptKeystoreJsonSync:_c,Wordlist:hc,LangEn:pc,WordlistOwl:dc,WordlistOwlA:Zc,wordlists:Qc});export{ni as AbiCoder,Ma as AbstractProvider,Xa as AbstractSigner,vo as AlchemyProvider,bo as AnkrProvider,Xi as BaseContract,ac as BaseWallet,bi as Block,rc as BrowserProvider,Eo as ChainstackProvider,No as CloudflareProvider,Js as ConstructorFragment,Zi as Contract,Ai as ContractEventPayload,Qi as ContractFactory,Ti as ContractTransactionReceipt,Oi as ContractTransactionResponse,xi as ContractUnknownEventPayload,ba as EnsPlugin,sa as EnsResolver,ci as ErrorDescription,zs as ErrorFragment,hr as EtherSymbol,Ro as EtherscanPlugin,xo as EtherscanProvider,qs as EventFragment,Pi as EventLog,ht as EventPayload,Ws as FallbackFragment,Zo as FallbackProvider,mi as FeeData,wa as FeeDataNetworkPlugin,Ot as FetchCancelSignal,At as FetchRequest,It as FetchResponse,va as FetchUrlFeeDataNetworkPlugin,Mt as FixedNumber,Vs as Fragment,Ys as FunctionFragment,ya as GasCostPlugin,Hc as HDNodeVoidWallet,Kc as HDNodeWallet,li as Indexed,Do as InfuraProvider,Bo as InfuraWebSocketProvider,di as Interface,ic as IpcSocketProvider,ho as JsonRpcApiProvider,po as JsonRpcProvider,uo as JsonRpcSigner,pc as LangEn,wi as Log,ai as LogDescription,ur as MaxInt256,cr as MaxUint256,dr as MessagePrefix,lr as MinInt256,wc as Mnemonic,ea as MulticoinProviderPlugin,ar as N,Ks as NamedFragment,Ea as Network,ma as NetworkPlugin,ec as NonceManager,js as ParamType,sc as PocketProvider,$o as QuickNodeProvider,de as Result,kr as Signature,Er as SigningKey,So as SocketBlockSubscriber,_o as SocketEventSubscriber,Co as SocketPendingSubscriber,Uo as SocketProvider,Io as SocketSubscriber,Xs as StructFragment,Fn as Transaction,oi as TransactionDescription,vi as TransactionReceipt,ki as TransactionResponse,jr as Typed,is as TypedDataEncoder,Ri as UndecodedEventLog,La as UnmanagedSubscriber,ft as Utf8ErrorFuncs,Za as VoidSigner,Xc as Wallet,Fo as WebSocketProvider,or as WeiPerEther,hc as Wordlist,dc as WordlistOwl,Zc as WordlistOwlA,sr as ZeroAddress,ir as ZeroHash,mn as accessListify,k as assert,E as assertArgument,N as assertArgumentCount,R as assertNormalize,T as assertPrivate,fe as checkResultErrors,yn as computeAddress,Re as computeHmac,U as concat,yi as copyRequest,F as dataLength,L as dataSlice,ct as decodeBase58,lt as decodeBase64,ii as decodeBytes32String,zt as decodeRlp,Wc as decryptCrowdsaleJson,Ic as decryptKeystoreJson,xc as decryptKeystoreJsonSync,Fc as defaultPath,m as defineProperties,pn as dnsEncode,ot as encodeBase58,ut as encodeBase64,si as encodeBytes32String,Yt as encodeRlp,Uc as encryptKeystoreJson,_c as encryptKeystoreJsonSync,hn as ensNormalize,tl as ethers,te as formatEther,Zt as formatUnits,K as fromTwos,zc as getAccountPath,Ir as getAddress,q as getBigInt,x as getBytes,A as getBytesCopy,_r as getCreate2Address,Cr as getCreateAddress,tc as getDefaultProvider,Sr as getIcapAddress,qc as getIndexedAccountPath,X as getNumber,J as getUint,Ln as hashMessage,_ as hexlify,on as id,Fr as isAddress,Ur as isAddressable,S as isBytesLike,w as isCallException,Jc as isCrowdsaleJson,b as isError,I as isHexString,Rc as isKeystoreJson,dn as isValidName,Ae as keccak256,Nr as lock,v as makeError,z as mask,fn as namehash,ee as parseEther,Qt as parseUnits,Be as pbkdf2,Me as randomBytes,bn as recoverAddress,Br as resolveAddress,g as resolveProperties,_e as ripemd160,Je as scrypt,We as scryptSync,rr as sha256,nr as sha512,to as showThrottleMessage,jn as solidityPacked,Vn as solidityPackedKeccak256,Kn as solidityPackedSha256,B as stripZerosLeft,tt as toBeArray,Q as toBeHex,Y as toBigInt,Z as toNumber,et as toQuantity,H as toTwos,gt as toUtf8Bytes,yt as toUtf8CodePoints,mt as toUtf8String,re as uuidV4,Bn as verifyMessage,as as verifyTypedData,f as version,Qc as wordlists,$ as zeroPadBytes,G as zeroPadValue};export default null;
//# sourceMappingURL=/sm/70808ae8b8f4452f989e9380724fa2de97ef9ce1578e31e4c0bab147d60c410c.map